!function(e,t,i){"use strict";if(1==e.importNode.length&&!t.get("ungap-li")){var n="extends";try{var s={extends:"li"},o=HTMLLIElement,a=function(){return Reflect.construct(o,[],a)};if(a.prototype=i.create(o.prototype),t.define("ungap-li",a,s),!/is="ungap-li"/.test((new a).outerHTML))throw s}catch(s){!function(){var s="attributeChangedCallback",o="connectedCallback",a="disconnectedCallback",r=Element.prototype,l=i.assign,c=i.create,d=i.defineProperties,h=i.getOwnPropertyDescriptor,u=i.setPrototypeOf,p=t.define,f=t.get,m=t.upgrade,g=t.whenDefined,v=c(null),y=new WeakMap,b={childList:!0,subtree:!0};Reflect.ownKeys(self).filter((function(e){return"string"==typeof e&&/^HTML(?!Element)/.test(e)})).forEach((function(e){function t(){}var i=self[e];u(t,i),(t.prototype=i.prototype).constructor=t,(i={})[e]={value:t},d(self,i)})),new MutationObserver(C).observe(e,b),j(Document.prototype,"importNode"),j(Node.prototype,"cloneNode"),d(t,{define:{value:function(i,s,o){if(i=i.toLowerCase(),o&&n in o){v[i]=l({},o,{Class:s});i=o[n]+'[is="'+i+'"]';for(var a=e.querySelectorAll(i),r=0,c=a.length;r<c;r++)E(a[r])}else p.apply(t,arguments)}},get:{value:function(e){return e in v?v[e].Class:f.call(t,e)}},upgrade:{value:function(e){var i=T(e);!i||e instanceof i.Class?m.call(t,e):P(e,i)}},whenDefined:{value:function(e){return e in v?Promise.resolve():g.call(t,e)}}});var _=e.createElement;d(e,{createElement:{value:function(i,n){return i=_.call(e,i),n&&"is"in n&&(i.setAttribute("is",n.is),t.upgrade(i)),i}}});var w=h(r,"attachShadow").value,x=h(r,"innerHTML");function C(e){for(var t=0,i=e.length;t<i;t++){for(var n=e[t],s=n.addedNodes,o=n.removedNodes,a=0,r=s.length;a<r;a++)E(s[a]);for(a=0,r=o.length;a<r;a++)$(o[a])}}function k(e){for(var t=0,i=e.length;t<i;t++){var n=(r=e[t]).attributeName,o=r.oldValue,a=r.target,r=a.getAttribute(n);s in a&&(o!=r||null!=r)&&a[s](n,o,a.getAttribute(n),null)}}function $(e){var t;1===e.nodeType&&((t=T(e))&&e instanceof t.Class&&a in e&&y.get(e)!==a&&(y.set(e,a),Promise.resolve(e).then(M)),D(e,$))}function T(e){return(e=e.getAttribute("is"))&&(e=e.toLowerCase())in v?v[e]:null}function S(e){e[o]()}function M(e){e[a]()}function P(e,t){var i=(t=t.Class).observedAttributes||[];if(u(e,t.prototype),i.length){new MutationObserver(k).observe(e,{attributes:!0,attributeFilter:i,attributeOldValue:!0});for(var n=[],s=0,o=i.length;s<o;s++)n.push({attributeName:i[s],oldValue:null,target:e});k(n)}}function E(e){var t;1===e.nodeType&&((t=T(e))&&(e instanceof t.Class||P(e,t),o in e&&e.isConnected&&y.get(e)!==o&&(y.set(e,o),Promise.resolve(e).then(S))),D(e,E))}function D(e,t){for(var i=e.content,n=(i&&11==i.nodeType?i:e).querySelectorAll("[is]"),s=0,o=n.length;s<o;s++)t(n[s])}function j(e,t){var i=e[t],n={};n[t]={value:function(){var e=i.apply(this,arguments);switch(e.nodeType){case 1:case 11:D(e,E)}return e}},d(e,n)}d(r,{attachShadow:{value:function(){var e=w.apply(this,arguments);return new MutationObserver(C).observe(e,b),e}},innerHTML:{get:x.get,set:function(e){x.set.call(this,e),/\bis=("|')?[a-z0-9_-]+\1/i.test(e)&&D(this,E)}}})}()}}}(document,customElements,Object),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,(function(){"use strict";function e(e){var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){return t.reject(i)}))}))}function t(e){return new this((function(t,i){if(!e||void 0===e.length)return i(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var s=n.length;function o(e,i){if(i&&("object"==typeof i||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,(function(t){o(e,t)}),(function(i){n[e]={status:"rejected",reason:i},0==--s&&t(n)}))}n[e]={status:"fulfilled",value:i},0==--s&&t(n)}for(var a=0;a<n.length;a++)o(a,n[a])}))}var i=setTimeout,n="undefined"!=typeof setImmediate?setImmediate:null;function s(e){return Boolean(e&&void 0!==e.length)}function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,n)}else(1===e._state?l:c)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof i)return void u((n=i,s=t,function(){n.apply(s,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){c(e,t)}var n,s}function c(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)r(e,e._deferreds[t]);e._deferreds=null}function h(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function u(e,t){var i=!1;try{e((function(e){i||(i=!0,l(t,e))}),(function(e){i||(i=!0,c(t,e))}))}catch(e){if(i)return;i=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var i=new this.constructor(o);return r(this,new h(e,t,i)),i},a.prototype.finally=e,a.all=function(e){return new a((function(t,i){if(!s(e))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function a(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var r=s.then;if("function"==typeof r)return void r.call(s,(function(t){a(e,t)}),i)}n[e]=s,0==--o&&t(n)}catch(e){i(e)}}for(var r=0;r<n.length;r++)a(r,n[r])}))},a.allSettled=t,a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,i){i(e)}))},a.race=function(e){return new a((function(t,i){if(!s(e))return i(new TypeError("Promise.race accepts an array"));for(var n=0,o=e.length;n<o;n++)a.resolve(e[n]).then(t,i)}))},a._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){i(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=a:(p.Promise.prototype.finally||(p.Promise.prototype.finally=e),p.Promise.allSettled||(p.Promise.allSettled=t))})),
  /*!
   * jQuery JavaScript Library v3.2.1
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2017-03-20T18:59Z
   */
  function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){"use strict";var i=[],n=e.document,s=Object.getPrototypeOf,o=i.slice,a=i.concat,r=i.push,l=i.indexOf,c={},d=c.toString,h=c.hasOwnProperty,u=h.toString,p=u.call(Object),f={};function m(e,t){var i=(t=t||n).createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}var g="3.2.1",v=function(e,t){return new v.fn.init(e,t)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b=/^-ms-/,_=/-([a-z])/g,w=function(e,t){return t.toUpperCase()};function x(e){var t=!!e&&"length"in e&&e.length,i=v.type(e);return"function"!==i&&!v.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}v.fn=v.prototype={jquery:g,constructor:v,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=v.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return v.each(this,e)},map:function(e){return this.pushStack(v.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:i.sort,splice:i.splice},v.extend=v.fn.extend=function(){var e,t,i,n,s,o,a=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[r]||{},r++),"object"==typeof a||v.isFunction(a)||(a={}),r===l&&(a=this,r--);r<l;r++)if(null!=(e=arguments[r]))for(t in e)i=a[t],a!==(n=e[t])&&(c&&n&&(v.isPlainObject(n)||(s=Array.isArray(n)))?(s?(s=!1,o=i&&Array.isArray(i)?i:[]):o=i&&v.isPlainObject(i)?i:{},a[t]=v.extend(c,o,n)):void 0!==n&&(a[t]=n));return a},v.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===v.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=v.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==d.call(e))&&(!(t=s(e))||"function"==typeof(i=h.call(t,"constructor")&&t.constructor)&&u.call(i)===p)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(b,"ms-").replace(_,w)},each:function(e,t){var i,n=0;if(x(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(y,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(x(Object(e))?v.merge(i,"string"==typeof e?[e]:e):r.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:l.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;n<i;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,i){for(var n=[],s=0,o=e.length,a=!i;s<o;s++)!t(e[s],s)!==a&&n.push(e[s]);return n},map:function(e,t,i){var n,s,o=0,r=[];if(x(e))for(n=e.length;o<n;o++)null!=(s=t(e[o],o,i))&&r.push(s);else for(o in e)null!=(s=t(e[o],o,i))&&r.push(s);return a.apply([],r)},guid:1,proxy:function(e,t){var i,n,s;if("string"==typeof t&&(i=e[t],t=e,e=i),v.isFunction(e))return n=o.call(arguments,2),s=function(){return e.apply(t||this,n.concat(o.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s},now:Date.now,support:f}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=i[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var C=
    /*!
     * Sizzle CSS Selector Engine v2.3.3
     * https://sizzlejs.com/
     *
     * Copyright jQuery Foundation and other contributors
     * Released under the MIT license
     * http://jquery.org/license
     *
     * Date: 2016-08-08
     */
    function(e){var t,i,n,s,o,a,r,l,c,d,h,u,p,f,m,g,v,y,b,_="sizzle"+1*new Date,w=e.document,x=0,C=0,k=ae(),$=ae(),T=ae(),S=function(e,t){return e===t&&(h=!0),0},M={}.hasOwnProperty,P=[],E=P.pop,D=P.push,j=P.push,O=P.slice,A=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",R="\\["+I+"*("+H+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+I+"*\\]",F=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",z=new RegExp(I+"+","g"),N=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),B=new RegExp("^"+I+"*,"+I+"*"),q=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),W=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),V=new RegExp(F),U=new RegExp("^"+H+"$"),Q={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){u()},se=ye((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{j.apply(P=O.call(w.childNodes),w.childNodes),P[w.childNodes.length].nodeType}catch(e){j={apply:P.length?function(e,t){D.apply(e,O.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,n,s){var o,r,c,d,h,f,v,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return n;if(!s&&((t?t.ownerDocument||t:w)!==p&&u(t),t=t||p,m)){if(11!==x&&(h=K.exec(e)))if(o=h[1]){if(9===x){if(!(c=t.getElementById(o)))return n;if(c.id===o)return n.push(c),n}else if(y&&(c=y.getElementById(o))&&b(t,c)&&c.id===o)return n.push(c),n}else{if(h[2])return j.apply(n,t.getElementsByTagName(e)),n;if((o=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return j.apply(n,t.getElementsByClassName(o)),n}if(i.qsa&&!T[e+" "]&&(!g||!g.test(e))){if(1!==x)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((d=t.getAttribute("id"))?d=d.replace(te,ie):t.setAttribute("id",d=_),r=(f=a(e)).length;r--;)f[r]="#"+d+" "+ve(f[r]);v=f.join(","),y=Z.test(e)&&me(t.parentNode)||t}if(v)try{return j.apply(n,y.querySelectorAll(v)),n}catch(e){}finally{d===_&&t.removeAttribute("id")}}}return l(e.replace(N,"$1"),t,n,s)}function ae(){var e=[];return function t(i,s){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=s}}function re(e){return e[_]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var i=e.split("|"),s=i.length;s--;)n.attrHandle[i[s]]=t}function de(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return re((function(t){return t=+t,re((function(i,n){for(var s,o=e([],i.length,t),a=o.length;a--;)i[s=o[a]]&&(i[s]=!(n[s]=i[s]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},u=oe.setDocument=function(e){var t,s,a=e?e.ownerDocument||e:w;return a!==p&&9===a.nodeType&&a.documentElement?(f=(p=a).documentElement,m=!o(p),w!==p&&(s=p.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ne,!1):s.attachEvent&&s.attachEvent("onunload",ne)),i.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=le((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=G.test(p.getElementsByClassName),i.getById=le((function(e){return f.appendChild(e).id=_,!p.getElementsByName||!p.getElementsByName(_).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i,n,s,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(s=t.getElementsByName(e),n=0;o=s[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],s=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(i.qsa=G.test(p.querySelectorAll))&&(le((function(e){f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+I+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+_+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+I+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=G.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le((function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=G.test(f.compareDocumentPosition),b=t||G.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===w&&b(w,e)?-1:t===p||t.ownerDocument===w&&b(w,t)?1:d?A(d,e)-A(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,s=e.parentNode,o=t.parentNode,a=[e],r=[t];if(!s||!o)return e===p?-1:t===p?1:s?-1:o?1:d?A(d,e)-A(d,t):0;if(s===o)return de(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)r.unshift(i);for(;a[n]===r[n];)n++;return n?de(a[n],r[n]):a[n]===w?-1:r[n]===w?1:0},p):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&u(e),t=t.replace(W,"='$1']"),i.matchesSelector&&m&&!T[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&u(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&u(e);var s=n.attrHandle[t.toLowerCase()],o=s&&M.call(n.attrHandle,t.toLowerCase())?s(e,t,!m):void 0;return void 0!==o?o:i.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ie)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,n=[],s=0,o=0;if(h=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(S),h){for(;t=e[o++];)t===e[o]&&(s=n.push(o));for(;s--;)e.splice(n[s],1)}return d=null,e},s=oe.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=s(t);return i},n=oe.selectors={cacheLength:50,createPseudo:re,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&V.test(i)&&(t=a(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&k(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var s=oe.attr(n,e);return null==s?"!="===t:!t||(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s.replace(z," ")+" ").indexOf(i)>-1:"|="===t&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,s){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var c,d,h,u,p,f,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),y=!l&&!r,b=!1;if(g){if(o){for(;m;){for(u=t;u=u[m];)if(r?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(b=(p=(c=(d=(h=(u=g)[_]||(u[_]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(b=p=0)||f.pop();)if(1===u.nodeType&&++b&&u===t){d[e]=[x,p,b];break}}else if(y&&(b=p=(c=(d=(h=(u=t)[_]||(u[_]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===b)for(;(u=++p&&u&&u[m]||(b=p=0)||f.pop())&&((r?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++b||(y&&((d=(h=u[_]||(u[_]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]=[x,b]),u!==t)););return(b-=s)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return s[_]?s(t):s.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?re((function(e,i){for(var n,o=s(e,t),a=o.length;a--;)e[n=A(e,o[a])]=!(i[n]=o[a])})):function(e){return s(e,0,i)}):s}},pseudos:{not:re((function(e){var t=[],i=[],n=r(e.replace(N,"$1"));return n[_]?re((function(e,t,i,s){for(var o,a=n(e,null,s,[]),r=e.length;r--;)(o=a[r])&&(e[r]=!(t[r]=o))})):function(e,s,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}})),has:re((function(e){return function(t){return oe(e,t).length>0}})),contains:re((function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}})),lang:re((function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe((function(){return[0]})),last:fe((function(e,t){return[t-1]})),eq:fe((function(e,t,i){return[i<0?i+t:i]})),even:fe((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:fe((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:fe((function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e})),gt:fe((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=ue(t);function ge(){}function ve(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(e,t,i){var n=t.dir,s=t.next,o=s||n,a=i&&"parentNode"===o,r=C++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,s);return!1}:function(t,i,l){var c,d,h,u=[x,r];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(d=(h=t[_]||(t[_]={}))[t.uniqueID]||(h[t.uniqueID]={}),s&&s===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=d[o])&&c[0]===x&&c[1]===r)return u[2]=c[2];if(d[o]=u,u[2]=e(t,i,l))return!0}return!1}}function be(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function _e(e,t,i,n,s){for(var o,a=[],r=0,l=e.length,c=null!=t;r<l;r++)(o=e[r])&&(i&&!i(o,n,s)||(a.push(o),c&&t.push(r)));return a}function we(e,t,i,n,s,o){return n&&!n[_]&&(n=we(n)),s&&!s[_]&&(s=we(s,o)),re((function(o,a,r,l){var c,d,h,u=[],p=[],f=a.length,m=o||function(e,t,i){for(var n=0,s=t.length;n<s;n++)oe(e,t[n],i);return i}(t||"*",r.nodeType?[r]:r,[]),g=!e||!o&&t?m:_e(m,u,e,r,l),v=i?s||(o?e:f||n)?[]:a:g;if(i&&i(g,v,r,l),n)for(c=_e(v,p),n(c,[],r,l),d=c.length;d--;)(h=c[d])&&(v[p[d]]=!(g[p[d]]=h));if(o){if(s||e){if(s){for(c=[],d=v.length;d--;)(h=v[d])&&c.push(g[d]=h);s(null,v=[],c,l)}for(d=v.length;d--;)(h=v[d])&&(c=s?A(o,h):u[d])>-1&&(o[c]=!(a[c]=h))}}else v=_e(v===a?v.splice(f,v.length):v),s?s(null,a,v,l):j.apply(a,v)}))}function xe(e){for(var t,i,s,o=e.length,a=n.relative[e[0].type],r=a||n.relative[" "],l=a?1:0,d=ye((function(e){return e===t}),r,!0),h=ye((function(e){return A(t,e)>-1}),r,!0),u=[function(e,i,n){var s=!a&&(n||i!==c)||((t=i).nodeType?d(e,i,n):h(e,i,n));return t=null,s}];l<o;l++)if(i=n.relative[e[l].type])u=[ye(be(u),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[_]){for(s=++l;s<o&&!n.relative[e[s].type];s++);return we(l>1&&be(u),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(N,"$1"),i,l<s&&xe(e.slice(l,s)),s<o&&xe(e=e.slice(s)),s<o&&ve(e))}u.push(i)}return be(u)}return ge.prototype=n.filters=n.pseudos,n.setFilters=new ge,a=oe.tokenize=function(e,t){var i,s,o,a,r,l,c,d=$[e+" "];if(d)return t?0:d.slice(0);for(r=e,l=[],c=n.preFilter;r;){for(a in i&&!(s=B.exec(r))||(s&&(r=r.slice(s[0].length)||r),l.push(o=[])),i=!1,(s=q.exec(r))&&(i=s.shift(),o.push({value:i,type:s[0].replace(N," ")}),r=r.slice(i.length)),n.filter)!(s=Q[a].exec(r))||c[a]&&!(s=c[a](s))||(i=s.shift(),o.push({value:i,type:a,matches:s}),r=r.slice(i.length));if(!i)break}return t?r.length:r?oe.error(e):$(e,l).slice(0)},r=oe.compile=function(e,t){var i,s=[],o=[],r=T[e+" "];if(!r){for(t||(t=a(e)),i=t.length;i--;)(r=xe(t[i]))[_]?s.push(r):o.push(r);r=T(e,function(e,t){var i=t.length>0,s=e.length>0,o=function(o,a,r,l,d){var h,f,g,v=0,y="0",b=o&&[],_=[],w=c,C=o||s&&n.find.TAG("*",d),k=x+=null==w?1:Math.random()||.1,$=C.length;for(d&&(c=a===p||a||d);y!==$&&null!=(h=C[y]);y++){if(s&&h){for(f=0,a||h.ownerDocument===p||(u(h),r=!m);g=e[f++];)if(g(h,a||p,r)){l.push(h);break}d&&(x=k)}i&&((h=!g&&h)&&v--,o&&b.push(h))}if(v+=y,i&&y!==v){for(f=0;g=t[f++];)g(b,_,a,r);if(o){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=E.call(l));_=_e(_)}j.apply(l,_),d&&!o&&_.length>0&&v+t.length>1&&oe.uniqueSort(l)}return d&&(x=k,c=w),b};return i?re(o):o}(o,s)),r.selector=e}return r},l=oe.select=function(e,t,i,s){var o,l,c,d,h,u="function"==typeof e&&e,p=!s&&a(e=u.selector||e);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(J,ee),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=Q.needsContext.test(e)?0:l.length;o--&&(c=l[o],!n.relative[d=c.type]);)if((h=n.find[d])&&(s=h(c.matches[0].replace(J,ee),Z.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(o,1),!(e=s.length&&ve(l)))return j.apply(i,s),i;break}}return(u||r(e,p))(s,t,!m,i,!t||Z.test(e)&&me(t.parentNode)||t),i},i.sortStable=_.split("").sort(S).join("")===_,i.detectDuplicates=!!h,u(),i.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ce("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ce("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ce(L,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),oe}(e);v.find=C,v.expr=C.selectors,v.expr[":"]=v.expr.pseudos,v.uniqueSort=v.unique=C.uniqueSort,v.text=C.getText,v.isXMLDoc=C.isXML,v.contains=C.contains,v.escapeSelector=C.escape;var k=function(e,t,i){for(var n=[],s=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&v(e).is(i))break;n.push(e)}return n},$=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},T=v.expr.match.needsContext;function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,P=/^.[^:#\[\.,]*$/;function E(e,t,i){return v.isFunction(t)?v.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?v.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?v.grep(e,(function(e){return l.call(t,e)>-1!==i})):P.test(t)?v.filter(t,e,i):(t=v.filter(t,e),v.grep(e,(function(e){return l.call(t,e)>-1!==i&&1===e.nodeType})))}v.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?v.find.matchesSelector(n,e)?[n]:[]:v.find.matches(e,v.grep(t,(function(e){return 1===e.nodeType})))},v.fn.extend({find:function(e){var t,i,n=this.length,s=this;if("string"!=typeof e)return this.pushStack(v(e).filter((function(){for(t=0;t<n;t++)if(v.contains(s[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)v.find(e,s[t],i);return n>1?v.uniqueSort(i):i},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&T.test(e)?v(e):e||[],!1).length}});var D,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(v.fn.init=function(e,t,i){var s,o;if(!e)return this;if(i=i||D,"string"==typeof e){if(!(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!s[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof v?t[0]:t,v.merge(this,v.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:n,!0)),M.test(s[1])&&v.isPlainObject(t))for(s in t)v.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return(o=n.getElementById(s[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v.isFunction(e)?void 0!==i.ready?i.ready(e):e(v):v.makeArray(e,this)}).prototype=v.fn,D=v(n);var O=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}v.fn.extend({has:function(e){var t=v(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(v.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,s=this.length,o=[],a="string"!=typeof e&&v(e);if(!T.test(e))for(;n<s;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&v.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?v.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?l.call(v(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),v.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,i){return k(e,"parentNode",i)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,i){return k(e,"nextSibling",i)},prevUntil:function(e,t,i){return k(e,"previousSibling",i)},siblings:function(e){return $((e.parentNode||{}).firstChild,e)},children:function(e){return $(e.firstChild)},contents:function(e){return S(e,"iframe")?e.contentDocument:(S(e,"template")&&(e=e.content||e),v.merge([],e.childNodes))}},(function(e,t){v.fn[e]=function(i,n){var s=v.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=v.filter(n,s)),this.length>1&&(A[e]||v.uniqueSort(s),O.test(e)&&s.reverse()),this.pushStack(s)}}));var I=/[^\x20\t\r\n\f]+/g;function H(e){return e}function R(e){throw e}function F(e,t,i,n){var s;try{e&&v.isFunction(s=e.promise)?s.call(e).done(t).fail(i):e&&v.isFunction(s=e.then)?s.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}v.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return v.each(e.match(I)||[],(function(e,i){t[i]=!0})),t}(e):v.extend({},e);var t,i,n,s,o=[],a=[],r=-1,l=function(){for(s=s||e.once,n=t=!0;a.length;r=-1)for(i=a.shift();++r<o.length;)!1===o[r].apply(i[0],i[1])&&e.stopOnFalse&&(r=o.length,i=!1);e.memory||(i=!1),t=!1,s&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(r=o.length-1,a.push(i)),function t(i){v.each(i,(function(i,n){v.isFunction(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==v.type(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return v.each(arguments,(function(e,t){for(var i;(i=v.inArray(t,o,i))>-1;)o.splice(i,1),i<=r&&r--})),this},has:function(e){return e?v.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return s=a=[],i||t||(o=i=""),this},locked:function(){return!!s},fireWith:function(e,i){return s||(i=[e,(i=i||[]).slice?i.slice():i],a.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},v.extend({Deferred:function(t){var i=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var e=arguments;return v.Deferred((function(t){v.each(i,(function(i,n){var s=v.isFunction(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=s&&s.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,s?[e]:arguments)}))})),e=null})).promise()},then:function(t,n,s){var o=0;function a(t,i,n,s){return function(){var r=this,l=arguments,c=function(){var e,c;if(!(t<o)){if((e=n.apply(r,l))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,v.isFunction(c)?s?c.call(e,a(o,i,H,s),a(o,i,R,s)):(o++,c.call(e,a(o,i,H,s),a(o,i,R,s),a(o,i,H,i.notifyWith))):(n!==H&&(r=void 0,l=[e]),(s||i.resolveWith)(r,l))}},d=s?c:function(){try{c()}catch(e){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(e,d.stackTrace),t+1>=o&&(n!==R&&(r=void 0,l=[e]),i.rejectWith(r,l))}};t?d():(v.Deferred.getStackHook&&(d.stackTrace=v.Deferred.getStackHook()),e.setTimeout(d))}}return v.Deferred((function(e){i[0][3].add(a(0,e,v.isFunction(s)?s:H,e.notifyWith)),i[1][3].add(a(0,e,v.isFunction(t)?t:H)),i[2][3].add(a(0,e,v.isFunction(n)?n:R))})).promise()},promise:function(e){return null!=e?v.extend(e,s):s}},o={};return v.each(i,(function(e,t){var a=t[2],r=t[5];s[t[1]]=a.add,r&&a.add((function(){n=r}),i[3-e][2].disable,i[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith})),s.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),s=o.call(arguments),a=v.Deferred(),r=function(e){return function(i){n[e]=this,s[e]=arguments.length>1?o.call(arguments):i,--t||a.resolveWith(n,s)}};if(t<=1&&(F(e,a.done(r(i)).resolve,a.reject,!t),"pending"===a.state()||v.isFunction(s[i]&&s[i].then)))return a.then();for(;i--;)F(s[i],r(i),a.reject);return a.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&z.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},v.readyException=function(t){e.setTimeout((function(){throw t}))};var N=v.Deferred();function B(){n.removeEventListener("DOMContentLoaded",B),e.removeEventListener("load",B),v.ready()}v.fn.ready=function(e){return N.then(e).catch((function(e){v.readyException(e)})),this},v.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==e&&--v.readyWait>0||N.resolveWith(n,[v]))}}),v.ready.then=N.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout(v.ready):(n.addEventListener("DOMContentLoaded",B),e.addEventListener("load",B));var q=function(e,t,i,n,s,o,a){var r=0,l=e.length,c=null==i;if("object"===v.type(i))for(r in s=!0,i)q(e,t,r,i[r],!0,o,a);else if(void 0!==n&&(s=!0,v.isFunction(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(v(e),i)})),t))for(;r<l;r++)t(e[r],i,a?n:n.call(e[r],r,t(e[r],i)));return s?e:c?t.call(e):l?t(e[0],i):o},W=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function V(){this.expando=v.expando+V.uid++}V.uid=1,V.prototype={cache:function(e){var t=e[this.expando];return t||(t={},W(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[v.camelCase(t)]=i;else for(n in t)s[v.camelCase(n)]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][v.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(v.camelCase):(t=v.camelCase(t))in n?[t]:t.match(I)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||v.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!v.isEmptyObject(t)}};var U=new V,Q=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function G(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(X,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Y.test(e)?JSON.parse(e):e)}(i)}catch(e){}Q.set(e,t,i)}else i=void 0;return i}v.extend({hasData:function(e){return Q.hasData(e)||U.hasData(e)},data:function(e,t,i){return Q.access(e,t,i)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,i){return U.access(e,t,i)},_removeData:function(e,t){U.remove(e,t)}}),v.fn.extend({data:function(e,t){var i,n,s,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(s=Q.get(o),1===o.nodeType&&!U.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=v.camelCase(n.slice(5)),G(o,n,s[n]));U.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each((function(){Q.set(this,e)})):q(this,(function(t){var i;if(o&&void 0===t)return void 0!==(i=Q.get(o,e))||void 0!==(i=G(o,e))?i:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),v.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=U.get(e,t),i&&(!n||Array.isArray(i)?n=U.access(e,t,v.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=v.queue(e,t),n=i.length,s=i.shift(),o=v._queueHooks(e,t);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete o.stop,s.call(e,(function(){v.dequeue(e,t)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return U.get(e,i)||U.access(e,i,{empty:v.Callbacks("once memory").add((function(){U.remove(e,[t+"queue",i])}))})}}),v.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?v.queue(this[0],e):void 0===t?this:this.each((function(){var i=v.queue(this,e,t);v._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&v.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){v.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=v.Deferred(),o=this,a=this.length,r=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=U.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),s.promise(t)}});var K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),J=["Top","Right","Bottom","Left"],ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&v.contains(e.ownerDocument,e)&&"none"===v.css(e,"display")},te=function(e,t,i,n){var s,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in s=i.apply(e,n||[]),t)e.style[o]=a[o];return s};function ie(e,t,i,n){var s,o=1,a=20,r=n?function(){return n.cur()}:function(){return v.css(e,t,"")},l=r(),c=i&&i[3]||(v.cssNumber[t]?"":"px"),d=(v.cssNumber[t]||"px"!==c&&+l)&&Z.exec(v.css(e,t));if(d&&d[3]!==c){c=c||d[3],i=i||[],d=+l||1;do{d/=o=o||".5",v.style(e,t,d+c)}while(o!==(o=r()/l)&&1!==o&&--a)}return i&&(d=+d||+l||0,s=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=s)),s}var ne={};function se(e){var t,i=e.ownerDocument,n=e.nodeName,s=ne[n];return s||(t=i.body.appendChild(i.createElement(n)),s=v.css(t,"display"),t.parentNode.removeChild(t),"none"===s&&(s="block"),ne[n]=s,s)}function oe(e,t){for(var i,n,s=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i=n.style.display,t?("none"===i&&(s[o]=U.get(n,"display")||null,s[o]||(n.style.display="")),""===n.style.display&&ee(n)&&(s[o]=se(n))):"none"!==i&&(s[o]="none",U.set(n,"display",i)));for(o=0;o<a;o++)null!=s[o]&&(e[o].style.display=s[o]);return e}v.fn.extend({show:function(){return oe(this,!0)},hide:function(){return oe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ee(this)?v(this).show():v(this).hide()}))}});var ae=/^(?:checkbox|radio)$/i,re=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,le=/^$|\/(?:java|ecma)script/i,ce={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function de(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t)?v.merge([e],i):i}function he(e,t){for(var i=0,n=e.length;i<n;i++)U.set(e[i],"globalEval",!t||U.get(t[i],"globalEval"))}ce.optgroup=ce.option,ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td;var ue,pe,fe=/<|&#?\w+;/;function me(e,t,i,n,s){for(var o,a,r,l,c,d,h=t.createDocumentFragment(),u=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===v.type(o))v.merge(u,o.nodeType?[o]:o);else if(fe.test(o)){for(a=a||h.appendChild(t.createElement("div")),r=(re.exec(o)||["",""])[1].toLowerCase(),l=ce[r]||ce._default,a.innerHTML=l[1]+v.htmlPrefilter(o)+l[2],d=l[0];d--;)a=a.lastChild;v.merge(u,a.childNodes),(a=h.firstChild).textContent=""}else u.push(t.createTextNode(o));for(h.textContent="",p=0;o=u[p++];)if(n&&v.inArray(o,n)>-1)s&&s.push(o);else if(c=v.contains(o.ownerDocument,o),a=de(h.appendChild(o),"script"),c&&he(a),i)for(d=0;o=a[d++];)le.test(o.type||"")&&i.push(o);return h}ue=n.createDocumentFragment().appendChild(n.createElement("div")),(pe=n.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),ue.appendChild(pe),f.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue;var ge=n.documentElement,ve=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function _e(){return!0}function we(){return!1}function xe(){try{return n.activeElement}catch(e){}}function Ce(e,t,i,n,s,o){var a,r;if("object"==typeof t){for(r in"string"!=typeof i&&(n=n||i,i=void 0),t)Ce(e,r,i,n,t[r],o);return e}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=we;else if(!s)return e;return 1===o&&(a=s,s=function(e){return v().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=v.guid++)),e.each((function(){v.event.add(this,t,s,n,i)}))}v.event={global:{},add:function(e,t,i,n,s){var o,a,r,l,c,d,h,u,p,f,m,g=U.get(e);if(g)for(i.handler&&(i=(o=i).handler,s=o.selector),s&&v.find.matchesSelector(ge,s),i.guid||(i.guid=v.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==v&&v.event.triggered!==t.type?v.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(I)||[""]).length;c--;)p=m=(r=be.exec(t[c])||[])[1],f=(r[2]||"").split(".").sort(),p&&(h=v.event.special[p]||{},p=(s?h.delegateType:h.bindType)||p,h=v.event.special[p]||{},d=v.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:f.join(".")},o),(u=l[p])||((u=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,a)||e.addEventListener&&e.addEventListener(p,a)),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,d):u.push(d),v.event.global[p]=!0)},remove:function(e,t,i,n,s){var o,a,r,l,c,d,h,u,p,f,m,g=U.hasData(e)&&U.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(I)||[""]).length;c--;)if(p=m=(r=be.exec(t[c])||[])[1],f=(r[2]||"").split(".").sort(),p){for(h=v.event.special[p]||{},u=l[p=(n?h.delegateType:h.bindType)||p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=u.length;o--;)d=u[o],!s&&m!==d.origType||i&&i.guid!==d.guid||r&&!r.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(o,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(e,d));a&&!u.length&&(h.teardown&&!1!==h.teardown.call(e,f,g.handle)||v.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)v.event.remove(e,p+t[c],i,n,!0);v.isEmptyObject(l)&&U.remove(e,"handle events")}},dispatch:function(e){var t,i,n,s,o,a,r=v.event.fix(e),l=new Array(arguments.length),c=(U.get(this,"events")||{})[r.type]||[],d=v.event.special[r.type]||{};for(l[0]=r,t=1;t<arguments.length;t++)l[t]=arguments[t];if(r.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,r)){for(a=v.event.handlers.call(this,r,c),t=0;(s=a[t++])&&!r.isPropagationStopped();)for(r.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!r.rnamespace.test(o.namespace)||(r.handleObj=o,r.data=o.data,void 0!==(n=((v.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,l))&&!1===(r.result=n)&&(r.preventDefault(),r.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,r),r.result}},handlers:function(e,t){var i,n,s,o,a,r=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[s=(n=t[i]).selector+" "]&&(a[s]=n.needsContext?v(s,this).index(c)>-1:v.find(s,this,null,[c]).length),a[s]&&o.push(n);o.length&&r.push({elem:c,handlers:o})}return c=this,l<t.length&&r.push({elem:c,handlers:t.slice(l)}),r},addProp:function(e,t){Object.defineProperty(v.Event.prototype,e,{enumerable:!0,configurable:!0,get:v.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[v.expando]?e:new v.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&S(this,"input"))return this.click(),!1},_default:function(e){return S(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},v.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_e:we,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:we,isPropagationStopped:we,isImmediatePropagationStopped:we,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},v.event.addProp),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,s=e.handleObj;return n&&(n===this||v.contains(this,n))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}})),v.fn.extend({on:function(e,t,i,n){return Ce(this,e,t,i,n)},one:function(e,t,i,n){return Ce(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,v(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=we),this.each((function(){v.event.remove(this,e,i,t)}))}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,$e=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^true\/(.*)/,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")&&v(">tbody",e)[0]||e}function Ee(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){var t=Se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function je(e,t){var i,n,s,o,a,r,l,c;if(1===t.nodeType){if(U.hasData(e)&&(o=U.access(e),a=U.set(t,o),c=o.events))for(s in delete a.handle,a.events={},c)for(i=0,n=c[s].length;i<n;i++)v.event.add(t,s,c[s][i]);Q.hasData(e)&&(r=Q.access(e),l=v.extend({},r),Q.set(t,l))}}function Oe(e,t){var i=t.nodeName.toLowerCase();"input"===i&&ae.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Ae(e,t,i,n){t=a.apply([],t);var s,o,r,l,c,d,h=0,u=e.length,p=u-1,g=t[0],y=v.isFunction(g);if(y||u>1&&"string"==typeof g&&!f.checkClone&&Te.test(g))return e.each((function(s){var o=e.eq(s);y&&(t[0]=g.call(this,s,o.html())),Ae(o,t,i,n)}));if(u&&(o=(s=me(t,e[0].ownerDocument,!1,e,n)).firstChild,1===s.childNodes.length&&(s=o),o||n)){for(l=(r=v.map(de(s,"script"),Ee)).length;h<u;h++)c=s,h!==p&&(c=v.clone(c,!0,!0),l&&v.merge(r,de(c,"script"))),i.call(e[h],c,h);if(l)for(d=r[r.length-1].ownerDocument,v.map(r,De),h=0;h<l;h++)c=r[h],le.test(c.type||"")&&!U.access(c,"globalEval")&&v.contains(d,c)&&(c.src?v._evalUrl&&v._evalUrl(c.src):m(c.textContent.replace(Me,""),d))}return e}function Le(e,t,i){for(var n,s=t?v.filter(t,e):e,o=0;null!=(n=s[o]);o++)i||1!==n.nodeType||v.cleanData(de(n)),n.parentNode&&(i&&v.contains(n.ownerDocument,n)&&he(de(n,"script")),n.parentNode.removeChild(n));return e}v.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,i){var n,s,o,a,r=e.cloneNode(!0),l=v.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||v.isXMLDoc(e)))for(a=de(r),n=0,s=(o=de(e)).length;n<s;n++)Oe(o[n],a[n]);if(t)if(i)for(o=o||de(e),a=a||de(r),n=0,s=o.length;n<s;n++)je(o[n],a[n]);else je(e,r);return(a=de(r,"script")).length>0&&he(a,!l&&de(e,"script")),r},cleanData:function(e){for(var t,i,n,s=v.event.special,o=0;void 0!==(i=e[o]);o++)if(W(i)){if(t=i[U.expando]){if(t.events)for(n in t.events)s[n]?v.event.remove(i,n):v.removeEvent(i,n,t.handle);i[U.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),v.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return q(this,(function(e){return void 0===e?v.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ae(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)}))},prepend:function(){return Ae(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ae(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ae(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(v.cleanData(de(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return v.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!$e.test(e)&&!ce[(re.exec(e)||["",""])[1].toLowerCase()]){e=v.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(v.cleanData(de(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ae(this,arguments,(function(t){var i=this.parentNode;v.inArray(this,e)<0&&(v.cleanData(de(this)),i&&i.replaceChild(t,this))}),e)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){v.fn[e]=function(e){for(var i,n=[],s=v(e),o=s.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),v(s[a])[t](i),r.apply(n,i.get());return this.pushStack(n)}}));var Ie=/^margin/,He=new RegExp("^("+K+")(?!px)[a-z%]+$","i"),Re=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};function Fe(e,t,i){var n,s,o,a,r=e.style;return(i=i||Re(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||v.contains(e.ownerDocument,e)||(a=v.style(e,t)),!f.pixelMarginRight()&&He.test(a)&&Ie.test(t)&&(n=r.width,s=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=i.width,r.width=n,r.minWidth=s,r.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",l.innerHTML="",ge.appendChild(r);var t=e.getComputedStyle(l);i="1%"!==t.top,a="2px"===t.marginLeft,s="4px"===t.width,l.style.marginRight="50%",o="4px"===t.marginRight,ge.removeChild(r),l=null}}var i,s,o,a,r=n.createElement("div"),l=n.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===l.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(l),v.extend(f,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),s},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),a}}))}();var Ne=/^(none|table(?!-c[ea]).+)/,Be=/^--/,qe={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","Moz","ms"],Ue=n.createElement("div").style;function Qe(e){var t=v.cssProps[e];return t||(t=v.cssProps[e]=function(e){if(e in Ue)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Ve.length;i--;)if((e=Ve[i]+t)in Ue)return e}(e)||e),t}function Ye(e,t,i){var n=Z.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Xe(e,t,i,n,s){var o,a=0;for(o=i===(n?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===i&&(a+=v.css(e,i+J[o],!0,s)),n?("content"===i&&(a-=v.css(e,"padding"+J[o],!0,s)),"margin"!==i&&(a-=v.css(e,"border"+J[o]+"Width",!0,s))):(a+=v.css(e,"padding"+J[o],!0,s),"padding"!==i&&(a+=v.css(e,"border"+J[o]+"Width",!0,s)));return a}function Ge(e,t,i){var n,s=Re(e),o=Fe(e,t,s),a="border-box"===v.css(e,"boxSizing",!1,s);return He.test(o)?o:(n=a&&(f.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+Xe(e,t,i||(a?"border":"content"),n,s)+"px")}function Ke(e,t,i,n,s){return new Ke.prototype.init(e,t,i,n,s)}v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Fe(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,a,r=v.camelCase(t),l=Be.test(t),c=e.style;if(l||(t=Qe(r)),a=v.cssHooks[t]||v.cssHooks[r],void 0===i)return a&&"get"in a&&void 0!==(s=a.get(e,!1,n))?s:c[t];"string"===(o=typeof i)&&(s=Z.exec(i))&&s[1]&&(i=ie(e,t,s),o="number"),null!=i&&i==i&&("number"===o&&(i+=s&&s[3]||(v.cssNumber[r]?"":"px")),f.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var s,o,a,r=v.camelCase(t);return Be.test(t)||(t=Qe(r)),(a=v.cssHooks[t]||v.cssHooks[r])&&"get"in a&&(s=a.get(e,!0,i)),void 0===s&&(s=Fe(e,t,n)),"normal"===s&&t in We&&(s=We[t]),""===i||i?(o=parseFloat(s),!0===i||isFinite(o)?o||0:s):s}}),v.each(["height","width"],(function(e,t){v.cssHooks[t]={get:function(e,i,n){if(i)return!Ne.test(v.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ge(e,t,n):te(e,qe,(function(){return Ge(e,t,n)}))},set:function(e,i,n){var s,o=n&&Re(e),a=n&&Xe(e,t,n,"border-box"===v.css(e,"boxSizing",!1,o),o);return a&&(s=Z.exec(i))&&"px"!==(s[3]||"px")&&(e.style[t]=i,i=v.css(e,t)),Ye(0,i,a)}}})),v.cssHooks.marginLeft=ze(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-te(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),v.each({margin:"",padding:"",border:"Width"},(function(e,t){v.cssHooks[e+t]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];n<4;n++)s[e+J[n]+t]=o[n]||o[n-2]||o[0];return s}},Ie.test(e)||(v.cssHooks[e+t].set=Ye)})),v.fn.extend({css:function(e,t){return q(this,(function(e,t,i){var n,s,o={},a=0;if(Array.isArray(t)){for(n=Re(e),s=t.length;a<s;a++)o[t[a]]=v.css(e,t[a],!1,n);return o}return void 0!==i?v.style(e,t,i):v.css(e,t)}),e,t,arguments.length>1)}}),v.Tween=Ke,Ke.prototype={constructor:Ke,init:function(e,t,i,n,s,o){this.elem=e,this.prop=i,this.easing=s||v.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(v.cssNumber[i]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,i=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Ke.propHooks._default.set(this),this}},Ke.prototype.init.prototype=Ke.prototype,Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=v.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[v.cssProps[e.prop]]&&!v.cssHooks[e.prop]?e.elem[e.prop]=e.now:v.style(e.elem,e.prop,e.now+e.unit)}}},Ke.propHooks.scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},v.fx=Ke.prototype.init,v.fx.step={};var Ze,Je,et=/^(?:toggle|show|hide)$/,tt=/queueHooks$/;function it(){Je&&(!1===n.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,v.fx.interval),v.fx.tick())}function nt(){return e.setTimeout((function(){Ze=void 0})),Ze=v.now()}function st(e,t){var i,n=0,s={height:e};for(t=t?1:0;n<4;n+=2-t)s["margin"+(i=J[n])]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function ot(e,t,i){for(var n,s=(at.tweeners[t]||[]).concat(at.tweeners["*"]),o=0,a=s.length;o<a;o++)if(n=s[o].call(i,t,e))return n}function at(e,t,i){var n,s,o=0,a=at.prefilters.length,r=v.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var t=Ze||nt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(n);return r.notifyWith(e,[c,n,i]),n<1&&a?i:(a||r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},i),originalProperties:t,originalOptions:i,startTime:Ze||nt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=v.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)c.tweens[i].run(1);return t?(r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c,t])):r.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var i,n,s,o,a;for(i in e)if(s=t[n=v.camelCase(i)],o=e[i],Array.isArray(o)&&(s=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=v.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=s);else t[n]=s}(d,c.opts.specialEasing);o<a;o++)if(n=at.prefilters[o].call(c,e,d,c.opts))return v.isFunction(n.stop)&&(v._queueHooks(c.elem,c.opts.queue).stop=v.proxy(n.stop,n)),n;return v.map(d,ot,c),v.isFunction(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),v.fx.timer(v.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}v.Animation=v.extend(at,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ie(i.elem,e,Z.exec(t),i),i}]},tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.match(I);for(var i,n=0,s=e.length;n<s;n++)i=e[n],at.tweeners[i]=at.tweeners[i]||[],at.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,s,o,a,r,l,c,d,h="width"in t||"height"in t,u=this,p={},f=e.style,m=e.nodeType&&ee(e),g=U.get(e,"fxshow");for(n in i.queue||(null==(a=v._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,r=a.empty.fire,a.empty.fire=function(){a.unqueued||r()}),a.unqueued++,u.always((function(){u.always((function(){a.unqueued--,v.queue(e,"fx").length||a.empty.fire()}))}))),t)if(s=t[n],et.test(s)){if(delete t[n],o=o||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||v.style(e,n)}if((l=!v.isEmptyObject(t))||!v.isEmptyObject(p))for(n in h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=U.get(e,"display")),"none"===(d=v.css(e,"display"))&&(c?d=c:(oe([e],!0),c=e.style.display||c,d=v.css(e,"display"),oe([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===v.css(e,"float")&&(l||(u.done((function(){f.display=c})),null==c&&(d=f.display,c="none"===d?"":d)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",u.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=U.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&oe([e],!0),u.done((function(){for(n in m||oe([e]),U.remove(e,"fxshow"),p)v.style(e,n,p[n])}))),l=ot(m?g[n]:0,n,u),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?at.prefilters.unshift(e):at.prefilters.push(e)}}),v.speed=function(e,t,i){var n=e&&"object"==typeof e?v.extend({},e):{complete:i||!i&&t||v.isFunction(e)&&e,duration:e,easing:i&&t||t&&!v.isFunction(t)&&t};return v.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in v.fx.speeds?n.duration=v.fx.speeds[n.duration]:n.duration=v.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v.isFunction(n.old)&&n.old.call(this),n.queue&&v.dequeue(this,n.queue)},n},v.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=v.isEmptyObject(e),o=v.speed(t,i,n),a=function(){var t=at(this,v.extend({},e),o);(s||U.get(this,"finish"))&&t.stop(!0)};return a.finish=a,s||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,s=null!=e&&e+"queueHooks",o=v.timers,a=U.get(this);if(s)a[s]&&a[s].stop&&n(a[s]);else for(s in a)a[s]&&a[s].stop&&tt.test(s)&&n(a[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(i),t=!1,o.splice(s,1));!t&&i||v.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=U.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],o=v.timers,a=n?n.length:0;for(i.finish=!0,v.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),v.each(["toggle","show","hide"],(function(e,t){var i=v.fn[t];v.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(t,!0),e,n,s)}})),v.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){v.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),v.timers=[],v.fx.tick=function(){var e,t=0,i=v.timers;for(Ze=v.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||v.fx.stop(),Ze=void 0},v.fx.timer=function(e){v.timers.push(e),v.fx.start()},v.fx.interval=13,v.fx.start=function(){Je||(Je=!0,it())},v.fx.stop=function(){Je=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(t,i){return t=v.fx&&v.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,n){var s=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(s)}}))},function(){var e=n.createElement("input"),t=n.createElement("select").appendChild(n.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=n.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var rt,lt=v.expr.attrHandle;v.fn.extend({attr:function(e,t){return q(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){v.removeAttr(this,e)}))}}),v.extend({attr:function(e,t,i){var n,s,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?v.prop(e,t,i):(1===o&&v.isXMLDoc(e)||(s=v.attrHooks[t.toLowerCase()]||(v.expr.match.bool.test(t)?rt:void 0)),void 0!==i?null===i?void v.removeAttr(e,t):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=v.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&S(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,s=t&&t.match(I);if(s&&1===e.nodeType)for(;i=s[n++];)e.removeAttribute(i)}}),rt={set:function(e,t,i){return!1===t?v.removeAttr(e,i):e.setAttribute(i,i),i}},v.each(v.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=lt[t]||v.find.attr;lt[t]=function(e,t,n){var s,o,a=t.toLowerCase();return n||(o=lt[a],lt[a]=s,s=null!=i(e,t,n)?a:null,lt[a]=o),s}}));var ct=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(I)||[]).join(" ")}function ut(e){return e.getAttribute&&e.getAttribute("class")||""}v.fn.extend({prop:function(e,t){return q(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[v.propFix[e]||e]}))}}),v.extend({prop:function(e,t,i){var n,s,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&v.isXMLDoc(e)||(t=v.propFix[t]||t,s=v.propHooks[t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=v.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(v.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){v.propFix[this.toLowerCase()]=this})),v.fn.extend({addClass:function(e){var t,i,n,s,o,a,r,l=0;if(v.isFunction(e))return this.each((function(t){v(this).addClass(e.call(this,t,ut(this)))}));if("string"==typeof e&&e)for(t=e.match(I)||[];i=this[l++];)if(s=ut(i),n=1===i.nodeType&&" "+ht(s)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s!==(r=ht(n))&&i.setAttribute("class",r)}return this},removeClass:function(e){var t,i,n,s,o,a,r,l=0;if(v.isFunction(e))return this.each((function(t){v(this).removeClass(e.call(this,t,ut(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(I)||[];i=this[l++];)if(s=ut(i),n=1===i.nodeType&&" "+ht(s)+" "){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");s!==(r=ht(n))&&i.setAttribute("class",r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):v.isFunction(e)?this.each((function(i){v(this).toggleClass(e.call(this,i,ut(this),t),t)})):this.each((function(){var t,n,s,o;if("string"===i)for(n=0,s=v(this),o=e.match(I)||[];t=o[n++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==i||((t=ut(this))&&U.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":U.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+ht(ut(i))+" ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g;v.fn.extend({val:function(e){var t,i,n,s=this[0];return arguments.length?(n=v.isFunction(e),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?e.call(this,i,v(this).val()):e)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=v.map(s,(function(e){return null==e?"":e+""}))),(t=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))}))):s?(t=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(pt,""):null==i?"":i:void 0}}),v.extend({valHooks:{option:{get:function(e){var t=v.find.attr(e,"value");return null!=t?t:ht(v.text(e))}},select:{get:function(e){var t,i,n,s=e.options,o=e.selectedIndex,a="select-one"===e.type,r=a?null:[],l=a?o+1:s.length;for(n=o<0?l:a?o:0;n<l;n++)if(((i=s[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!S(i.parentNode,"optgroup"))){if(t=v(i).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var i,n,s=e.options,o=v.makeArray(t),a=s.length;a--;)((n=s[a]).selected=v.inArray(v.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),v.each(["radio","checkbox"],(function(){v.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=v.inArray(v(e).val(),t)>-1}},f.checkOn||(v.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var ft=/^(?:focusinfocus|focusoutblur)$/;v.extend(v.event,{trigger:function(t,i,s,o){var a,r,l,c,d,u,p,f=[s||n],m=h.call(t,"type")?t.type:t,g=h.call(t,"namespace")?t.namespace.split("."):[];if(r=l=s=s||n,3!==s.nodeType&&8!==s.nodeType&&!ft.test(m+v.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),d=m.indexOf(":")<0&&"on"+m,(t=t[v.expando]?t:new v.Event(m,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),i=null==i?[t]:v.makeArray(i,[t]),p=v.event.special[m]||{},o||!p.trigger||!1!==p.trigger.apply(s,i))){if(!o&&!p.noBubble&&!v.isWindow(s)){for(c=p.delegateType||m,ft.test(c+m)||(r=r.parentNode);r;r=r.parentNode)f.push(r),l=r;l===(s.ownerDocument||n)&&f.push(l.defaultView||l.parentWindow||e)}for(a=0;(r=f[a++])&&!t.isPropagationStopped();)t.type=a>1?c:p.bindType||m,(u=(U.get(r,"events")||{})[t.type]&&U.get(r,"handle"))&&u.apply(r,i),(u=d&&r[d])&&u.apply&&W(r)&&(t.result=u.apply(r,i),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(f.pop(),i)||!W(s)||d&&v.isFunction(s[m])&&!v.isWindow(s)&&((l=s[d])&&(s[d]=null),v.event.triggered=m,s[m](),v.event.triggered=void 0,l&&(s[d]=l)),t.result}},simulate:function(e,t,i){var n=v.extend(new v.Event,i,{type:e,isSimulated:!0});v.event.trigger(n,null,t)}}),v.fn.extend({trigger:function(e,t){return this.each((function(){v.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return v.event.trigger(e,t,i,!0)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){v.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),v.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),f.focusin="onfocusin"in e,f.focusin||v.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){v.event.simulate(t,e.target,v.event.fix(e))};v.event.special[t]={setup:function(){var n=this.ownerDocument||this,s=U.access(n,t);s||n.addEventListener(e,i,!0),U.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=U.access(n,t)-1;s?U.access(n,t,s):(n.removeEventListener(e,i,!0),U.remove(n,t))}}}));var mt=e.location,gt=v.now(),vt=/\?/;v.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+t),i};var yt=/\[\]$/,bt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,wt=/^(?:input|select|textarea|keygen)/i;function xt(e,t,i,n){var s;if(Array.isArray(t))v.each(t,(function(t,s){i||yt.test(e)?n(e,s):xt(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,i,n)}));else if(i||"object"!==v.type(t))n(e,t);else for(s in t)xt(e+"["+s+"]",t[s],i,n)}v.param=function(e,t){var i,n=[],s=function(e,t){var i=v.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,(function(){s(this.name,this.value)}));else for(i in e)xt(i,e[i],t,s);return n.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=v.prop(this,"elements");return e?v.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!v(this).is(":disabled")&&wt.test(this.nodeName)&&!_t.test(e)&&(this.checked||!ae.test(e))})).map((function(e,t){var i=v(this).val();return null==i?null:Array.isArray(i)?v.map(i,(function(e){return{name:t.name,value:e.replace(bt,"\r\n")}})):{name:t.name,value:i.replace(bt,"\r\n")}})).get()}});var Ct=/%20/g,kt=/#.*$/,$t=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:GET|HEAD)$/,Mt=/^\/\//,Pt={},Et={},Dt="*/".concat("*"),jt=n.createElement("a");function Ot(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,o=t.toLowerCase().match(I)||[];if(v.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function At(e,t,i,n){var s={},o=e===Et;function a(r){var l;return s[r]=!0,v.each(e[r]||[],(function(e,r){var c=r(t,i,n);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!s["*"]&&a("*")}function Lt(e,t){var i,n,s=v.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((s[i]?e:n||(n={}))[i]=t[i]);return n&&v.extend(!0,e,n),e}jt.href=mt.href,v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,v.ajaxSettings),t):Lt(v.ajaxSettings,e)},ajaxPrefilter:Ot(Pt),ajaxTransport:Ot(Et),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var s,o,a,r,l,c,d,h,u,p,f=v.ajaxSetup({},i),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?v(m):v.event,y=v.Deferred(),b=v.Callbacks("once memory"),_=f.statusCode||{},w={},x={},C="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(d){if(!r)for(r={};t=Tt.exec(a);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return d?a:null},setRequestHeader:function(e,t){return null==d&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==d&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)k.always(e[k.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||C;return s&&s.abort(t),$(0,t),this}};if(y.promise(k),f.url=((t||f.url||mt.href)+"").replace(Mt,mt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(I)||[""],null==f.crossDomain){c=n.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=jt.protocol+"//"+jt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=v.param(f.data,f.traditional)),At(Pt,f,i,k),d)return k;for(u in(h=v.event&&f.global)&&0==v.active++&&v.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!St.test(f.type),o=f.url.replace(kt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ct,"+")):(p=f.url.slice(o.length),f.data&&(o+=(vt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace($t,"$1"),p=(vt.test(o)?"&":"?")+"_="+gt+++p),f.url=o+p),f.ifModified&&(v.lastModified[o]&&k.setRequestHeader("If-Modified-Since",v.lastModified[o]),v.etag[o]&&k.setRequestHeader("If-None-Match",v.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Dt+"; q=0.01":""):f.accepts["*"]),f.headers)k.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(!1===f.beforeSend.call(m,k,f)||d))return k.abort();if(C="abort",b.add(f.complete),k.done(f.success),k.fail(f.error),s=At(Et,f,i,k)){if(k.readyState=1,h&&g.trigger("ajaxSend",[k,f]),d)return k;f.async&&f.timeout>0&&(l=e.setTimeout((function(){k.abort("timeout")}),f.timeout));try{d=!1,s.send(w,$)}catch(e){if(d)throw e;$(-1,e)}}else $(-1,"No Transport");function $(t,i,n,r){var c,u,p,w,x,C=i;d||(d=!0,l&&e.clearTimeout(l),s=void 0,a=r||"",k.readyState=t>0?4:0,c=t>=200&&t<300||304===t,n&&(w=function(e,t,i){for(var n,s,o,a,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in r)if(r[s]&&r[s].test(n)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){o=s;break}a||(a=s)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(f,k,n)),w=function(e,t,i,n){var s,o,a,r,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(s in c)if((r=s.split(" "))[1]===o&&(a=c[l+" "+r[0]]||c["* "+r[0]])){!0===a?a=c[s]:!0!==c[s]&&(o=r[0],d.unshift(r[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,w,k,c),c?(f.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(v.lastModified[o]=x),(x=k.getResponseHeader("etag"))&&(v.etag[o]=x)),204===t||"HEAD"===f.type?C="nocontent":304===t?C="notmodified":(C=w.state,u=w.data,c=!(p=w.error))):(p=C,!t&&C||(C="error",t<0&&(t=0))),k.status=t,k.statusText=(i||C)+"",c?y.resolveWith(m,[u,C,k]):y.rejectWith(m,[k,C,p]),k.statusCode(_),_=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[k,f,c?u:p]),b.fireWith(m,[k,C]),h&&(g.trigger("ajaxComplete",[k,f]),--v.active||v.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,i){return v.get(e,t,i,"json")},getScript:function(e,t){return v.get(e,void 0,t,"script")}}),v.each(["get","post"],(function(e,t){v[t]=function(e,i,n,s){return v.isFunction(i)&&(s=s||n,n=i,i=void 0),v.ajax(v.extend({url:e,type:t,dataType:s,data:i,success:n},v.isPlainObject(e)&&e))}})),v._evalUrl=function(e){return v.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},v.fn.extend({wrapAll:function(e){var t;return this[0]&&(v.isFunction(e)&&(e=e.call(this[0])),t=v(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v.isFunction(e)?this.each((function(t){v(this).wrapInner(e.call(this,t))})):this.each((function(){var t=v(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v.isFunction(e);return this.each((function(i){v(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){v(this).replaceWith(this.childNodes)})),this}}),v.expr.pseudos.hidden=function(e){return!v.expr.pseudos.visible(e)},v.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var It={0:200,1223:204},Ht=v.ajaxSettings.xhr();f.cors=!!Ht&&"withCredentials"in Ht,f.ajax=Ht=!!Ht,v.ajaxTransport((function(t){var i,n;if(f.cors||Ht&&!t.crossDomain)return{send:function(s,o){var a,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)r[a]=t.xhrFields[a];for(a in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)r.setRequestHeader(a,s[a]);i=function(e){return function(){i&&(i=n=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?o(0,"error"):o(r.status,r.statusText):o(It[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),n=r.onerror=i("error"),void 0!==r.onabort?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout((function(){i&&n()}))},i=i("abort");try{r.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}})),v.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),v.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain)return{send:function(s,o){t=v("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),n.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Rt,Ft=[],zt=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||v.expando+"_"+gt++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",(function(t,i,n){var s,o,a,r=!1!==t.jsonp&&(zt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=v.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(zt,"$1"+s):!1!==t.jsonp&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return a||v.error(s+" was not called"),a[0]},t.dataTypes[0]="json",o=e[s],e[s]=function(){a=arguments},n.always((function(){void 0===o?v(e).removeProp(s):e[s]=o,t[s]&&(t.jsonpCallback=i.jsonpCallback,Ft.push(s)),a&&v.isFunction(o)&&o(a[0]),a=o=void 0})),"script"})),f.createHTMLDocument=((Rt=n.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Rt.childNodes.length),v.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(f.createHTMLDocument?((s=(t=n.implementation.createHTMLDocument("")).createElement("base")).href=n.location.href,t.head.appendChild(s)):t=n),a=!i&&[],(o=M.exec(e))?[t.createElement(o[1])]:(o=me([e],t,a),a&&a.length&&v(a).remove(),v.merge([],o.childNodes)));var s,o,a},v.fn.load=function(e,t,i){var n,s,o,a=this,r=e.indexOf(" ");return r>-1&&(n=ht(e.slice(r)),e=e.slice(0,r)),v.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),a.length>0&&v.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(n?v("<div>").append(v.parseHTML(e)).find(n):e)})).always(i&&function(e,t){a.each((function(){i.apply(this,o||[e.responseText,t,e])}))}),this},v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){v.fn[t]=function(e){return this.on(t,e)}})),v.expr.pseudos.animated=function(e){return v.grep(v.timers,(function(t){return e===t.elem})).length},v.offset={setOffset:function(e,t,i){var n,s,o,a,r,l,c=v.css(e,"position"),d=v(e),h={};"static"===c&&(e.style.position="relative"),r=d.offset(),o=v.css(e,"top"),l=v.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(n=d.position()).top,s=n.left):(a=parseFloat(o)||0,s=parseFloat(l)||0),v.isFunction(t)&&(t=t.call(e,i,v.extend({},r))),null!=t.top&&(h.top=t.top-r.top+a),null!=t.left&&(h.left=t.left-r.left+s),"using"in t?t.using.call(e,h):d.css(h)}},v.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){v.offset.setOffset(this,e,t)}));var t,i,n,s,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect(),i=(t=o.ownerDocument).documentElement,s=t.defaultView,{top:n.top+s.pageYOffset-i.clientTop,left:n.left+s.pageXOffset-i.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===v.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),S(e[0],"html")||(n=e.offset()),n={top:n.top+v.css(e[0],"borderTopWidth",!0),left:n.left+v.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-v.css(i,"marginTop",!0),left:t.left-n.left-v.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===v.css(e,"position");)e=e.offsetParent;return e||ge}))}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;v.fn[e]=function(n){return q(this,(function(e,n,s){var o;if(v.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===s)return o?o[t]:e[n];o?o.scrollTo(i?o.pageXOffset:s,i?s:o.pageYOffset):e[n]=s}),e,n,arguments.length)}})),v.each(["top","left"],(function(e,t){v.cssHooks[t]=ze(f.pixelPosition,(function(e,i){if(i)return i=Fe(e,t),He.test(i)?v(e).position()[t]+"px":i}))})),v.each({Height:"height",Width:"width"},(function(e,t){v.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){v.fn[n]=function(s,o){var a=arguments.length&&(i||"boolean"!=typeof s),r=i||(!0===s||!0===o?"margin":"border");return q(this,(function(t,i,s){var o;return v.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===s?v.css(t,i,r):v.style(t,i,s,r)}),t,a?s:void 0,a)}}))})),v.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),v.holdReady=function(e){e?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=S,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return v}));var Nt=e.jQuery,Bt=e.$;return v.noConflict=function(t){return e.$===v&&(e.$=Bt),t&&e.jQuery===v&&(e.jQuery=Nt),v},t||(e.jQuery=e.$=v),v})),function(e){"function"==typeof define&&define.amd?define(["jquery"],window,e):"object"==typeof module&&module.exports?module.exports=e(require("jquery"),window):e(jQuery,window)}((function(e,t){"use strict";e.migrateVersion="3.0.1",t.console&&t.console.log&&(e&&!/^[12]\./.test(e.fn.jquery)||t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion));var i={};function n(n){var s=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),s&&s.warn&&!e.migrateMute&&(s.warn("JQMIGRATE: "+n),e.migrateTrace&&s.trace&&s.trace()))}function s(e,t,i,s){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return n(s),i},set:function(e){n(s),i=e}})}function o(e,t,i,s){e[t]=function(){return n(s),i.apply(this,arguments)}}e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===t.document.compatMode&&n("jQuery is not compatible with Quirks Mode");var a,r=e.fn.init,l=e.isNumeric,c=e.find,d=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,h=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;for(a in e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(n("jQuery( '#' ) is not a valid selector"),t[0]=[]),r.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var i=Array.prototype.slice.call(arguments);if("string"==typeof e&&d.test(e))try{t.document.querySelector(e)}catch(s){e=e.replace(h,(function(e,t,i,n){return"["+t+i+'"'+n+'"]'}));try{t.document.querySelector(e),n("Attribute selector with '#' must be quoted: "+i[0]),i[0]=e}catch(e){n("Attribute selector with '#' was not fixed: "+i[0])}}return c.apply(this,i)},c)Object.prototype.hasOwnProperty.call(c,a)&&(e.find[a]=c[a]);e.fn.size=function(){return n("jQuery.fn.size() is deprecated and removed; use the .length property"),this.length},e.parseJSON=function(){return n("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},e.isNumeric=function(t){var i,s,o=l(t),a=(s=(i=t)&&i.toString(),!e.isArray(i)&&s-parseFloat(s)+1>=0);return o!==a&&n("jQuery.isNumeric() should not be called on constructed objects"),a},o(e,"holdReady",e.holdReady,"jQuery.holdReady is deprecated"),o(e,"unique",e.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),s(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),s(e.expr,":",e.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos");var u=e.ajax;e.ajax=function(){var e=u.apply(this,arguments);return e.promise&&(o(e,"success",e.done,"jQXHR.success is deprecated and removed"),o(e,"error",e.fail,"jQXHR.error is deprecated and removed"),o(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e};var p=e.fn.removeAttr,f=e.fn.toggleClass,m=/\S+/g;e.fn.removeAttr=function(t){var i=this;return e.each(t.match(m),(function(t,s){e.expr.match.bool.test(s)&&(n("jQuery.fn.removeAttr no longer sets boolean properties: "+s),i.prop(s,!1))})),p.apply(this,arguments)},e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?f.apply(this,arguments):(n("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each((function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&e.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":e.data(this,"__className__")||"")})))};var g=!1;e.swap&&e.each(["height","width","reliableMarginRight"],(function(t,i){var n=e.cssHooks[i]&&e.cssHooks[i].get;n&&(e.cssHooks[i].get=function(){var e;return g=!0,e=n.apply(this,arguments),g=!1,e})})),e.swap=function(e,t,i,s){var o,a,r={};for(a in g||n("jQuery.swap() is undocumented and deprecated"),t)r[a]=e.style[a],e.style[a]=t[a];for(a in o=i.apply(e,s||[]),t)e.style[a]=r[a];return o};var v=e.data;e.data=function(t,i,s){var o;if(i&&"object"==typeof i&&2===arguments.length){o=e.hasData(t)&&v.call(this,t);var a={};for(var r in i)r!==e.camelCase(r)?(n("jQuery.data() always sets/gets camelCased names: "+r),o[r]=i[r]):a[r]=i[r];return v.call(this,t,a),i}return i&&"string"==typeof i&&i!==e.camelCase(i)&&(o=e.hasData(t)&&v.call(this,t))&&i in o?(n("jQuery.data() always sets/gets camelCased names: "+i),arguments.length>2&&(o[i]=s),o[i]):v.apply(this,arguments)};var y=e.Tween.prototype.run,b=function(e){return e};e.Tween.prototype.run=function(){e.easing[this.easing].length>1&&(n("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),e.easing[this.easing]=b),y.apply(this,arguments)},e.fx.interval=e.fx.interval||13,t.requestAnimationFrame&&s(e.fx,"interval",e.fx.interval,"jQuery.fx.interval is deprecated");var _=e.fn.load,w=e.event.add,x=e.event.fix;e.event.props=[],e.event.fixHooks={},s(e.event.props,"concat",e.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),e.event.fix=function(t){var i,s=t.type,o=this.fixHooks[s],a=e.event.props;if(a.length)for(n("jQuery.event.props are deprecated and removed: "+a.join());a.length;)e.event.addProp(a.pop());if(o&&!o._migrated_&&(o._migrated_=!0,n("jQuery.event.fixHooks are deprecated and removed: "+s),(a=o.props)&&a.length))for(;a.length;)e.event.addProp(a.pop());return i=x.call(this,t),o&&o.filter?o.filter(i,t):i},e.event.add=function(e,i){return e===t&&"load"===i&&"complete"===t.document.readyState&&n("jQuery(window).on('load'...) called after load event occurred"),w.apply(this,arguments)},e.each(["load","unload","error"],(function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?_.apply(this,e):(n("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}})),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,i){e.fn[i]=function(e,t){return n("jQuery.fn."+i+"() event shorthand is deprecated"),arguments.length>0?this.on(i,null,e,t):this.trigger(i)}})),e((function(){e(t.document).triggerHandler("ready")})),e.event.special.ready={setup:function(){this===t.document&&n("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,i){return n("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return n("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,s){return n("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,s)},undelegate:function(e,t,i){return n("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return n("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});var C=e.fn.offset;e.fn.offset=function(){var i,s=this[0],o={top:0,left:0};return s&&s.nodeType?(i=(s.ownerDocument||t.document).documentElement,e.contains(i,s)?C.apply(this,arguments):(n("jQuery.fn.offset() requires an element connected to a document"),o)):(n("jQuery.fn.offset() requires a valid DOM element"),o)};var k=e.param;e.param=function(t,i){var s=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===i&&s&&(n("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=s),k.call(this,t,i)};var $=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return n("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),$.apply(this,arguments)};var T=e.Deferred,S=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]];return e.Deferred=function(t){var i=T(),s=i.promise();return i.pipe=s.pipe=function(){var t=arguments;return n("deferred.pipe() is deprecated"),e.Deferred((function(n){e.each(S,(function(o,a){var r=e.isFunction(t[o])&&t[o];i[a[1]]((function(){var t=r&&r.apply(this,arguments);t&&e.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===s?n.promise():this,r?[t]:arguments)}))})),t=null})).promise()},t&&t.call(i,i),i},e.Deferred.exceptionHook=T.exceptionHook,e})),function(e,t,i){var n,s,o,a,r,l,c,d;a="datepicker",r=!1,l={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},c={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},(o=d=function(e,s){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},l,s,this.$el.data()),n==i&&(n=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()}).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){r||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new t.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new t.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new t.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),t(e).on("resize.adp",this._onResize.bind(this)),t("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=t.fn.datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru)),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,t.fn.datepicker.language[e])):this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var i=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(i("aa"))||this.loc.timeFormat.match(i("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){r=!0,n.append('<div class="datepickers-container" id="datepickers-container"></div>'),s=t("#datepickers-container")},_buildBaseHtml:function(){var e,i=t('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?i.insertAfter(this.$el):s:i.appendTo(this.$el),this.$datepicker=t('<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo(e),this.$content=t(".datepicker--content",this.$datepicker),this.$nav=t(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,i=o.getParsedDate(t[0]),n=this,s=new Date(i.year,i.month,i.date,i.hours,i.minutes);e=t.map((function(e){return n.formatDate(n.loc.dateFormat,e)})).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(s=t.map((function(e){var t=o.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)}))),this._prevOnSelectValue=e,this.opts.onSelect(e,s,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i,n=e,s=this._getWordBoundaryRegExp,a=this.loc,r=o.getLeadingZeroNum,l=o.getDecade(t),c=o.getParsedDate(t),d=c.fullHours,h=c.hours,u=e.match(s("aa"))||e.match(s("AA")),p="am",f=this._replacer;switch(this.opts.timepicker&&this.timepicker&&u&&(d=r((i=this.timepicker._getValidHoursFromDate(t,u)).hours),h=i.hours,p=i.dayPeriod),!0){case/@/.test(n):n=n.replace(/@/,t.getTime());case/aa/.test(n):n=f(n,s("aa"),p);case/AA/.test(n):n=f(n,s("AA"),p.toUpperCase());case/dd/.test(n):n=f(n,s("dd"),c.fullDate);case/d/.test(n):n=f(n,s("d"),c.date);case/DD/.test(n):n=f(n,s("DD"),a.days[c.day]);case/D/.test(n):n=f(n,s("D"),a.daysShort[c.day]);case/mm/.test(n):n=f(n,s("mm"),c.fullMonth);case/m/.test(n):n=f(n,s("m"),c.month+1);case/MM/.test(n):n=f(n,s("MM"),this.loc.months[c.month]);case/M/.test(n):n=f(n,s("M"),a.monthsShort[c.month]);case/ii/.test(n):n=f(n,s("ii"),c.fullMinutes);case/i/.test(n):n=f(n,s("i"),c.minutes);case/hh/.test(n):n=f(n,s("hh"),d);case/h/.test(n):n=f(n,s("h"),h);case/yyyy/.test(n):n=f(n,s("yyyy"),c.year);case/yyyy1/.test(n):n=f(n,s("yyyy1"),l[0]);case/yyyy2/.test(n):n=f(n,s("yyyy2"),l[1]);case/yy/.test(n):n=f(n,s("yy"),c.year.toString().slice(-2))}return n},_replacer:function(e,t,i){return e.replace(t,(function(e,t,n,s){return t+i+s}))},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},selectDate:function(e){var t=this,i=t.opts,n=t.parsedDate,s=t.selectedDates.length,a="";if(Array.isArray(e))e.forEach((function(e){t.selectDate(e)}));else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=n.month&&i.moveToOtherMonthsOnSelect&&(a=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&i.moveToOtherYearsOnSelect&&(a=new Date(e.getFullYear(),0,1)),a&&(t.silent=!0,t.date=a,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(s===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==s?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==s?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,o.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&!this.timepickerIsActive&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,i=this;if(e instanceof Date)return t.some((function(n,s){if(o.isSame(n,e))return t.splice(s,1),i.selectedDates.length?i.lastSelectedDate=i.selectedDates[i.selectedDates.length-1]:(i.minRange="",i.maxRange="",i.lastSelectedDate=""),i.views[i.currentView]._render(),i._setInputValue(),i.opts.onSelect&&i._triggerOnChange(),!0}))},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,i){var n=arguments.length,s=this.lastSelectedDate;return 2==n?this.opts[e]=i:1==n&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(s&&this.timepicker._handleDate(s),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),s&&(s.setHours(this.timepicker.hours),s.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){var i=!1;return this.selectedDates.some((function(n){if(o.isSame(n,e,t))return i=n,!0})),i},_setInputValue:function(){var e,t=this,i=t.opts,n=t.loc.dateFormat,s=i.altFieldDateFormat,o=t.selectedDates.map((function(e){return t.formatDate(n,e)}));i.altField&&t.$altField.length&&(e=(e=this.selectedDates.map((function(e){return t.formatDate(s,e)}))).join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var i=e.getTime(),n=o.getParsedDate(e),s=o.getParsedDate(this.minDate),a=o.getParsedDate(this.maxDate),r=new Date(n.year,n.month,s.date).getTime(),l=new Date(n.year,n.month,a.date).getTime(),c={day:i>=this.minTime&&i<=this.maxTime,month:r>=this.minTime&&l<=this.maxTime,year:n.year>=s.year&&n.year<=a.year};return t?c[t]:c.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,n=e.data("year")||t.year,s=e.data("month")==i?t.month:e.data("month"),o=e.data("date")||1;return new Date(n,s,o)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],i="datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(i+=" active"),this.$datepicker.removeAttr("class").addClass(i)},setPosition:function(e){e=e||this.opts.position;var t,i,n=this._getDimensions(this.$el),s=this._getDimensions(this.$datepicker),o=e.split(" "),a=this.opts.offset,r=o[0],l=o[1];switch(r){case"top":t=n.top-s.height-a;break;case"right":i=n.left+n.width+a;break;case"bottom":t=n.top+n.height+a;break;case"left":i=n.left-s.width-a}switch(l){case"top":t=n.top;break;case"right":i=n.left+n.width-s.width;break;case"bottom":t=n.top+n.height-s.height;break;case"left":i=n.left;break;case"center":/left|right/.test(r)?t=n.top+n.height/2-s.height/2:i=n.left+n.width/2-s.width/2}this.$datepicker.css({left:i,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,n,s=o.getParsedDate(this._getFocusedDate()),a=this.opts,r=!1,l=!1,c=!1,d=s.year,h=s.month,u=s.date;switch(e){case"ctrlRight":case"ctrlUp":h+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":h-=1,r=!0;break;case"shiftRight":case"shiftUp":l=!0,d+=1;break;case"shiftLeft":case"shiftDown":l=!0,d-=1;break;case"altRight":case"altUp":c=!0,d+=10;break;case"altLeft":case"altDown":c=!0,d-=10;break;case"ctrlShiftUp":this.up()}n=o.getDaysCount(new Date(d,h)),i=new Date(d,h,u),n<u&&(u=n),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=o.getParsedDate(i),r&&a.onChangeMonth&&a.onChangeMonth(t.month,t.year),l&&a.onChangeYear&&a.onChangeYear(t.year),c&&a.onChangeDecade&&a.onChangeDecade(this.curDecade)},_registerKey:function(e){this.keys.some((function(t){return t==e}))||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this.keys.sort();for(var n in c)e=c[n],i.length==e.length&&e.every((function(e,t){return e==i[t]}))&&(this._trigger("hotKey",n),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=o.getParsedDate(this._getFocusedDate()),n=i.year,s=i.month,a=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(a-=1),"month"==t&&(s-=1),"year"==t&&(n-=1);break;case 38:"day"==t&&(a-=7),"month"==t&&(s-=3),"year"==t&&(n-=4);break;case 39:"day"==t&&(a+=1),"month"==t&&(s+=1),"year"==t&&(n+=1);break;case 40:"day"==t&&(a+=7),"month"==t&&(s+=3),"year"==t&&(n+=4)}var r=new Date(n,s,a);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,i){i=i||this.cellType;var n,s=o.getParsedDate(e),a='.datepicker--cell[data-year="'+s.year+'"]';switch(i){case"month":a='[data-month="'+s.month+'"]';break;case"day":a+='[data-month="'+s.month+'"][data-date="'+s.date+'"]'}return(n=this.views[this.currentView].$el.find(a)).length?n:t("")},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);if(!i)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(i,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var i=t(e.target).closest(".datepicker--cell"),n=this._getDateFromCell(i);this.silent=!0,this.focused&&(this.focused=""),i.addClass("-focus-"),this.focused=n,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){t(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,i){var n=new Date,s=!1;this.selectedDates.length&&(s=!0,n=this.lastSelectedDate),n.setHours(t),n.setMinutes(i),s||this._getCell(n).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(n)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return o.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new t.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=o.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=o.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return o.getDecade(this.date)}},o.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},o.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},o.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},o.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,(function(e,i){if(t[i]||0===t[i])return t[i]}))},o.isSame=function(e,t,i){if(!e||!t)return!1;var n=o.getParsedDate(e),s=o.getParsedDate(t),a=i||"day";return{day:n.date==s.date&&n.month==s.month&&n.year==s.year,month:n.month==s.month&&n.year==s.year,year:n.year==s.year}[a]},o.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},o.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},o.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},o.resetTime=function(e){if("object"==typeof e)return e=o.getParsedDate(e),new Date(e.year,e.month,e.date)},t.fn.datepicker=function(e){return this.each((function(){if(t.data(this,a)){var i=t.data(this,a);i.opts=t.extend(!0,i.opts,e),i.update()}else t.data(this,a,new d(this,e))}))},t.fn.datepicker.Constructor=d,t.fn.datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},t((function(){t(".datepicker-here").datepicker()})),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},n=t.fn.datepicker,s=n.Constructor;n.Body=function(e,i,n){this.d=e,this.type=i,this.opts=n,this.$el=t(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",t.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=t(e[this.type]).appendTo(this.d.$content),this.$names=t(".datepicker--days-names",this.$el),this.$cells=t(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,n,s){return n=n||"",(s=s!=i?s:0)>7?n:7==(t=t!=i?t:e)?this._getDayNamesHtml(e,0,n,++s):(n+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,n,++s))},_getCellContents:function(e,t){var i="datepicker--cell datepicker--cell-"+t,n=new Date,o=this.d,a=s.resetTime(o.minRange),r=s.resetTime(o.maxRange),l=o.opts,c=s.getParsedDate(e),d={},h=c.date;switch(t){case"day":o.isWeekend(c.day)&&(i+=" -weekend-"),c.month!=this.d.parsedDate.month&&(i+=" -other-month-",l.selectOtherMonths||(i+=" -disabled-"),l.showOtherMonths||(h=""));break;case"month":h=o.loc[o.opts.monthsField][c.month];break;case"year":var u=o.curDecade;h=c.year,(c.year<u[0]||c.year>u[1])&&(i+=" -other-decade-",l.selectOtherYears||(i+=" -disabled-"),l.showOtherYears||(h=""))}return l.onRenderCell&&(h=(d=l.onRenderCell(e,t)||{}).html?d.html:h,i+=d.classes?" "+d.classes:""),l.range&&(s.isSame(a,e,t)&&(i+=" -range-from-"),s.isSame(r,e,t)&&(i+=" -range-to-"),1==o.selectedDates.length&&o.focused?((s.bigger(a,e)&&s.less(o.focused,e)||s.less(r,e)&&s.bigger(o.focused,e))&&(i+=" -in-range-"),s.less(r,e)&&s.isSame(o.focused,e)&&(i+=" -range-from-"),s.bigger(a,e)&&s.isSame(o.focused,e)&&(i+=" -range-to-")):2==o.selectedDates.length&&s.bigger(a,e)&&s.less(r,e)&&(i+=" -in-range-")),s.isSame(n,e,t)&&(i+=" -current-"),o.focused&&s.isSame(e,o.focused,t)&&(i+=" -focus-"),o._isSelected(e,t)&&(i+=" -selected-"),o._isInRange(e,t)&&!d.disabled||(i+=" -disabled-"),{html:h,classes:i}},_getDaysHtml:function(e){for(var t,i,n=s.getDaysCount(e),o=new Date(e.getFullYear(),e.getMonth(),1).getDay(),a=new Date(e.getFullYear(),e.getMonth(),n).getDay(),r=o-this.d.loc.firstDay,l=6-a+this.d.loc.firstDay,c="",d=1-(r=r<0?r+7:r),h=n+(l=l>6?l-7:l);d<=h;d++)i=e.getFullYear(),t=e.getMonth(),c+=this._getDayHtml(new Date(i,t,d));return c},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=s.getParsedDate(e),n=0;n<12;)t+=this._getMonthHtml(new Date(i.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){s.getParsedDate(e);for(var t=s.getDecade(e),i="",n=t[0]-1;n<=t[1]+1;n++)i+=this._getYearHtml(new Date(n,0));return i},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var e,i,n,s=t(".datepicker--cell",this.$cells),o=this;s.each((function(s,a){i=t(this),n=o.d._getDateFromCell(t(this)),e=o._getCellContents(n,o.d.cellType),i.attr("class",e.classes)}))},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year,s=this.d;if(s.view==this.opts.minView){var o=new Date(n,i,t),a=this.d._isSelected(o,this.d.cellType);a?s._handleAlreadySelectedDates.bind(s,a,o)():s._trigger("clickCell",o)}else s.down(new Date(n,i,t))},_onClickCell:function(e){var i=t(e.target).closest(".datepicker--cell");i.hasClass("-disabled-")||this._handleClick.bind(this)(i)}}}(),function(){var e=t.fn.datepicker,i=e.Constructor;e.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},e.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",t.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",t.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",t.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),n=i.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',t.extend({title:e},this.opts));this.d.$nav.html(n),"years"==this.d.view&&t(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var n={action:e,label:this.d.loc[e]},s=i.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',n);t("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(s)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=t(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,n=e.year,s=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(n,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(n,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(n-1,t,s),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n+1,t,s),"year")||this._disableNav("next");break;case"years":var o=i.getDecade(this.d.date);this.d._isInRange(new Date(o[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(o[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var i=t(e.target).closest("[data-action]").data("action");this.d[i]()},_onClickNavTitle:function(e){if(!t(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(){var e=t.fn.datepicker,i=e.Constructor;e.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},e.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=i.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.opts;this.minHours=e.minHours<0||e.minHours>23?0:e.minHours,this.minMinutes=e.minMinutes<0||e.minMinutes>59?0:e.minMinutes,this.maxHours=e.maxHours<0||e.maxHours>23?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||e.maxMinutes>59?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=i.getLeadingZeroNum,n={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.opts.minutesStep,minValue:e(this.minutes)},s=i.template('<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',n);this.$timepicker=t(s).appendTo(this.d.$datepicker),this.$ranges=t('[type="range"]',this.$timepicker),this.$hours=t('[name="hours"]',this.$timepicker),this.$minutes=t('[name="minutes"]',this.$timepicker),this.$hoursText=t(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=t(".datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=t('<span class="datepicker--time-current-ampm">').appendTo(t(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=i.getLeadingZeroNum(this.displayHours),t=i.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(i.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):i.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var n=e;e instanceof Date&&(n=i.getParsedDate(e).hours);var s="am";if(t||this.d.ampm)switch(!0){case 0==n:n=12;break;case 12==n:s="pm";break;case n>11:n-=12,s="pm"}return{hours:n,dayPeriod:s}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var i=t(e.target),n=i.attr("name");this.d.timepickerIsActive=!0,this[n]=i.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var i=t(e.target).attr("name");t(".datepicker--time-current-"+i,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var i=t(e.target).attr("name");this.d.inFocus||t(".datepicker--time-current-"+i,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}()}(window,jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],(function(t){return e(t)})):"object"==typeof module&&"object"==typeof module.exports?e(require("jquery")):e(jQuery)}((function(e){"use strict";void 0!==e.easing&&(e.easing.jswing=e.easing.swing);var t=Math.pow,i=Math.sqrt,n=Math.sin,s=Math.cos,o=Math.PI,a=1.70158,r=1.525*a,l=a+1,c=2*o/3,d=2*o/4.5;function h(e){var t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375}e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-t(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-t(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-t(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-t(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-t(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-t(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-t(-2*e+2,5)/2},easeInSine:function(e){return 1-s(e*o/2)},easeOutSine:function(e){return n(e*o/2)},easeInOutSine:function(e){return-(s(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:t(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-t(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?t(2,20*e-10)/2:(2-t(2,-20*e+10))/2},easeInCirc:function(e){return 1-i(1-t(e,2))},easeOutCirc:function(e){return i(1-t(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-i(1-t(2*e,2)))/2:(i(1-t(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-t(2,10*e-10)*n((10*e-10.75)*c)},easeOutElastic:function(e){return 0===e?0:1===e?1:t(2,-10*e)*n((10*e-.75)*c)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-t(2,20*e-10)*n((20*e-11.125)*d)/2:t(2,-20*e+10)*n((20*e-11.125)*d)/2+1},easeInBack:function(e){return l*e*e*e-a*e*e},easeOutBack:function(e){return 1+l*t(e-1,3)+a*t(e-1,2)},easeInOutBack:function(e){return e<.5?t(2*e,2)*(7.189819*e-r)/2:(t(2*e-2,2)*((r+1)*(2*e-2)+r)+2)/2},easeInBounce:function(e){return 1-h(1-e)},easeOutBounce:h,easeInOutBounce:function(e){return e<.5?(1-h(1-2*e))/2:(1+h(2*e-1))/2}})})),function(e){"use strict";var t=function(t,i){var n={settings:{},defaultSettings:{url:!1,content:!1,contentType:!1,animationStyleOfBox:"fade",animationStyleOfOverlay:"fade",animationStyleOfChange:"fade",animateSpeed:400,boxVerticalGutters:50,boxHorizontalGutters:50,boxWidth:800,closeBtnClass:"i-leaflet i-leaflet-close",closeBtnLocation:"overlay",directionBtnClass:["i-leaflet i-leaflet-prev","i-leaflet i-leaflet-next"],directionBtnLocation:"overlay",checkCookies:!1,cookies:{key:"jquery.leaflet",value:"locked",expires:1,path:"/"},maxHeight:!1,namespace:"b-leaflet",overlay:!0,overlayBlur:!1,overlayCloseEvent:!0,overlayOpacity:.65,overlayShowSpeed:400,overlayLoader:{cx:26,cy:26,r:25},scrollMode:"outer",scrollLocker:null,beforeLoad:function(){},afterLoad:function(){},beforeClose:function(){},afterClose:function(){}},states:{isBuilt:!1,keycode:0,scroll:0,scrollBarWidth:18,direction:1},elements:{},group:{},groupArray:[]};function s(t,i,s){switch(n.elements.body=e("body"),n.elements.document=e("html"),n.elements.link=t,this.settings=e.extend(n.settings,n.defaultSettings,i),this.settings.url=this.settings.url||t.attr("href")||t.data("href")||"/",t.data("leafletparams")&&(console.log("ggg"),this.settings.url=this.settings.url+"?"+t.data("leafletparams")),this.settings.contentType||this.setContentType(),this.settings.boxWidth="function"==typeof this.settings.boxWidth?this.settings.boxWidth.call(n.elements.link):this.settings.boxWidth,this.settings.closeBtnLocation=this.settings.overlay?this.settings.closeBtnLocation:"box",this.settings.scrollMode="function"==typeof this.settings.scrollMode?this.settings.scrollMode():this.settings.scrollMode,this.states={},this.states.pfx=o.getPfx(),this.states.loadingTimeout=null,this.states.scroll=document.documentElement.scrollTop||document.body.scrollTop,this.states.scrollBarWidth=o.getScrollBarWidth(),this.docClassPfx="m-leaflet-",s){default:return e.error('Method "'+param+'" is not defined in LeafletPopup');case"init":this.init();break;case"show":this.settings.checkCookies&&o.cookies.get(this.settings.cookies.key)===this.settings.cookies.value||(this.init(),o.cookies.set(this.settings.cookies));break;case"hide":this.hideLayout();break;case"destroy":n.elements.body.off("click.leafletOpen",t.selector)}}s.prototype.init=function(){n.states.isBuilt?this.boxChange():(this.buildLayout(),this.boxShow())},s.prototype.configureDocClasses=function(){var e=this.docClassPfx+"on "+this.docClassPfx+"loading ";return e+=this.docClassPfx+this.settings.animationStyleOfBox+"-transition ",e+=this.docClassPfx+this.settings.scrollMode+"-mode ",e+=this.settings.overlay?this.docClassPfx+"overlay ":""},s.prototype.removeDocClasses=function(){var e=this.docClassPfx+"*";n.elements.document.removeClass((function(t,i){var n=e.replace(/\*/g,"\\S+");return(i.match(new RegExp("\\b"+n,"g"))||[]).join(" ")}))},s.prototype.setContentType=function(){if(this.settings.content)switch(typeof n.settings.content){default:case"string":this.settings.contentType="html";break;case"function":this.settings.contentType="function";break;case"boolean":this.settings.contentType="iframe"}else{var e=/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i.test(this.settings.url),t=!!this.settings.url.match(/#/gi),i=0!==this.settings.url.indexOf("#");e&&(this.settings.contentType="image"),t&&!i&&(this.settings.contentType="hash"),t&&i&&(this.settings.contentType="hashUrl"),e||t||(this.settings.contentType="url")}},s.prototype.buildLayout=function(){var t=e('<div class="'+n.settings.namespace+'"></div>'),i=e('<div class="'+n.settings.namespace+'_capsule"></div>').appendTo(t),s=e('<div class="'+n.settings.namespace+'_capsule_inner"></div>').css({padding:n.settings.boxVerticalGutters+"px "+n.settings.boxHorizontalGutters+"px"}).appendTo(i),o=e('<div class="'+n.settings.namespace+'_inner_sources"></div>').appendTo(s),a=e('<div class="'+n.settings.namespace+'_perspective"></div>').css({maxWidth:n.settings.boxWidth}).appendTo(s),r=e('<div class="'+n.settings.namespace+'_box"></div>').css({width:"auto",maxWidth:n.settings.boxWidth}).appendTo(a),l=e('<div class="'+n.settings.namespace+'_box_content"></div>').appendTo(r),c=e('<div class="'+n.settings.namespace+"_close "+n.settings.closeBtnClass+'"><svg class="i-svg i-svg-block" aria-hidden="true"><use xlink:href="#close"></use></svg></div>'),d=e('<div class="'+n.settings.namespace+'_overlay"></div>'),h=e('<div class="'+n.settings.namespace+'_overlay_loader"></div>'),u=(e('<svg><circle cx="'+n.settings.overlayLoader.cx+'" cy="'+n.settings.overlayLoader.cy+'" r="'+n.settings.overlayLoader.r+'"></circle></svg>').appendTo(h),e('<div class="'+n.settings.namespace+'_nav"></div>').appendTo("box"===this.settings.directionBtnLocation?r:s)),p=e('<div class="'+n.settings.namespace+"_direction "+n.settings.namespace+"_prev "+n.settings.directionBtnClass[0]+'"><svg width="34" height="10" aria-hidden="true"><use xlink:href="#arrow-prev"></use></svg></div>').appendTo(u),f=e('<div class="'+n.settings.namespace+"_direction "+n.settings.namespace+"_next "+n.settings.directionBtnClass[1]+'"><svg width="34" height="10" aria-hidden="true"><use xlink:href="#arrow-next"></use></svg></div>').appendTo(u),m=e('<div class="'+n.settings.namespace+'_locker"></div>');n.settings.overlay&&d.appendTo(s),n.settings.overlayLoader&&h.appendTo(d),n.elements.sources=o,this.groupSources(),u.toggle(!!n.groupArray.length),c.appendTo("box"===this.settings.closeBtnLocation?r:s),t.css(n.pfx+"transition-duration",n.settings.animateSpeed+"ms").css("transition-duration",n.settings.animateSpeed+"ms"),r.css(n.pfx+"transition-duration",n.settings.animateSpeed+"ms").css("transition-duration",n.settings.animateSpeed+"ms"),l.css(n.pfx+"transition-duration",n.settings.animateSpeed+"ms").css("transition-duration",n.settings.animateSpeed+"ms"),d.css(n.pfx+"transition-duration",n.settings.overlayShowSpeed+"ms").css("transition-duration",n.settings.overlayShowSpeed+"ms"),n.elements.document.addClass(this.configureDocClasses()),t.data("leafletSettings",{animationStyleOfBox:this.settings.animationStyleOfBox,animationStyleOfOverlay:this.settings.animationStyleOfOverlay,animationStyleOfChange:this.settings.animationStyleOfChange,scrollLocker:this.settings.scrollLocker,scrollMode:this.settings.scrollMode}),n.elements.main=t,n.elements.perspective=a,n.elements.wrapper=s,n.elements.box=r,n.elements.close=c,n.elements.nav=u,n.elements.prev=p,n.elements.next=f,n.elements.content=l,n.elements.overlay=d,n.elements.loader=h,n.elements.locker=this.settings.scrollLocker?this.settings.scrollLocker:m,n.states.scroll=this.states.scroll,this.setLayoutMode(),this.bindCloseEvents(),this.bindChangeEvents(),this.bindResizeEvents(),n.elements.body.prepend(t),setTimeout(e.proxy((function(){this.overlayShow()}),this),0),n.states.isBuilt=!0},s.prototype.hideLayout=function(){this.settings.beforeClose&&this.settings.beforeClose.call(n.elements.main,n),this.overlayHide(),this.boxHide((function(){this.unsetLayoutMode(),n.elements.main.remove(),this.removeDocClasses(),n.states.isBuilt=!1,n.group={},n.groupArray=[],n.groupCurrent=!1,this.settings.afterClose&&this.settings.afterClose()}))},s.prototype.setLayoutMode=function(){"outer"===n.elements.main.data("leafletSettings").scrollMode&&(n.elements.body.css({overflow:"hidden"}),document.body.scrollHeight>t.innerHeight&&(n.elements.body.css({paddingRight:o.getScrollBarWidth()}),e(".b-header__fixed").css({paddingRight:o.getScrollBarWidth()}),n.elements.close.css({right:o.getScrollBarWidth()}),n.elements.next.css({right:o.getScrollBarWidth()})),/iPad|iPhone|iPod/.test(navigator.userAgent)&&n.elements.body.css({position:"fixed",left:0,top:-n.elements.body.scrollTop(),right:0}))},s.prototype.unsetLayoutMode=function(){"outer"===n.elements.main.data("leafletSettings").scrollMode&&(e("body").css({position:"",left:"",top:"",right:"",overflow:"",paddingRight:"",height:""}),e(".b-header__fixed").css({paddingRight:""}),n.elements.close.css({right:""}),n.elements.next.css({right:""}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&t.scrollBy(0,n.states.scroll))},s.prototype.groupSources=function(){var t=e('[data-group="'+n.elements.link.attr("data-group")+'"]');n.group=t.filter((function(){return n.states.isBuilt||!!e(this).data("leaflet")})),n.groupCurrent=n.group.length&&void 0===n.groupCurrent?n.group.index(n.elements.link):n.groupCurrent,t.each((function(){(n.states.isBuilt||e(this).data("leaflet"))&&n.groupArray.push(e(this))}))},s.prototype.bindCloseEvents=function(){n.elements.close.add(this.settings.overlayCloseEvent?n.elements.overlay:{}).on("click.leafletClose",e.proxy((function(){this.hideLayout()}),this)),e(document).on("keyup.leafletClose",e.proxy((function(e){n.states.keycode=e.keyCode,27===n.states.keycode&&this.hideLayout()}),this))},s.prototype.bindResizeEvents=function(){e(t).on("resize.leafletResize",e.proxy((function(){n.states.isBuilt&&(n.elements.box.css(this.states.pfx+"transition-property","top, margin, height, transform, opacity, visibility").css("transition-property","top, margin, height, transform, opacity, visibility"),this.boxPosition())}),this))},s.prototype.bindChangeEvents=function(){e(n.elements.prev).on("click.leafletChange",e.proxy((function(){n.states.direction=-1,this.changeEventHandler()}),this)),e(n.elements.next).on("click.leafletChange",e.proxy((function(){n.states.direction=1,this.changeEventHandler()}),this)),e(document).on("keyup.leafletChange",e.proxy((function(e){n.states.keycode=e.keyCode,n.elements.document.hasClass(this.docClassPfx+"loading")||39!==n.states.keycode&&37!==n.states.keycode||(n.states.direction=39===n.states.keycode?1:-1,this.changeEventHandler())}),this)),n.elements.perspective.on("touchstart.leafletSwipeControl",(function(e){var t=e.originalEvent.touches[0];o.touches[e.type].x=t.pageX,o.touches[e.type].y=t.pageY})),n.elements.perspective.on("touchmove.leafletSwipeControl",(function(e){var t=e.originalEvent.touches[0];o.touches[e.type].x=t.pageX,o.touches[e.type].y=t.pageY,n.group.length>0&&n.elements.box.css(n.states.pfx+"transition","none").css("transition","none").css(n.states.pfx+"transform","translate("+(o.touches.touchmove.x-o.touches.touchstart.x)+"px, 0)").css("transform","translate("+(o.touches.touchmove.x-o.touches.touchstart.x)+"px, 0)")})),n.elements.perspective.on("touchend.leafletSwipeChange",e.proxy((function(e){if(n.group.length>0){n.elements.box.css(n.states.pfx+"transition","").css("transition","");o.touches.touchmove.x>-1&&Math.abs(o.touches.touchstart.x-o.touches.touchmove.x)>10&&(n.states.direction=o.touches.touchstart.x-o.touches.touchmove.x>0?1:-1,this.changeEventHandler())}o.touches={touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1}}}),this))},s.prototype.changeEventHandler=function(){var e=(n.groupCurrent?n.groupCurrent:n.group.index(n.elements.link))+n.states.direction;e=e+1>n.group.length?0:e<0?n.group.length-1:e,n.groupCurrent=e,n.group.eq(e).trigger("click.leafletOpen")},s.prototype.overlayShow=function(){n.elements.overlay.css(this.states.pfx+"opacity",this.settings.overlayOpacity).css("opacity",this.settings.overlayOpacity).css("visibility","visible"),this.settings.overlayBlur&&n.elements.locker.css(this.states.pfx+"transition",this.states.pfx+"filter "+this.settings.overlayShowSpeed+"ms ease").css("transition",this.states.pfx+"filter "+this.settings.overlayShowSpeed+"ms ease").css(this.states.pfx+"filter","blur(3px)").css("filter","blur(3px)")},s.prototype.overlayHide=function(){n.elements.overlay.add(n.elements.close).add(n.elements.prev).add(n.elements.next).css(n.pfx+"transition-duration",n.settings.animateSpeed+"ms").css("transition-duration",n.settings.animateSpeed+"ms").css(this.states.pfx+"opacity",0).css("opacity",0).css("visibility","hidden"),this.settings.overlayBlur&&n.elements.locker.css(this.states.pfx+"filter","").css("filter","")},s.prototype.getContent=function(t){var i=this;switch(this.settings.beforeLoad&&this.settings.beforeLoad.call(n.elements.main,this.states.scroll,n),n.elements.main.removeClass(e.proxy((function(e,t){var i=this.docClassPfx+"type-*".replace(/\*/g,"\\S+");return(t.match(new RegExp("\\b"+i,"g"))||[]).join(" ")}),this)).addClass(this.docClassPfx+"type-"+this.settings.contentType),this.settings.contentType){default:case"html":case"hash":case"function":var s="html"===this.settings.contentType?this.settings.content:"function"===this.settings.contentType?this.settings.content():e(this.settings.url).clone(!0,!0);n.elements.content.empty().html(s).css({maxHeight:this.settings.maxHeight?this.settings.maxHeight():"none"}),setTimeout((function(){t()}),0);break;case"image":var a=e('<img src="'+this.settings.url+'" alt="" />');a.css({maxHeight:this.settings.maxHeight?this.settings.maxHeight():""}),a.on("load",(function(){i.addTitle(a),t()})),n.elements.content.empty().append(a);break;case"iframe":var r=e('<iframe src="'+this.settings.url+'" frameborder="0" allowfullscreen></iframe>');r.on("load",(function(){i.addTitle(r),t()})),setTimeout((function(){n.elements.content.empty().append(r),r.wrap('<div class="b-leaflet_box_iframe"></div>')}),this.settings.overlayShowSpeed);break;case"url":case"hashUrl":var l="hashUrl"===this.settings.contentType?this.settings.url.split("#")[0]+" #"+this.settings.url.split("#")[1]:this.settings.url;n.elements.link.data("localStorageKey")&&localStorage.getItem(n.elements.link.data("localStorageKey"))?(n.elements.content.html(localStorage.getItem(n.elements.link.data("localStorageKey"))),t()):e.ajax({url:l,method:"get",dataType:"html",success:function(e){var i=o.randomKey(8);localStorage.setItem(i,e),n.elements.link.data("localStorageKey",i),n.elements.content.html(e),t()}})}},s.prototype.addTitle=function(t){var i=e('<div class="'+n.settings.namespace+'_box_title" />'),s=!1;this.settings.title?s="function"==typeof this.settings.title?this.settings.title.call(n):this.settings.title:n.elements.link.attr("title")&&(s=n.elements.link.attr("title")),s&&n.elements.content.append(i.css({maxWidth:t.width()}).html(s))},s.prototype.boxPosition=function(){var i=e(t).height()-2*this.settings.boxVerticalGutters-(n.elements.box.outerHeight()-n.elements.box.height());n.elements.box.css({maxHeight:"outer"===this.settings.scrollMode?"none":i}),n.elements.content.css({maxHeight:"none"}),n.elements.content.css({maxHeight:""})},s.prototype.boxShow=function(){this.getContent(e.proxy((function(){this.settings.afterLoad&&this.settings.afterLoad.call(n.elements.box,this.states.scroll,this.settings.contentType),this.boxPosition(),this.boxTransitionsIn[n.elements.main.data("leafletSettings").animationStyleOfBox].call(this)}),this))},s.prototype.boxHide=function(t){this.boxTransitionsOut[n.elements.main.data("leafletSettings").animationStyleOfBox].call(this),setTimeout(e.proxy((function(){t.call(this)}),this),this.settings.animateSpeed)},s.prototype.boxChange=function(){switch(n.groupArray.length||this.groupSources(),n.elements.nav.is(":hidden")&&setTimeout((function(){n.elements.nav.toggle(!!n.group.length)}),this.settings.animateSpeed),n.settings.animationStyleOfChange){default:case"fade":n.elements.document.toggleClass(this.docClassPfx+"loading",!0),n.elements.perspective.css(this.states.pfx+"transition-property","width").css("transition-property","width"),n.elements.box.css(this.states.pfx+"transition-property","top, margin, height, transform, opacity, visibility").css("transition-property","top, margin, height, transform, opacity, visibility"),n.elements.content.css({overflow:"hidden",opacity:0}),n.elements.perspective.css({width:n.elements.perspective.width()}),n.elements.box.css({height:n.elements.box.height()}),setTimeout(e.proxy((function(){this.getContent(e.proxy((function(){this.settings.afterLoad&&this.settings.afterLoad.call(n.elements.box),"image"!==this.settings.contentType&&"iframe"!==this.settings.contentType&&(n.elements.perspective.css({width:n.settings.boxWidth}),n.elements.box.css({height:n.elements.content.height()})),setTimeout(e.proxy((function(){n.elements.perspective.css({maxWidth:n.settings.boxWidth,width:""}),n.elements.box.css(this.states.pfx+"transition-property","").css("transition-property","").css({maxWidth:n.settings.boxWidth,height:"",width:""}),n.elements.content.css({overflow:"",opacity:""}),clearTimeout(n.loadingTimeout),n.elements.document.toggleClass(this.docClassPfx+"loading",!1),this.boxPosition()}),this),this.settings.animateSpeed)}),this))}),this),n.settings.animateSpeed);break;case"slide":n.elements.document.toggleClass(this.docClassPfx+"loading",!0),n.elements.box.css(this.states.pfx+"transform","translate("+-300*n.states.direction+"px,0)").css("transform","translate("+-300*n.states.direction+"px,0)").css(this.states.pfx+"opacity",0).css("opacity",0),setTimeout(e.proxy((function(){n.elements.perspective.css({maxWidth:n.settings.boxWidth}),n.elements.box.css({maxWidth:n.settings.boxWidth}).css(this.states.pfx+"transition-property","zoom").css("transition-property","zoom").css(this.states.pfx+"transform","translate("+300*n.states.direction+"px,0)").css("transform","translate("+300*n.states.direction+"px,0)"),setTimeout(e.proxy((function(){this.getContent(e.proxy((function(){this.settings.afterLoad&&this.settings.afterLoad.call(n.elements.box),n.elements.box.css(this.states.pfx+"transition-property","").css("transition-property","").css(this.states.pfx+"transform","translate(0,0)").css("transform","translate(0,0)").css(this.states.pfx+"opacity",1).css("opacity",1),clearTimeout(n.loadingTimeout),n.elements.document.toggleClass(this.docClassPfx+"loading",!1)}),this))}),this),this.settings.animateSpeed/1.1)}),this),this.settings.animateSpeed/1.1);break;case"pushDown":n.elements.document.toggleClass(this.docClassPfx+"loading",!0),n.elements.box.css(this.states.pfx+"transform-origin","50% 100%").css("transform-origin","50% 100%").css(this.states.pfx+"transform","translateY(25%) rotateX(45deg) scale(.85)").css("transform","translateY(25%) rotateX(45deg) scale(.85)").css(this.states.pfx+"opacity",0).css("opacity",0),setTimeout(e.proxy((function(){n.elements.perspective.css({maxWidth:n.settings.boxWidth}),n.elements.box.css({maxWidth:n.settings.boxWidth}).css(this.states.pfx+"transition-property","zoom").css("transition-property","zoom").css(this.states.pfx+"transform","translateY(-100%) rotateX(45deg)").css("transform","translateY(-100%) rotateX(45deg)"),setTimeout(e.proxy((function(){this.getContent(e.proxy((function(){this.settings.afterLoad&&this.settings.afterLoad.call(n.elements.box),n.elements.box.css(this.states.pfx+"transition-property","").css("transition-property","").css(this.states.pfx+"transform","translateY(0)").css("transform","translateY(0)").css(this.states.pfx+"opacity",1).css("opacity",1),clearTimeout(n.loadingTimeout),n.elements.document.toggleClass(this.docClassPfx+"loading",!1)}),this))}),this),this.settings.animateSpeed/1.5)}),this),this.settings.animateSpeed/1.5)}},s.prototype.boxTransitionsIn={fade:function(){n.elements.box.css("visibility","visible").css(this.states.pfx+"opacity",1).css("opacity",1),clearTimeout(this.states.loadingTimeout),n.elements.document.toggleClass(this.docClassPfx+"loading",!1)},scale:function(){n.elements.box.css(n.pfx+"transform","scale(1, 1)").css("transform","scale(1, 1)"),this.boxTransitionsIn.fade.call(this)},superScale:function(){n.elements.box.css(n.pfx+"transform","scale(1, 1)").css("transform","scale(1, 1)"),this.boxTransitionsIn.fade.call(this)},drop:function(){n.elements.box.css(n.pfx+"transform","translate(0, 0)").css("transform","translate(0, 0)"),this.boxTransitionsIn.fade.call(this)},drop3d:function(){n.elements.box.css(n.pfx+"transform","translate3d(0, 0, 0) rotateX(0deg)").css("transform","translate3d(0, 0, 0) rotateX(0deg)"),this.boxTransitionsIn.fade.call(this)},flip3d:function(){n.elements.box.css(this.states.pfx+"transform","rotateY(0deg)").css("transform","rotateY(0deg)"),this.boxTransitionsIn.fade.call(this)},flip3dVertical:function(){n.elements.box.css(n.pfx+"transform","rotateX(0deg)").css("transform","rotateX(0deg)"),this.boxTransitionsIn.fade.call(this)},newspaper:function(){n.elements.box.css(n.pfx+"transform","scale(1, 1) rotate(0deg)").css("transform","scale(1, 1) rotate(0deg)"),this.boxTransitionsIn.fade.call(this)},sideFall:function(){n.elements.box.css(n.pfx+"transform","translate(0) translateZ(0) rotate(0deg)").css("transform","translate(0) translateZ(0) rotate(0deg)"),this.boxTransitionsIn.fade.call(this)}},s.prototype.boxTransitionsOut={fade:function(){n.elements.box.css("visibility","").css(this.states.pfx+"opacity","").css("opacity","").css(this.states.pfx+"transform","").css("transform","")},scale:function(){this.boxTransitionsOut.fade.call(this)},superScale:function(){this.boxTransitionsOut.fade.call(this)},drop:function(){this.boxTransitionsOut.fade.call(this)},drop3d:function(){this.boxTransitionsOut.fade.call(this)},flip3d:function(){this.boxTransitionsOut.fade.call(this)},flip3dVertical:function(){this.boxTransitionsOut.fade.call(this)},newspaper:function(){this.boxTransitionsOut.fade.call(this)},sideFall:function(){this.boxTransitionsOut.fade.call(this)}};var o={getPfx:function(){var t=document.createElement("div"),i=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"],n=!1;return e.each(i,(function(e,s){if(undefined!==t.style[i[e]])return n="-"+i[e].replace("Perspective","").toLowerCase()+"-",!1})),n},getScrollBarWidth:function(){var t=e('<div class="b-scrollBar-test"></div>').css({position:"absolute",left:-99999,top:-99999,overflowY:"scroll",width:50,height:50,visibility:"hidden"}).appendTo(e("body")),i=t[0].offsetWidth-t[0].clientWidth;return t.remove(),i},unwrap:function(t,i){return t.each((function(){var t=this,n=void 0!==i?e(t).find(i):e(t).children().first();1===n.length&&(n.contents().appendTo(t),n.remove())}))},randomKey:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),i="";e=e||Math.floor(Math.random()*t.length);for(var n=0;n<e;n++)i+=t[Math.floor(Math.random()*t.length)];return i},cookies:{set:function(e){var t=new Date,i=e.key+"="+e.value;return t.setDate(t.getDate()+1),i+=e.expires?"; expires="+t.toUTCString():"",i+=e.path?"; path="+e.path:"",document.cookie=i},get:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return!!t&&decodeURIComponent(t[1])},remove:function(e){n.helpers.cookies.set({key:e,value:"",expires:-1})}},touches:{touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1}}};return{App:s}}(window);e.fn.leafLetPopUp=function(i){if("object"!=typeof i&&i)return new t.App(e(this),Array.prototype.slice.call(arguments,1)[0]||{},i),this;var n=e("body"),s=i.selector||!1;return s?(e(s).data("leaflet",!0),n.on("click.leafletOpen",s,(function(n){n.preventDefault(),new t.App(e(this),i||{},"init")}))):this.data("leaflet",!0).on("click.leafletOpen",(function(n){n.preventDefault(),new t.App(e(this),i||{},"init")})),this}}(jQuery),
  /*!
   * Lightbox v2.11.3
   * by Lokesh Dhakar
   *
   * More info:
   * http://lokeshdhakar.com/projects/lightbox2/
   *
   * Copyright Lokesh Dhakar
   * Released under the MIT license
   * https://github.com/lokesh/lightbox2/blob/master/LICENSE
   *
   * @preserve
   */
  function(e){var t,i;t=this,i=function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Картинка %1 из %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){var t=this;e(document).ready((function(){t.enable(),t.build()}))},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",(function(i){return t.start(e(i.currentTarget)),!1}))},t.prototype.build=function(){if(!(e("#lightbox").length>0)){var t=this;e('<div id="lightboxOverlay" tabindex="-1" class="lightboxOverlay"></div><div id="lightbox" tabindex="-1" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" alt=""/><div class="lb-nav"><a class="lb-prev" aria-label="Previous image" href="" ></a><a class="lb-next" aria-label="Next image" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",(function(){return t.end(),!1})),this.$lightbox.hide().on("click",(function(i){"lightbox"===e(i.target).attr("id")&&t.end()})),this.$outerContainer.on("click",(function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1})),this.$lightbox.find(".lb-prev").on("click",(function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1})),this.$lightbox.find(".lb-next").on("click",(function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1})),this.$nav.on("mousedown",(function(e){3===e.which&&(t.$nav.css("pointer-events","none"),t.$lightbox.one("contextmenu",(function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(t),0)})))})),this.$lightbox.find(".lb-loader, .lb-close").on("click",(function(){return t.end(),!1}))}},t.prototype.start=function(t){var i=this,n=e(window);n.on("resize",e.proxy(this.sizeOverlay,this)),this.sizeOverlay(),this.album=[];var s=0;function o(e){i.album.push({alt:e.attr("data-alt"),link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var a,r=t.attr("data-lightbox");if(r){a=e(t.prop("tagName")+'[data-lightbox="'+r+'"]');for(var l=0;l<a.length;l=++l)o(e(a[l])),a[l]===t[0]&&(s=l)}else if("lightbox"===t.attr("rel"))o(t);else{a=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var c=0;c<a.length;c=++c)o(e(a[c])),a[c]===t[0]&&(s=c)}var d=n.scrollTop()+this.options.positionFromTop,h=n.scrollLeft();this.$lightbox.css({top:d+"px",left:h+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&e("body").addClass("lb-disable-scrolling"),this.changeImage(s)},t.prototype.changeImage=function(t){var i=this,n=this.album[t].link,s=n.split(".").slice(-1)[0],o=this.$lightbox.find(".lb-image");this.disableKeyboardNav(),this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var a=new Image;a.onload=function(){var r,l,c,d,h,u;o.attr({alt:i.album[t].alt,src:n}),e(a),o.width(a.width),o.height(a.height),u=e(window).width(),h=e(window).height(),d=u-i.containerPadding.left-i.containerPadding.right-i.imageBorderWidth.left-i.imageBorderWidth.right-20,c=h-i.containerPadding.top-i.containerPadding.bottom-i.imageBorderWidth.top-i.imageBorderWidth.bottom-i.options.positionFromTop-70,"svg"===s&&(o.width(d),o.height(c)),i.options.fitImagesInViewport?(i.options.maxWidth&&i.options.maxWidth<d&&(d=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<c&&(c=i.options.maxHeight)):(d=i.options.maxWidth||a.width||d,c=i.options.maxHeight||a.height||c),(a.width>d||a.height>c)&&(a.width/d>a.height/c?(l=d,r=parseInt(a.height/(a.width/l),10),o.width(l),o.height(r)):(r=c,l=parseInt(a.width/(a.height/r),10),o.width(l),o.height(r))),i.sizeContainer(o.width(),o.height())},a.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){var t=this;setTimeout((function(){t.$overlay.width(e(document).width()).height(e(document).height())}),0)},t.prototype.sizeContainer=function(e,t){var i=this,n=this.$outerContainer.outerWidth(),s=this.$outerContainer.outerHeight(),o=e+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,a=t+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function r(){i.$lightbox.find(".lb-dataContainer").width(o),i.$lightbox.find(".lb-prevLink").height(a),i.$lightbox.find(".lb-nextLink").height(a),i.$overlay.focus(),i.showImage()}n!==o||s!==a?this.$outerContainer.animate({width:o,height:a},this.options.resizeDuration,"swing",(function(){r()})):r()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(e){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var e=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var t=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?t.text(this.album[this.currentImageIndex].title):t.html(this.album[this.currentImageIndex].title),t.fadeIn("fast")}if(this.album.length>1&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,(function(){return e.sizeOverlay()}))},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){this.$lightbox.on("keyup.keyboard",e.proxy(this.keyboardAction,this)),this.$overlay.on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){this.$lightbox.off(".keyboard"),this.$overlay.off(".keyboard")},t.prototype.keyboardAction=function(e){var t=e.keyCode;27===t?(e.stopPropagation(),this.end()):37===t?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):39===t&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),this.options.disableScrolling&&e("body").removeClass("lb-disable-scrolling")},new t},"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):t.lightbox=i(t.jQuery)}(jQuery),function(e,t,i){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t||i)}((function(e){"use strict";var t=function(t,i,n){var s={invalid:[],getCaret:function(){try{var e,i=0,n=t.get(0),o=document.selection,a=n.selectionStart;return o&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=o.createRange()).moveStart("character",-s.val().length),i=e.text.length):(a||"0"===a)&&(i=a),i}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var i,n=t.get(0);n.setSelectionRange?n.setSelectionRange(e,e):((i=n.createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select())}}catch(e){}},events:function(){t.on("keydown.mask",(function(e){t.data("mask-keycode",e.keyCode||e.which),t.data("mask-previus-value",t.val()),t.data("mask-previus-caret-pos",s.getCaret()),s.maskDigitPosMapOld=s.maskDigitPosMap})).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",s.behaviour).on("paste.mask drop.mask",(function(){setTimeout((function(){t.keydown().keyup()}),100)})).on("change.mask",(function(){t.data("changed",!0)})).on("blur.mask",(function(){r===s.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)})).on("blur.mask",(function(){r=s.val()})).on("focus.mask",(function(t){!0===n.selectOnFocus&&e(t.target).select()})).on("focusout.mask",(function(){n.clearIfNotMatch&&!o.test(s.val())&&s.val("")}))},getRegexMask:function(){for(var e,t,n,s,o,r,l=[],c=0;c<i.length;c++)(e=a.translation[i.charAt(c)])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,(s=e.recursive)?(l.push(i.charAt(c)),o={digit:i.charAt(c),pattern:t}):l.push(n||s?t+"?":t)):l.push(i.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=l.join(""),o&&(r=r.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(r)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var i,n=t.is("input")?"val":"text";return arguments.length>0?(t[n]()!==e&&t[n](e),i=t):i=t[n](),i},calculateCaretPosition:function(){var e=t.data("mask-previus-value")||"",i=s.getMasked(),n=s.getCaret();if(e!==i){var o=t.data("mask-previus-caret-pos")||0,a=i.length,r=e.length,l=0,c=0,d=0,h=0,u=0;for(u=n;u<a&&s.maskDigitPosMap[u];u++)c++;for(u=n-1;u>=0&&s.maskDigitPosMap[u];u--)l++;for(u=n-1;u>=0;u--)s.maskDigitPosMap[u]&&d++;for(u=o-1;u>=0;u--)s.maskDigitPosMapOld[u]&&h++;if(n>r)n=10*a;else if(o>=n&&o!==r){if(!s.maskDigitPosMapOld[n]){var p=n;n-=h-d,n-=l,s.maskDigitPosMap[n]&&(n=p)}}else n>o&&(n+=d-h,n+=c)}return n},behaviour:function(i){i=i||window.event,s.invalid=[];var n=t.data("mask-keycode");if(-1===e.inArray(n,a.byPassKeys)){var o=s.getMasked(),r=s.getCaret();return setTimeout((function(){s.setCaret(s.calculateCaretPosition())}),e.jMaskGlobals.keyStrokeCompensation),s.val(o),s.setCaret(r),s.callbacks(i)}},getMasked:function(e,t){var o,r,l,c=[],d=void 0===t?s.val():t+"",h=0,u=i.length,p=0,f=d.length,m=1,g="push",v=-1,y=0,b=[];for(n.reverse?(g="unshift",m=-1,o=0,h=u-1,p=f-1,r=function(){return h>-1&&p>-1}):(o=u-1,r=function(){return h<u&&p<f});r();){var _=i.charAt(h),w=d.charAt(p),x=a.translation[_];x?(w.match(x.pattern)?(c[g](w),x.recursive&&(-1===v?v=h:h===o&&h!==v&&(h=v-m),o===v&&(h-=m)),h+=m):w===l?(y--,l=void 0):x.optional?(h+=m,p-=m):x.fallback?(c[g](x.fallback),h+=m,p-=m):s.invalid.push({p:p,v:w,e:x.pattern}),p+=m):(e||c[g](_),w===_?(b.push(p),p+=m):(l=_,b.push(p+y),y++),h+=m)}var C=i.charAt(o);u!==f+1||a.translation[C]||c.push(C);var k=c.join("");return s.mapMaskdigitPositions(k,b,f),k},mapMaskdigitPositions:function(e,t,i){var o=n.reverse?e.length-i:0;s.maskDigitPosMap={};for(var a=0;a<t.length;a++)s.maskDigitPosMap[t[a]+o]=1},callbacks:function(e){var o=s.val(),a=o!==r,l=[o,e,t,n],c=function(e,t,i){"function"==typeof n[e]&&t&&n[e].apply(this,i)};c("onChange",!0===a,l),c("onKeyPress",!0===a,l),c("onComplete",o.length===i.length,l),c("onInvalid",s.invalid.length>0,[o,e,t,s.invalid,n])}};t=e(t);var o,a=this,r=s.val();i="function"==typeof i?i(s.val(),void 0,t,n):i,a.mask=i,a.options=n,a.remove=function(){var e=s.getCaret();return a.options.placeholder&&t.removeAttr("placeholder"),t.data("mask-maxlength")&&t.removeAttr("maxlength"),s.destroyEvents(),s.val(a.getCleanVal()),s.setCaret(e),t},a.getCleanVal=function(){return s.getMasked(!0)},a.getMaskedVal=function(e){return s.getMasked(!1,e)},a.init=function(r){if(r=r||!1,n=n||{},a.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,a.byPassKeys=e.jMaskGlobals.byPassKeys,a.translation=e.extend({},e.jMaskGlobals.translation,n.translation),a=e.extend(!0,{},a,n),o=s.getRegexMask(),r)s.events(),s.val(s.getMasked());else{n.placeholder&&t.attr("placeholder",n.placeholder),t.data("mask")&&t.attr("autocomplete","off");for(var l=0,c=!0;l<i.length;l++){var d=a.translation[i.charAt(l)];if(d&&d.recursive){c=!1;break}}c&&t.attr("maxlength",i.length).data("mask-maxlength",!0),s.destroyEvents(),s.events();var h=s.getCaret();s.val(s.getMasked()),s.setCaret(h)}},a.init(!t.is("input"))};e.maskWatchers={};var i=function(){var i=e(this),s={},o="data-mask-",a=i.attr("data-mask");if(i.attr(o+"reverse")&&(s.reverse=!0),i.attr(o+"clearifnotmatch")&&(s.clearIfNotMatch=!0),"true"===i.attr(o+"selectonfocus")&&(s.selectOnFocus=!0),n(i,a,s))return i.data("mask",new t(this,a,s))},n=function(t,i,n){n=n||{};var s=e(t).data("mask"),o=JSON.stringify,a=e(t).val()||e(t).text();try{return"function"==typeof i&&(i=i(a)),"object"!=typeof s||o(s.options)!==o(n)||s.mask!==i}catch(e){}};e.fn.mask=function(i,s){s=s||{};var o=this.selector,a=e.jMaskGlobals,r=a.watchInterval,l=s.watchInputs||a.watchInputs,c=function(){if(n(this,i,s))return e(this).data("mask",new t(this,i,s))};return e(this).each(c),o&&""!==o&&l&&(clearInterval(e.maskWatchers[o]),e.maskWatchers[o]=setInterval((function(){e(document).find(o).each(c)}),r)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each((function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")}))},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){((t=t||e.jMaskGlobals.maskElements)instanceof e?t:e(t)).filter(e.jMaskGlobals.dataMaskAttr).each(i)};var s,o,a,r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:400,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(s="input",a=document.createElement("div"),(o=(s="on"+s)in a)||(a.setAttribute(s,"return;"),o="function"==typeof a[s]),a=null,o),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},(r=e.jMaskGlobals=e.extend(!0,{},r,e.jMaskGlobals)).dataMask&&e.applyDataMask(),setInterval((function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()}),r.watchInterval)}),window.jQuery,window.Zepto),function(e,t,i,n){function s(t,i){this.settings=null,this.options=e.extend({},s.Defaults,i),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy((function(t,i){this._handlers[i]=e.proxy(this[i],this)}),this)),e.each(s.Plugins,e.proxy((function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)}),this)),e.each(s.Workers,e.proxy((function(t,i){this._pipe.push({filter:i.filter,run:e.proxy(i.run,this)})}),this)),this.setup(),this.initialize()}s.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},s.Width={Default:"default",Inner:"inner",Outer:"outer"},s.Type={Event:"event",State:"state"},s.Plugins={},s.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,s={width:"auto","margin-left":n?t:"","margin-right":n?"":t};!i&&this.$stage.children().css(s),e.css=s}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,s=!this.settings.autoWidth,o=[];for(e.items={merge:!1,width:t};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,e.items.merge=i>1||e.items.merge,o[n]=s?t*i:this._items[n].width();this._widths=o}},{filter:["items","settings"],run:function(){var t=[],i=this._items,n=this.settings,s=Math.max(2*n.items,4),o=2*Math.ceil(i.length/2),a=n.loop&&i.length?n.rewind?s:Math.max(s,o):0,r="",l="";for(a/=2;a>0;)t.push(this.normalize(t.length/2,!0)),r+=i[t[t.length-1]][0].outerHTML,t.push(this.normalize(i.length-1-(t.length-1)/2,!0)),l=i[t[t.length-1]][0].outerHTML+l,a-=1;this._clones=t,e(r).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,i=-1,n=0,s=0,o=[];++i<t;)n=o[i-1]||0,s=this._widths[this.relative(i)]+this.settings.margin,o.push(n+s*e);this._coordinates=o}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,i={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],n.eq(t).css(e.css);else i&&(e.css.width=e.items.width,n.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,i,n,s=this.settings.rtl?1:-1,o=2*this.settings.stagePadding,a=this.coordinates(this.current())+o,r=a+this.width()*s,l=[];for(i=0,n=this._coordinates.length;i<n;i++)e=this._coordinates[i-1]||0,t=Math.abs(this._coordinates[i])+o*s,(this.op(e,"<=",a)&&this.op(e,">",r)||this.op(t,"<",a)&&this.op(t,">",r))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],s.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(e("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},s.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map((function(t){return e(t)})),this._mergers=this._items.map((function(){return 1})),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},s.prototype.initialize=function(){var e,t,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(e=this.$element.find("img"),t=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,i=this.$element.children(t).width(),e.length&&i<=0&&this.preloadAutoWidthImages(e));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},s.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},s.prototype.setup=function(){var t=this.viewport(),i=this.options.responsive,n=-1,s=null;i?(e.each(i,(function(e){e<=t&&e>n&&(n=Number(e))})),"function"==typeof(s=e.extend({},this.options,i[n])).stagePadding&&(s.stagePadding=s.stagePadding()),delete s.responsive,s.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):s=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:s}}),this._breakpoint=n,this.settings=s,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},s.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},s.prototype.prepare=function(t){var i=this.trigger("prepare",{content:t});return i.data||(i.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:i.data}),i.data},s.prototype.update=function(){for(var t=0,i=this._pipe.length,n=e.proxy((function(e){return this[e]}),this._invalidated),s={};t<i;)(this._invalidated.all||e.grep(this._pipe[t].filter,n).length>0)&&this._pipe[t].run(s),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},s.prototype.width=function(e){switch(e=e||s.Width.Default){case s.Width.Inner:case s.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},s.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},s.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},s.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},s.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",(function(){return!1}))),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},s.prototype.onDragStart=function(t){var n=null;3!==t.which&&(e.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(e.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(t),e(i).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(i).one("mousemove.owl.core touchmove.owl.core",e.proxy((function(t){var n=this.difference(this._drag.pointer,this.pointer(t));e(i).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))}),this)))},s.prototype.onDragMove=function(e){var t=null,i=null,n=null,s=this.difference(this._drag.pointer,this.pointer(e)),o=this.difference(this._drag.stage.start,s);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-t,o.x=((o.x-t)%i+i)%i+t):(t=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*s.x/5:0,o.x=Math.max(Math.min(o.x,t+n),i+n)),this._drag.stage.current=o,this.animate(o.x))},s.prototype.onDragEnd=function(t){var n=this.difference(this._drag.pointer,this.pointer(t)),s=this._drag.stage.current,o=n.x>0^this.settings.rtl?"left":"right";e(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(s.x,0!==n.x?o:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=o,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",(function(){return!1}))),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},s.prototype.closest=function(t,i){var s=-1,o=this.width(),a=this.coordinates();return this.settings.freeDrag||e.each(a,e.proxy((function(e,r){return"left"===i&&t>r-30&&t<r+30?s=e:"right"===i&&t>r-o-30&&t<r-o+30?s=e+1:this.op(t,"<",r)&&this.op(t,">",a[e+1]!==n?a[e+1]:r-o)&&(s="left"===i?e+1:e),-1===s}),this)),this.settings.loop||(this.op(t,">",a[this.minimum()])?s=t=this.minimum():this.op(t,"<",a[this.maximum()])&&(s=t=this.maximum())),s},s.prototype.animate=function(t){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},s.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},s.prototype.current=function(e){if(e===n)return this._current;if(0===this._items.length)return n;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==n&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},s.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,(function(e,t){return t}))},s.prototype.reset=function(e){(e=this.normalize(e))!==n&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},s.prototype.normalize=function(e,t){var i=this._items.length,s=t?0:this._clones.length;return!this.isNumeric(e)||i<1?e=n:(e<0||e>=i+s)&&(e=((e-s/2)%i+i)%i+s/2),e},s.prototype.relative=function(e){return e-=this._clones.length/2,this.normalize(e,!0)},s.prototype.maximum=function(e){var t,i,n,s=this.settings,o=this._coordinates.length;if(s.loop)o=this._clones.length/2+this._items.length-1;else if(s.autoWidth||s.merge){if(t=this._items.length)for(i=this._items[--t].width(),n=this.$element.width();t--&&!((i+=this._items[t].width()+this.settings.margin)>n););o=t+1}else o=s.center?this._items.length-1:this._items.length-s.items;return e&&(o-=this._clones.length/2),Math.max(o,0)},s.prototype.minimum=function(e){return e?0:this._clones.length/2},s.prototype.items=function(e){return e===n?this._items.slice():(e=this.normalize(e,!0),this._items[e])},s.prototype.mergers=function(e){return e===n?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},s.prototype.clones=function(t){var i=this._clones.length/2,s=i+this._items.length,o=function(e){return e%2==0?s+e/2:i-(e+1)/2};return t===n?e.map(this._clones,(function(e,t){return o(t)})):e.map(this._clones,(function(e,i){return e===t?o(i):null}))},s.prototype.speed=function(e){return e!==n&&(this._speed=e),this._speed},s.prototype.coordinates=function(t){var i,s=1,o=t-1;return t===n?e.map(this._coordinates,e.proxy((function(e,t){return this.coordinates(t)}),this)):(this.settings.center?(this.settings.rtl&&(s=-1,o=t+1),i=this._coordinates[t],i+=(this.width()-i+(this._coordinates[o]||0))/2*s):i=this._coordinates[o]||0,i=Math.ceil(i))},s.prototype.duration=function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},s.prototype.to=function(e,t){var i=this.current(),n=null,s=e-this.relative(i),o=(s>0)-(s<0),a=this._items.length,r=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(s)>a/2&&(s+=-1*o*a),(n=(((e=i+s)-r)%a+a)%a+r)!==e&&n-s<=l&&n-s>0&&(i=n-s,e=n,this.reset(i))):e=this.settings.rewind?(e%(l+=1)+l)%l:Math.max(r,Math.min(l,e)),this.speed(this.duration(i,e,t)),this.current(e),this.isVisible()&&this.update()},s.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},s.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},s.prototype.onTransitionEnd=function(e){if(e!==n&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},s.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==t?n=e(this.options.responsiveBaseElement).width():t.innerWidth?n=t.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},s.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter((function(){return 1===this.nodeType})).each(e.proxy((function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)}),this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},s.prototype.add=function(t,i){var s=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:i}),t=this.prepare(t),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[i-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(t),this._items.splice(i,0,t),this._mergers.splice(i,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[s]&&this.reset(this._items[s].index()),this.invalidate("items"),this.trigger("added",{content:t,position:i})},s.prototype.remove=function(e){(e=this.normalize(e,!0))!==n&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},s.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy((function(t,i){this.enter("pre-loading"),i=e(i),e(new Image).one("load",e.proxy((function(e){i.attr("src",e.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()}),this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))}),this))},s.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(i).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},s.prototype.op=function(e,t,i){var n=this.settings.rtl;switch(t){case"<":return n?e>i:e<i;case">":return n?e<i:e>i;case">=":return n?e<=i:e>=i;case"<=":return n?e>=i:e<=i}},s.prototype.on=function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},s.prototype.off=function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)},s.prototype.trigger=function(t,i,n,o,a){var r={item:{count:this._items.length,index:this.current()}},l=e.camelCase(e.grep(["on",t,n],(function(e){return e})).join("-").toLowerCase()),c=e.Event([t,"owl",n||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},r,i));return this._supress[t]||(e.each(this._plugins,(function(e,t){t.onTrigger&&t.onTrigger(c)})),this.register({type:s.Type.Event,name:t}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},s.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]===n&&(this._states.current[t]=0),this._states.current[t]++}),this))},s.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]--}),this))},s.prototype.register=function(t){if(t.type===s.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var i=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!i||!i.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:i.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===s.Type.State&&(this._states.tags[t.name]?this._states.tags[t.name]=this._states.tags[t.name].concat(t.tags):this._states.tags[t.name]=t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy((function(i,n){return e.inArray(i,this._states.tags[t.name])===n}),this)))},s.prototype.suppress=function(t){e.each(t,e.proxy((function(e,t){this._supress[t]=!0}),this))},s.prototype.release=function(t){e.each(t,e.proxy((function(e,t){delete this._supress[t]}),this))},s.prototype.pointer=function(e){var i={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i},s.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},s.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=e(this),o=n.data("owl.carousel");o||(o=new s(this,"object"==typeof t&&t),n.data("owl.carousel",o),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],(function(t,i){o.register({type:s.Type.Event,name:i}),o.$element.on(i+".owl.carousel.core",e.proxy((function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([i]),o[i].apply(this,[].slice.call(arguments,1)),this.release([i]))}),o))}))),"string"==typeof t&&"_"!==t.charAt(0)&&o[t].apply(o,i)}))},e.fn.owlCarousel.Constructor=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers)};s.Defaults={autoRefresh:!0,autoRefreshInterval:500},s.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},s.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},s.prototype.destroy=function(){var e,i;for(e in t.clearInterval(this._interval),this._handlers)this._core.$element.off(e,this._handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy((function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var i=this._core.settings,n=i.center&&Math.ceil(i.items/2)||i.items,s=i.center&&-1*n||0,o=(t.property&&undefined!==t.property.value?t.property.value:this._core.current())+s,a=this._core.clones().length,r=e.proxy((function(e,t){this.load(t)}),this);for(i.lazyLoadEager>0&&(n+=i.lazyLoadEager,i.loop&&(o-=i.lazyLoadEager,n++));s++<n;)this.load(a/2+this._core.relative(o)),a&&e.each(this._core.clones(this._core.relative(o)),r),o++}}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers)};s.Defaults={lazyLoad:!1,lazyLoadEager:0},s.prototype.load=function(i){var n=this._core.$stage.children().eq(i),s=n&&n.find(".owl-lazy");!s||e.inArray(n.get(0),this._loaded)>-1||(s.each(e.proxy((function(i,n){var s,o=e(n),a=t.devicePixelRatio>1&&o.attr("data-src-retina")||o.attr("data-src")||o.attr("data-srcset");this._core.trigger("load",{element:o,url:a},"lazy"),o.is("img")?o.one("load.owl.lazy",e.proxy((function(){o.css("opacity",1),this._core.trigger("loaded",{element:o,url:a},"lazy")}),this)).attr("src",a):o.is("source")?o.one("load.owl.lazy",e.proxy((function(){this._core.trigger("loaded",{element:o,url:a},"lazy")}),this)).attr("srcset",a):((s=new Image).onload=e.proxy((function(){o.css({"background-image":'url("'+a+'")',opacity:"1"}),this._core.trigger("loaded",{element:o,url:a},"lazy")}),this),s.src=a)}),this)),this._loaded.push(n.get(0)))},s.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(i){this._core=i,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&this.update()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&"position"===e.property.name&&this.update()}),this),"loaded.owl.lazy":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var n=this;t.omload=function(){n._core.settings.autoHeight&&n.update()},e(t).on("resize",(function(){n._core.settings.autoHeight&&(null!=n._intervalId&&clearTimeout(n._intervalId),n._intervalId=setTimeout((function(){n.update()}),250))}))};s.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},s.prototype.update=function(){var t=this._core._current,i=t+this._core.settings.items,n=this._core.settings.lazyLoad,s=this._core.$stage.children().toArray().slice(t,i),o=[],a=0;e.each(s,(function(t,i){o.push(e(i).height())})),(a=Math.max.apply(null,o))<=1&&n&&this._previousHeight&&(a=this._previousHeight),this._previousHeight=a,this._core.$stage.parent().height(a).addClass(this._core.settings.autoHeightClass)},s.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})}),this),"resize.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy((function(e){this.play(e)}),this))};s.Defaults={video:!1,videoHeight:!1,videoWidth:!1},s.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",n=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),s=e.attr("data-width")||this._core.settings.videoWidth,o=e.attr("data-height")||this._core.settings.videoHeight,a=e.attr("href");if(!a)throw new Error("Missing video URL.");if((n=a.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[a]={type:i,id:n,width:s,height:o},t.attr("data-video",a),this.thumbnail(e,this._videos[a])},s.prototype.thumbnail=function(t,i){var n,s,o=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",a=t.find("img"),r="src",l="",c=this._core.settings,d=function(i){'<div class="owl-video-play-icon"></div>',n=c.lazyLoad?e("<div/>",{class:"owl-video-tn "+l,srcType:i}):e("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),t.after(n),t.after('<div class="owl-video-play-icon"></div>')};if(t.wrap(e("<div/>",{class:"owl-video-wrapper",style:o})),this._core.settings.lazyLoad&&(r="data-src",l="owl-lazy"),a.length)return d(a.attr(r)),a.remove(),!1;"youtube"===i.type?(s="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",d(s)):"vimeo"===i.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){s=e[0].thumbnail_large,d(s)}}):"vzaar"===i.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){s=e.framegrab_url,d(s)}})},s.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},s.prototype.play=function(t){var i,n=e(t.target).closest("."+this._core.settings.itemClass),s=this._videos[n.attr("data-video")],o=s.width||"100%",a=s.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=e('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",a),i.attr("width",o),"youtube"===s.type?i.attr("src","//www.youtube.com/embed/"+s.id+"?autoplay=1&rel=0&v="+s.id):"vimeo"===s.type?i.attr("src","//player.vimeo.com/video/"+s.id+"?autoplay=1"):"vzaar"===s.type&&i.attr("src","//view.vzaar.com/"+s.id+"/player?autoplay=true"),e(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},s.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},s.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this.core=t,this.core.options=e.extend({},s.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)}),this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy((function(e){e.namespace&&(this.swapping="translated"==e.type)}),this),"translate.owl.carousel":e.proxy((function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()}),this)},this.core.$element.on(this.handlers)};s.Defaults={animateOut:!1,animateIn:!1},s.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,i=e.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),s=this.core.$stage.children().eq(this.next),o=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(e.support.animation.end,i).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(a)),o&&s.one(e.support.animation.end,i).addClass("animated owl-animated-in").addClass(o))}},s.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},s.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":e.proxy((function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._paused&&(this._time=0)}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoplay&&this.play()}),this),"play.owl.autoplay":e.proxy((function(e,t,i){e.namespace&&this.play(t,i)}),this),"stop.owl.autoplay":e.proxy((function(e){e.namespace&&this.stop()}),this),"mouseover.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"mouseleave.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()}),this),"touchstart.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"touchend.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this.play()}),this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},s.Defaults,this._core.options)};s.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},s.prototype._next=function(n){this._call=t.setTimeout(e.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},s.prototype.read=function(){return(new Date).getTime()-this._time},s.prototype.play=function(i,n){var s;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,s=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):t.clearTimeout(this._call),this._time+=this.read()%i-s,this._timeout=i,this._call=t.setTimeout(e.proxy(this._next,this,n),i-s)},s.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,t.clearTimeout(this._call),this._core.leave("rotating"))},s.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,t.clearTimeout(this._call))},s.prototype.destroy=function(){var e,t;for(e in this.stop(),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var s=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy((function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")}),this),"added.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())}),this),"remove.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&this.draw()}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this.$element.on(this._handlers)};s.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},s.prototype.initialize=function(){var t,i=this._core.settings;for(t in this._controls.$relative=(i.navContainer?e(i.navContainer):e("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy((function(e){this.prev(i.navSpeed)}),this)),this._controls.$next=e("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy((function(e){this.next(i.navSpeed)}),this)),i.dotsData||(this._templates=[e('<button role="button">').addClass(i.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?e(i.dotsContainer):e("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",e.proxy((function(t){var n=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(n,i.dotsSpeed)}),this)),this._overrides)this._core[t]=e.proxy(this[t],this)},s.prototype.destroy=function(){var e,t,i,n,s;for(e in s=this._core.settings,this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)"$relative"===t&&s.navContainer?this._controls[t].html(""):this._controls[t].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},s.prototype.update=function(){var e,t,i=this._core.clones().length/2,n=i+this._core.items().length,s=this._core.maximum(!0),o=this._core.settings,a=o.center||o.autoWidth||o.dotsData?1:o.dotsEach||o.items;if("page"!==o.slideBy&&(o.slideBy=Math.min(o.slideBy,o.items)),o.dots||"page"==o.slideBy)for(this._pages=[],e=i,t=0,0;e<n;e++){if(t>=a||0===t){if(this._pages.push({start:Math.min(s,e-i),end:e-i+a-1}),Math.min(s,e-i)===s)break;t=0}t+=this._core.mergers(this._core.relative(e))}},s.prototype.draw=function(){var t,i=this._core.settings,n=this._core.items().length<=i.items,s=this._core.relative(this._core.current()),o=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!o&&s<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!o&&s>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(t=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},s.prototype.onTrigger=function(t){var i=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},s.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy((function(e,i){return e.start<=t&&e.end>=t}),this)).pop()},s.prototype.getPosition=function(t){var i,n,s=this._core.settings;return"page"==s.slideBy?(i=e.inArray(this.current(),this._pages),n=this._pages.length,t?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,t?i+=s.slideBy:i-=s.slideBy),i},s.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},s.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},s.prototype.to=function(t,i,n){var s;!n&&this._pages.length?(s=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%s+s)%s].start,i)):e.proxy(this._overrides.to,this._core)(t,i)},e.fn.owlCarousel.Constructor.Plugins.Navigation=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var s=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy((function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var i=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=t.content}}),this),"changed.owl.carousel":e.proxy((function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),s=e.map(this._hashes,(function(e,t){return e===n?t:null})).join();if(!s||t.location.hash.slice(1)===s)return;t.location.hash=s}}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy((function(e){var i=t.location.hash.substring(1),n=this._core.$stage.children(),s=this._hashes[i]&&n.index(this._hashes[i]);undefined!==s&&s!==this._core.current()&&this._core.to(this._core.relative(s),!1,!0)}),this))};s.Defaults={URLhashListener:!1},s.prototype.destroy=function(){var i,n;for(i in e(t).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=e("<support>").get(0).style,o="Webkit Moz O ms".split(" "),a={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},r=function(){return!!d("transform")},l=function(){return!!d("perspective")},c=function(){return!!d("animation")};function d(t,i){var a=!1,r=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+o.join(r+" ")+r).split(" "),(function(e,t){if(s[t]!==n)return a=!i||t,!1})),a}function h(e){return d(e,!0)}(function(){return!!d("transition")})()&&(e.support.transition=new String(h("transition")),e.support.transition.end=a.transition.end[e.support.transition]),c()&&(e.support.animation=new String(h("animation")),e.support.animation.end=a.animation.end[e.support.animation]),r()&&(e.support.transform=new String(h("transform")),e.support.transform3d=l())}(window.Zepto||window.jQuery,window,document),function(e){"use strict";var t="selectric",i=".sl",n={onChange:function(t){e(t).trigger("change")},maxHeight:400,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,customClass:{placeholder:"placeholder",prefix:t,camelCase:!1,overwrite:!0},optionsItemBuilder:"{text}",labelBuilder:"{text}"},s={add:function(e,t,i){this[e]||(this[e]={}),this[e][t]=i},remove:function(e,t){delete this[e][t]}},o={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),i=t.length;i--;)e=e.toLowerCase().replace(RegExp("["+t[i]+"]","g"),"aeiouncy".charAt(i));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,(function(e,i,n){return n&&t[1]?t[1][n]:t[i]}))},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(i,n){var a=n.element,r=n.options["on"+i];e.isFunction(r)&&r.call(a,a,n),s[i]&&e.each(s[i],(function(){this.call(a,a,n)})),e(a).trigger(t+"-"+o.toDash(i),n)}},a=e(document),r=e(window),l=function(s,l){var c,d,h,u,p,f,m,g,v,y,b,_,w,x,C,k=this,$=e(s),T=!1,S=!1,M=/android|ip(hone|od|ad)/i.test(navigator.userAgent),P=$.prop("tabindex");function E(){k.items=[];var n=$.children(),s='<div class="'+t+'-list">',a=$.find("option"),r=a.index(a.filter(":selected")),l=0;v=g=~r?r:0,(w=n.length)&&(n.each((function(){var i=e(this);if(i.is("optgroup")){var n=i.prop("disabled"),a=i.children();s+=o.format('<div class="{1}"><li class="{2}">{3}</li>',e.trim([k.classes.group,n?"disabled":"",i.prop("class")].join(" ")),k.classes.grouplabel,i.prop("label")),n&&a.prop("disabled",!0),a.each(r),s+="</div>"}else r.call(i);function r(){var i=e(this),n=i.html(),a=i.prop("disabled"),r=k.options.optionsItemBuilder;k.items[l]={element:i,value:i.val(),text:n,slug:o.replaceDiacritics(n),disabled:a},s+=o.format('<li class="'+t+"-list-option"+(!i.val()||""===i.val()||void 0===i.val()||i.data("placeholder")?" placeholder ":" ")+'{2}" data-index="{1}">{3}</li>',l,e.trim([l==v?"selected":"",l==w-1?"last":"",a?"disabled":""].join(" ")),e.isFunction(r)?r(k.items[l],i,l):o.format(r,k.items[l])),l++}})),d.append(h.html(s+"</div>")),p.html(e.isFunction(C)?C(k.items[v]):o.format(C,k.items[v]))),u.add($).add(f).add(c).off(i),f.prop("class",[k.classes.wrapper,k.options.customClass.overwrite?$.prop("class").replace(/\S+/g,k.options.customClass.prefix+"-$&"):$.prop("class"),k.options.responsive?k.classes.responsive:""].join(" ")),$.prop("disabled")?(f.addClass(k.classes.disabled),c.prop("disabled",!0)):(S=!0,f.removeClass(k.classes.disabled).on("mouseenter.sl mouseleave"+i,(function(t){e(this).toggleClass(k.classes.hover),k.options.openOnHover&&(clearTimeout(k.closeTimer),"mouseleave"==t.type?k.closeTimer=setTimeout(L,k.options.hoverIntentTimeout):O())})),u.on("click"+i,(function(e){T?L():O(e)})),c.prop({tabindex:P,disabled:!1}).on("keypress"+i,j).on("keydown"+i,(function(e){j(e),clearTimeout(k.resetStr),k.resetStr=setTimeout((function(){c.val("")}),k.options.keySearchTimeout);var t=e.keyCode||e.which;if(t>36&&t<41){if(!k.options.allowWrap&&(t<39&&0==g||t>38&&g+1==k.items.length))return;I(o[(t<39?"previous":"next")+"EnabledItem"](k.items,g))}})).on("focusin"+i,(function(e){c.one("blur",(function(){c.blur()})),T||O(e)})).on("oninput"in c[0]?"input":"keyup",(function(){c.val().length&&e.each(k.items,(function(e,t){if(RegExp("^"+c.val(),"i").test(t.slug)&&!t.disabled)return I(e),!1}))})),$.prop("tabindex",!1),m=e("li",d.removeAttr("style")).on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return I(e(this).data("index"),!0),!1}}).filter("[data-index]")),o.triggerCallback("Init",k)}function D(){o.triggerCallback("Refresh",k),E()}function j(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),I(g,!0))}function O(n){var s,r,l,h;o.triggerCallback("BeforeOpen",k),n&&(n.preventDefault(),n.stopPropagation()),S&&(s=d.closest(":visible").children(":hidden").addClass(k.classes.tempshow),r=k.options.maxHeight,l=d.outerWidth(),h=u.outerWidth()-(l-d.width()),!k.options.expandToItemText||h>l?_=h:(d.css("overflow","scroll"),f.width(9e4),_=d.width(),d.css("overflow",""),f.width("")),d.width(_).height()>r&&d.height(r),s.removeClass(k.classes.tempshow),e("."+k.classes.hideselect,"."+k.classes.open).children()[t]("close"),T=!0,y=d.outerHeight(),b=d.height(),f.addClass(k.classes.open),c.val("").is(":focus")||c.trigger("focus"),a.on("click"+i,L).on("scroll"+i,A),A(),k.options.preventWindowScroll&&a.on("mousewheel.sl DOMMouseScroll"+i,"."+k.classes.scroll,(function(t){var i=t.originalEvent,n=e(this).scrollTop(),s=0;"detail"in i&&(s=-1*i.detail),"wheelDelta"in i&&(s=i.wheelDelta),"wheelDeltaY"in i&&(s=i.wheelDeltaY),"deltaY"in i&&(s=-1*i.deltaY),(n==this.scrollHeight-b&&s<0||0==n&&s>0)&&t.preventDefault()})),H(g),o.triggerCallback("Open",k))}function A(){f.toggleClass(k.classes.above,f.offset().top+f.outerHeight()+y>r.scrollTop()+r.height())}function L(t){if(o.triggerCallback("BeforeClose",k),v!=g){o.triggerCallback("BeforeChange",k);var n=k.items[g].text;$.prop("selectedIndex",v=g).data("value",n),p.html(e.isFunction(C)?C(k.items[g]):o.format(C,k.items[g])),o.triggerCallback("Change",k)}void 0!==t&&e(t.target).is("input")||(a.off(i),f.removeClass(k.classes.open)),T=!1,o.triggerCallback("Close",k)}function I(e,t){null!=e&&(k.items[e].disabled||(m.removeClass("selected").eq(g=e).addClass("selected"),H(e),t&&L()))}function H(e){var t=m.eq(e).outerHeight(),i=m[e].offsetTop,n=h.scrollTop(),s=i+2*t;h.scrollTop(s>n+y?s-y:i-t<n?i-t:n)}function R(e){S&&(d.add(u).add(c).remove(),!e&&$.removeData(t).removeData("value"),$.prop("tabindex",P).off(i).off(x).unwrap().unwrap(),S=!1)}!function t(i){if(k.options=e.extend(!0,{},n,k.options,i),k.classes={},k.element=s,o.triggerCallback("BeforeInit",k),k.options.disableOnMobile&&M)k.disableOnMobile=!0;else{R(!0);var a=k.options.customClass,r="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll Group GroupLabel".split(" "),l=$.width();e.each(r,(function(e,t){var i=a.prefix+"-"+t;k.classes[t.toLowerCase()]=a.camelCase?i:o.toDash(i)})),c=e("<input/>",{class:k.classes.input,readonly:M}),d=e("<div/>",{class:k.classes.items,tabindex:-1}),h=e("<div/>",{class:k.classes.scroll}),u=e("<div/>",{class:a.prefix,html:k.options.arrowButtonMarkup}),p=e('<div class="label"/>'),f=$.wrap("<div>").parent().append(u.prepend(p),d),x={open:O,close:L,destroy:R,refresh:D,init:t},$.on(x).wrap('<div class="'+k.classes.hideselect+'">'),e.extend(k,x),C=k.options.labelBuilder,k.options.inheritOriginalWidth&&l>0&&f.width(l),E()}}(l)};e.fn[t]=function(i){return this.each((function(){var n=e.data(this,t);n&&!n.disableOnMobile?""+i===i&&n[i]?n[i]():n.init(i):e.data(this,t,new l(this,i))}))},e.fn[t].hooks=s}(jQuery),
  /*! jQuery UI - v1.12.1 - 2016-10-28
   * http://jqueryui.com
   * Includes: widget.js, data.js, keycode.js, scroll-parent.js, widgets/draggable.js, widgets/droppable.js, widgets/mouse.js, widgets/slider.js
   * Copyright jQuery Foundation and other contributors; Licensed MIT */
  function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){e.ui=e.ui||{};e.ui.version="1.12.1";
    /*!
         * jQuery UI Widget 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */var t,i=0,n=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{(n=e._data(s,"events"))&&n.remove&&e(s).triggerHandler("remove")}catch(e){}t(i)}),e.widget=function(t,i,n){var s,o,a,r={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr.pseudos[c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},s=e[l][t],o=e[l][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(a=new i).options=e.widget.extend({},a.options),e.each(n,(function(t,n){e.isFunction(n)?r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function s(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}():r[t]=n})),o.prototype=e.widget.extend(a,{widgetEventPrefix:s&&a.widgetEventPrefix||t},r,{constructor:o,namespace:l,widgetName:t,widgetFullName:c}),s?(e.each(s._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)})),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,o=n.call(arguments,1),a=0,r=o.length;a<r;a++)for(i in o[a])s=o[a][i],o[a].hasOwnProperty(i)&&void 0!==s&&(e.isPlainObject(s)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):t[i]=s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,r=n.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each((function(){var i,n=e.data(this,s);return"instance"===o?(l=n,!1):n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(r.length&&(o=e.widget.extend.apply(null,[o].concat(r))),this.each((function(){var t=e.data(this,s);t?(t.option(o||{}),t._init&&t._init()):e.data(this,s,new i(o,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,s,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},n=t.split("."),t=n.shift(),n.length){for(s=a[t]=e.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(t=n.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,s;for(i in t)s=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&s&&s.length&&(n=e(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function s(s,o){var a,r;for(r=0;r<s.length;r++)a=n.classesElementLookup[s[r]]||e(),a=t.add?e(e.uniqueSort(a.get().concat(t.element.get()))):e(a.not(t.element).get()),n.classesElementLookup[s[r]]=a,i.push(s[r]),o&&t.classes[s[r]]&&i.push(t.classes[s[r]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&s(t.keys.match(/\S+/g)||[],!0),t.extra&&s(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,s){-1!==e.inArray(t.target,s)&&(i.classesElementLookup[n]=e(s.not(t.target).get()))}))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof e||null===e,o={extra:s?t:i,keys:s?e:t,element:s?this.element:e,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,(function(n,a){function r(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,d=l[2];d?s.on(c,d,r):i.on(c,r)}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var s,o,a=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){var a;"string"==typeof s&&(s={effect:s});var r=s?!0===s||"number"==typeof s?i:s.effect||i:t;"number"==typeof(s=s||{})&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&e.effects&&e.effects.effect[r]?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,o):n.queue((function(i){e(this)[t](),o&&o.call(n[0]),i()}))}}));e.widget,e.extend(e.expr.pseudos,{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])}}),e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var t=e(this);return(!n||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==i&&o.length?o:e(this[0].ownerDocument||document)},e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
    /*!
         * jQuery UI :data 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */var s=!1;e(document).on("mouseup",(function(){s=!1}));e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,o=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i,n){var s,o=e.plugins[t];if(o&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)e.options[o[s][0]]&&o[s][1].apply(e.element,i)}},e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};
    /*!
         * jQuery UI Draggable 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
    e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",t)&&i._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),s=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options,o=this.document[0];this.relativeContainer=null,s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),(n=(i=e(s.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=s.containment:this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,s,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-a.grid[1]:s+a.grid[1]:s,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var s=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each((function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,s))}))},stop:function(t,i,n){var s=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,(function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,s))}))},drag:function(t,i,n){e.each(n.sortables,(function(){var s=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(s=!0,e.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(s=!1),s}))),s?(o.isOver||(o.isOver=1,n._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",t),n.dropped=o.element,e.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(t),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var s=e("body"),o=n.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(t,i,n){var s=n.options;s._cursor&&e("body").css("cursor",s._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var s=e(i.helper),o=n.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(t,i,n){var s=n.options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var s=n.options,o=!1,a=n.scrollParentNotHidden[0],r=n.document[0];a!==r&&"HTML"!==a.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+a.offsetHeight-t.pageY<s.scrollSensitivity?a.scrollTop=o=a.scrollTop+s.scrollSpeed:t.pageY-n.overflowOffset.top<s.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+a.offsetWidth-t.pageX<s.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+s.scrollSpeed:t.pageX-n.overflowOffset.left<s.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(r).scrollTop()<s.scrollSensitivity?o=e(r).scrollTop(e(r).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<s.scrollSensitivity&&(o=e(r).scrollTop(e(r).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(r).scrollLeft()<s.scrollSensitivity?o=e(r).scrollLeft(e(r).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<s.scrollSensitivity&&(o=e(r).scrollLeft(e(r).scrollLeft()+s.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var s=n.options;n.snapElements=[],e(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each((function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,i,n){var s,o,a,r,l,c,d,h,u,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)c=(l=n.snapElements[u].left-n.margins.left)+n.snapElements[u].width,h=(d=n.snapElements[u].top-n.margins.top)+n.snapElements[u].height,v<l-m||g>c+m||b<d-m||y>h+m||!e.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(d-b)<=m,o=Math.abs(h-y)<=m,a=Math.abs(l-v)<=m,r=Math.abs(c-g)<=m,s&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=s||o||a||r,"outer"!==f.snapMode&&(s=Math.abs(d-y)<=m,o=Math.abs(h-b)<=m,a=Math.abs(l-g)<=m,r=Math.abs(c-v)<=m,s&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(s||o||a||r||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=s||o||a||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var s,o=n.options,a=e.makeArray(e(o.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));a.length&&(s=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each((function(t){e(this).css("zIndex",s+t)})),this.css("zIndex",s+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var s=e(i.helper),o=n.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(t,i,n){var s=n.options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}});e.ui.draggable;
    /*!
         * jQuery UI Droppable 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&o(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t))return s=!0,!1})),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var o=e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,s){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,r=o+t.helperProportions.width,l=a+t.helperProportions.height,c=i.offset.left,d=i.offset.top,h=c+i.proportions().width,u=d+i.proportions().height;switch(n){case"fit":return c<=o&&r<=h&&d<=a&&l<=u;case"intersect":return c<o+t.helperProportions.width/2&&r-t.helperProportions.width/2<h&&d<a+t.helperProportions.height/2&&l-t.helperProportions.height/2<u;case"pointer":return e(s.pageY,d,i.proportions().height)&&e(s.pageX,c,i.proportions().width);case"touch":return(a>=d&&a<=u||l>=d&&l<=u||a<d&&l>u)&&(o>=c&&o<=h||r>=c&&r<=h||o<c&&r>h);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,s,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(s=0;s<r.length;s++)if(r[s]===o[n].element[0]){o[n].proportions().height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===a&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&o(t,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),n},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}))},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,a,r=o(t,this,this.options.tolerance,i),l=!r&&this.isover?"isout":r&&!this.isover?"isover":null;l&&(this.options.greedy&&(s=this.options.scope,(a=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===s}))).length&&((n=e(a[0]).droppable("instance")).greedyChild="isover"===l)),n&&"isover"===l&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,i),n&&"isout"===l&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}}))},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});e.ui.droppable,e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle"),o=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;t<i;t++)o.push("<span tabindex='0'></span>");this.handles=s.add(e(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,a,r,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var i=Math.abs(n-c.values(t));(s>i||s===i&&(t===c._lastChangedValue||c.values(t)===d.min))&&(s=i,o=e(this),a=t)})),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),r=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-o.width()/2,top:t.pageY-r.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,s=this.value(),o=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),s=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(n,i):Math.max(n,i)),o[t]=i),i!==s&&!1!==this._trigger("slide",e,this._uiHash(t,i,o))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),this._super(t,i),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=s-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,n,s,o,a=this.options.range,r=this.options,l=this,c=!this._animateOff&&r.animate,d={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i})):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(t){var i,n,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(s=this.options.step,i=n=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}});
    /*!
         * jQuery UI Slider 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */})),
  /*!
   * jQuery UI Touch Punch 0.2.3
   *
   * Copyright 2011–2014, Dave Furfero
   * Dual licensed under the MIT or GPL Version 2 licenses.
   *
   * Depends:
   *  jquery.ui.widget.js
   *  jquery.ui.mouse.js
   */
  function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,i=e.ui.mouse.prototype,n=i._mouseInit,s=i._mouseDestroy;i._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,o(e,"mouseover"),o(e,"mousemove"),o(e,"mousedown"))},i._touchMove=function(e){t&&(this._touchMoved=!0,o(e,"mousemove"))},i._touchEnd=function(e){t&&(o(e,"mouseup"),o(e,"mouseout"),this._touchMoved||o(e,"click"),t=!1)},i._mouseInit=function(){var t=this;t.element.on({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),n.call(t)},i._mouseDestroy=function(){var t=this;t.element.off({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)}}function o(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}}(jQuery),function(e,t,i){"use strict";function n(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function s(e,t,i){var n,s;for(n in i)i.hasOwnProperty(n)&&(s=n.replace(/ |$/g,t.eventNamespace),e.on(s,i[n]))}function o(e,t,i){s(e,i,{focus:function(){t.addClass(i.focusClass)},blur:function(){t.removeClass(i.focusClass),t.removeClass(i.activeClass)},mouseenter:function(){t.addClass(i.hoverClass)},mouseleave:function(){t.removeClass(i.hoverClass),t.removeClass(i.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(i.activeClass)},"mouseup touchend":function(){t.removeClass(i.activeClass)}})}function a(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function r(e,t,i){i?e.addClass(t):e.removeClass(t)}function l(e,t,i){var n="checked",s=t.is(":"+n);t.prop?t.prop(n,s):s?t.attr(n,n):t.removeAttr(n),r(e,i.checkedClass,s)}function c(e,t,i){r(e,i.disabledClass,t.is(":disabled"))}function d(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function h(e,i,s){var o,a,r;return s||(s={}),o=(s=t.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},s)).isLabel?t("<label />"):t("<div />"),a=t("<span />"),i.autoHide&&e.is(":hidden")&&"none"===e.css("display")&&o.hide(),s.divClass&&o.addClass(s.divClass),i.wrapperClass&&o.addClass(i.wrapperClass),s.spanClass&&a.addClass(s.spanClass),r=n(e,"id"),i.useID&&r&&n(o,"id",i.idPrefix+"-"+r),s.spanHtml&&a.html(s.spanHtml),o=d(e,o,s.divWrap),a=d(e,a,s.spanWrap),c(o,e,i),{div:o,span:a}}function u(e,i){return i.wrapperClass?d(e,t("<span />").addClass(i.wrapperClass),"wrap"):null}function p(){return navigator.cpuClass&&!navigator.product}function f(e){var t;return!!e[0].multiple||!(!(t=n(e,"size"))||t<=1)}function m(){return!1}function g(e,t){var i="none";s(e,t,{"selectstart dragstart mousedown":m}),e.css({MozUserSelect:i,msUserSelect:i,webkitUserSelect:i,userSelect:i})}function v(e,t,i){var n=e.val();n=""===n?i.fileDefaultHtml:(n=n.split(/[\/\\]+/))[n.length-1],t.text(n)}function y(e,t,i){var n,s;for(n=[],e.each((function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])})),i();n.length;)(s=n.pop()).el.style[s.name]=s.old}function b(e,t){var i;(i=e.parents()).push(e[0]),y(i=i.not(":visible"),{visibility:"hidden",display:"block",position:"absolute"},t)}function _(e,t){return function(){e.unwrap().unwrap().off(t.eventNamespace)}}var w=!0,x=!1,C=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(i,r){var l,d,u,p,f;return d=r.submitDefaultHtml,i.is(":reset")&&(d=r.resetDefaultHtml),p=i.is("a, button")?function(){return i.html()||d}:function(){return((e=n(i,"value"))?t("<span />").text(e).html():"")||d;var e},u=h(i,r,{divClass:r.buttonClass,spanHtml:p()}),l=u.div,o(i,l,r),f=!1,s(l,r,{"click touchend":function(){var t,s,o,a;f||i.is(":disabled")||(f=!0,i[0].dispatchEvent?((t=document.createEvent("MouseEvents")).initEvent("click",!0,!0),s=i[0].dispatchEvent(t),i.is("a")&&s&&(o=n(i,"target"),a=n(i,"href"),o&&"_self"!==o?e.open(a,o):document.location.href=a)):i.click(),f=!1)}}),g(l,r),{remove:function(){return l.after(i),l.remove(),i.off(r.eventNamespace),i},update:function(){a(l,r),c(l,i,r),i.detach(),u.span.html(p()).append(i)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,n,r;return i=h(e,t,{divClass:t.checkboxClass}),n=i.div,r=i.span,o(e,n,t),s(e,t,{"click touchend":function(){l(n,e,t),l(r,e,t)}}),l(n,e,t),l(r,e,t),{remove:_(e,t),update:function(){a(n,t),r.removeClass(t.checkedClass),l(n,e,t),l(r,e,t),c(n,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(e,i){var r,l,u,f;function m(){v(e,u,i)}return r=h(e,i,{divClass:i.fileClass,spanClass:i.fileButtonClass,spanHtml:i.fileButtonHtml,spanWrap:"after",isLabel:!0}),l=r.div,f=r.span,(u=t("<span />").html(i.fileDefaultHtml)).addClass(i.filenameClass),u=d(e,u,"after"),n(e,"size")||n(e,"size",l.width()/10),o(e,l,i),m(),p()?s(e,i,{click:function(){e.trigger("change"),setTimeout(m,0)}}):s(e,i,{change:m}),g(u,i),g(f,i),{remove:function(){return u.remove(),f.remove(),e.unwrap().off(i.eventNamespace)},update:function(){a(l,i),v(e,u,i),c(l,e,i)}}}},{match:function(e){if(e.is("input")){var t=(" "+n(e,"type")+" ").toLowerCase();return" color date datetime datetime-local email month number password search tel text time url week ".indexOf(t)>=0}return!1},apply:function(e,t){var i,s;return i=n(e,"type"),e.addClass(t.inputClass),s=u(e,t),o(e,e,t),t.inputAddTypeAsClass&&e.addClass(i),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(i),s&&e.unwrap()},update:m}}},{match:function(e){return e.is(":radio")},apply:function(e,i){var r,d,u;return r=h(e,i,{divClass:i.radioClass}),d=r.div,u=r.span,o(e,d,i),s(e,i,{"click touchend":function(){t.uniform.update(t(':radio[name="'+n(e,"name")+'"]'))}}),l(d,e,i),l(u,e,i),{remove:_(e,i),update:function(){a(d,i),l(d,e,i),l(u,e,i),c(d,e,i)}}}},{match:function(e){return!(!e.is("select")||f(e))},apply:function(e,i){var n,r,l,d;return i.selectAutoWidth&&b(e,(function(){d=e.width()})),n=h(e,i,{divClass:i.selectClass,spanHtml:(e.find(":selected:first")||e.find("option:first")).html(),spanClass:(e.find(":selected:first")||e.find("option:first")).attr("value")?null:"placeholder",spanWrap:"before"}),r=n.div,l=n.span,r.append('<svg width="9" height="9" aria-hidden="true"><use xlink:href="#chevron-bold-down"></use></svg>'),i.selectAutoWidth?b(e,(function(){y(t([l[0],r[0]]),{display:"block"},(function(){var e;e=l.outerWidth()-l.width(),r.width(d+e),l.width(d)}))})):r.addClass("fixedWidth"),o(e,r,i),s(e,i,{change:function(){l.html(e.find(":selected").html()),l.toggleClass("placeholder",!(e.find(":selected:first")||e.find("option:first")).attr("value")),r.removeClass(i.activeClass)},"click touchend":function(){var t=e.find(":selected").html();l.html()!==t&&e.trigger("change")},keyup:function(){l.html(e.find(":selected").html())}}),g(l,i),{remove:function(){return l.remove(),e.unwrap().off(i.eventNamespace),e},update:function(){i.selectAutoWidth?(t.uniform.restore(e),e.uniform(i)):(a(r,i),l.html(e.find(":selected").html()),l.toggleClass("placeholder",!(e.find(":selected:first")||e.find("option:first")).attr("value")),c(r,e,i))}}}},{match:function(e){return!(!e.is("select")||!f(e))},apply:function(e,t){var i;return e.addClass(t.selectMultiClass),i=u(e,t),o(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),i&&e.unwrap()},update:m}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var i;return e.addClass(t.textareaClass),i=u(e,t),o(e,e,t),{remove:function(){e.removeClass(t.textareaClass),i&&e.unwrap()},update:m}}}];p()&&void 0===e.XMLHttpRequest&&(w=!1),t.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},t.fn.uniform=function(i){var n=this;return i=t.extend({},t.uniform.defaults,i),x||(x=!0,function(){var i,n,s,o;return n=t('<div style="width:0;height:0;color:'+(o="rgb(120,2,153)")+'">'),t("body").append(n),s=n.get(0),i=e.getComputedStyle?e.getComputedStyle(s,"").color:(s.currentStyle||s.style||{}).color,n.remove(),i.replace(/ /g,"")!==o}()&&(w=!1)),w?(i.resetSelector&&t(i.resetSelector).mouseup((function(){e.setTimeout((function(){t.uniform.update(n)}),10)})),this.each((function(){var e,n,s,o=t(this);if(o.data("uniformed"))t.uniform.update(o);else for(e=0;e<C.length;e+=1)if((n=C[e]).match(o,i))return s=n.apply(o,i),o.data("uniformed",s),void t.uniform.elements.push(o.get(0))}))):this},t.uniform.restore=t.fn.uniform.restore=function(e){e===i&&(e=t.uniform.elements),t(e).each((function(){var e,i,n=t(this);(i=n.data("uniformed"))&&(i.remove(),(e=t.inArray(this,t.uniform.elements))>=0&&t.uniform.elements.splice(e,1),n.removeData("uniformed"))}))},t.uniform.update=t.fn.uniform.update=function(e){e===i&&(e=t.uniform.elements),t(e).each((function(){var e,i=t(this);(e=i.data("uniformed"))&&e.update(i,e.options)}))}}(this,jQuery),function(e,t,i,n){var s=['div[type="contenteditable"],input:not([type]),input[type="color"],input[type="date"],input[type="datetime"],input[type="datetime-local"],input[type="email"],input[type="file"],input[type="hidden"],input[type="month"],input[type="number"],input[type="password"],input[type="range"],input[type="search"],input[type="tel"],input[type="text"],input[type="time"],input[type="url"],input[type="week"],textarea',"select",'input[type="checkbox"],input[type="radio"]'],o=s.join(","),a={},r=function(e,i){var o={pattern:!0,conditional:!0,required:!0},r=t(this),l=r.val()||"",c=r.data("validate"),d=c!==n?a[c]:{},h=r.data("prepare")||d.prepare,u=r.data("pattern")||("regexp"==t.type(d.pattern)?d.pattern:/(?:)/),p=r.attr("data-ignore-case")||r.data("ignoreCase")||d.ignoreCase,f=r.data("validationMask")||d.mask,m=r.data("conditional")||d.conditional,g=r.data("required"),v=r.data("describedby")||d.describedby,y=r.data("description")||d.description,b=r.data("trim"),_=/^(true|)$/i;y=t.isPlainObject(y)?y:i.description[y]||{};if(g=void 0!==g&&("boolean"!=typeof g||g),b=""==b||(b||!!d.trim),_.test(b)&&(l=t.trim(l)),t.isFunction(h)?l=String(h.call(r,l)):t.isFunction(i.prepare[h])&&(l=String(i.prepare[h].call(r,l))),"regexp"!=t.type(u)&&(u=(p=!/^false$/i.test(p))?RegExp(u,"i"):RegExp(u)),m!=n)if(t.isFunction(m))o.conditional=!!m.call(r,l,i);else for(var w=m.split(/[\s\t]+/),x=0,C=w.length;x<C;x++)i.conditional.hasOwnProperty(w[x])&&!i.conditional[w[x]].call(r,l,i)&&(o.conditional=!1);if((g=_.test(g))&&(r.is(s[0]+","+s[1])?!l.length>0&&(o.required=!1):r.is(s[2])&&(r.is("[name]")?0==t('[name="'+r.prop("name")+'"]:checked').length&&(o.required=!1):o.required=r.is(":checked"))),r.is(s[0]))if(u.test(l)){if("keyup"!=e.type&&f!==n){var k=l.match(u),$=0;for(C=k.length;$<C;$++)f=f.replace(RegExp("\\$\\{"+$+"(?::`([^`]*)`)?\\}","g"),k[$]!==n?k[$]:"$1");f=f.replace(/\$\{\d+(?::`([^`]*)`)?\}/g,"$1"),u.test(f)&&r.val(f)}}else(g||l.length>0)&&(o.pattern=!1);var T=t('[id="'+v+'"]'),S=y.valid;return T.length>0&&"keyup"!=e.type&&(o.required?o.pattern?o.conditional||(S=y.conditional):S=y.pattern:S=y.required,T.html(S||"")),"function"==typeof d.each&&d.each.call(r,e,o,i),i.eachField.call(r,e,o,i),r.hasClass("js-phone-sms")&&(r.data("smscodevalid")&&!0===r.data("smscodevalid")?console.log("js-phone-sms  -  valid"):(console.log("js-phone-sms  -  INvalid"),o.required=!1)),o.required&&o.pattern&&o.conditional?(i.waiAria&&r.prop("aria-invalid",!1),"function"==typeof d.valid&&d.valid.call(r,e,o,i),i.eachValidField.call(r,e,o,i)):(i.waiAria&&r.prop("aria-invalid",!0),"function"==typeof d.invalid&&d.invalid.call(r,e,o,i),i.eachInvalidField.call(r,e,o,i)),o};t.verifyForm=function(e,i){var n=!0,s={sendForm:!0,waiAria:!0,onSubmit:!0,onKeyup:!1,onBlur:!1,onChange:!1,nameSpace:"validate",conditional:{},prepare:{},description:{},eachField:t.noop,eachInvalidField:t.noop,eachValidField:t.noop,invalid:t.noop,valid:t.noop,switching:t.noop,filter:"*",buttonSwitching:!1};return e.find(o).each((function(){var e=r.call(this,i,s);e.pattern&&e.conditional&&e.required||(n=!1)})),n},t.extend({validateExtend:function(e){return t.extend(a,e)},validateSetup:function(i){return t.extend(e,i)}}).fn.extend({validate:function(i){return i=t.extend({},e,i),t(this).validateDestroy().each((function(){var e=t(this);if(e.is("form")){e.data(name,{options:i});var n=e.find(o),a=i.namespace;e.is("[id]")&&(n=n.add('[form="'+e.prop("id")+'"]').filter(o)),n=n.filter(i.filter),i.onKeyup&&n.filter(s[0]).on("keyup."+a,(function(e){r.call(this,e,i)})),i.onBlur&&n.on("blur."+a,(function(e){r.call(this,e,i)})),i.onChange&&n.on("change."+a,(function(e){r.call(this,e,i)})),i.onSubmit&&e.on("submit."+a,(function(n){var s=!0;e.find(o).each((function(){var e=r.call(this,n,i);e.pattern&&e.conditional&&e.required||(s=!1)})),s?(i.sendForm||n.preventDefault(),t.isFunction(i.valid)&&i.valid.call(e,n,i)):(n.preventDefault(),n.stopImmediatePropagation(),t.isFunction(i.invalid)&&i.invalid.call(e,n,i))})),i.buttonSwitching&&e.on("blur."+a+" change."+a+" keyup."+a+" buttonCheckUp",o,(function(e){var n=t(this).closest("form"),s=!0;n.find(o).each((function(){var t=r.call(this,e,i);t.pattern&&t.conditional&&t.required||(s=!1)})),t.isFunction(i.switching)&&i.switching.call(n,e,i,s)}))}}))},validateDestroy:function(e){var i=t(this),n=i.data(name);if(e&&e.namespace&&i.off("blur."+e.namespace+" change."+e.namespace+" keyup."+e.namespace+" buttonCheckUp"),i.is("form")&&t.isPlainObject(n)&&"string"==typeof n.options.nameSpace){var s=i.removeData(name).find(o).add(i);i.is("[id]")&&(s=s.add(t('[form="'+i.prop("id")+'"]').filter(o))),s.off("."+n.options.nameSpace)}return i}})}({sendForm:!0,waiAria:!0,onSubmit:!0,onKeyup:!1,onBlur:!1,onChange:!1,nameSpace:"validate",conditional:{},prepare:{},description:{},eachField:$.noop,eachInvalidField:$.noop,eachValidField:$.noop,invalid:$.noop,valid:$.noop,switching:$.noop,filter:"*",buttonSwitching:!1},jQuery,window),$(document).ready((function(){siteResponsive.init(".b-page"),forms.init(".b-page"),site.init(),sitePlugins.popUps(),sitePlugins.carousels({selector:".b-carousel"}),siteModules.hashNav(),siteModules.autoComplete(),siteModules.accordions({selector:".js-accordion"}),siteModules.dropDown({selector:"js-dropDown"}),siteModules.tabs({selector:".js-tabs",onToggle:function(e,t){console.log("onToggle tab"),console.log(t),console.log(this),console.log(this.hasClass("b-checkout")),console.log(this.find(".b-form").length),console.log("onToggle tab check end"),"pickup"==t.attr("id")?($(".js-tabs-page#delivery").find("[data-required]").each((function(){console.log("new code delivery tab switch require ON"),console.log(this),$(this).attr("data-required",!1).data("required",!1)})),$(".js-tabs-page#pickup").find("[data-required]").each((function(){console.log("new code  pickup tab switch require ON"),console.log(this),$(this).attr("data-required",!0).data("required",!0)}))):($(".js-tabs-page#delivery").find("[data-required]").each((function(){console.log("new code delivery tab switch require ON"),console.log(this),$(this).attr("data-required",!0).data("required",!0)})),$(".js-tabs-page#pickup").find("[data-required]").each((function(){console.log("new code  pickup tab switch require ON"),console.log(this),$(this).attr("data-required",!1).data("required",!1)}))),this.hasClass("b-checkout")&&this.find(".b-form").length&&("pickup"==t.attr("id")?(console.log(),$(".js-courier_group_title").hide(),$(".js-courier_group_title_alt").show(),$(".js-courier_group_comment").hide(),$(".js-courier_group_title_bailee").hide(),$(".js-courier_group_title_bailee_phone").removeClass("col-md-9").addClass("col-md-12"),$(".js-courier_group_title_bailee").find("[data-required]").each((function(){$(this).attr("data-required",!1).data("required",!1)}))):($(".js-courier_group_title").show(),$(".js-courier_group_title_alt").hide(),$(".js-courier_group_comment").show(),$(".js-courier_group_title_bailee").show(),$(".js-courier_group_title_bailee_phone").removeClass("col-md-12").addClass("col-md-9"),$(".js-courier_group_title_bailee").find("[data-required]").each((function(){$(this).attr("data-required",!0).data("required",!0)}))),t.find(".b-checkout_form").show(),console.log("current tab"),t.find("[data-required]").each((function(){console.log("current tab switch require ON"),console.log(this),$(this).attr("data-required",!0).data("required",!0)})),t.siblings(".js-tabs-page").each((function(){console.log("prev tab"),console.log(this),$(this).find(".b-checkout_form").hide(),$(this).find("[data-required]").each((function(){console.log("prev tab switch require off"),console.log(this),$(this).attr("data-required",!1).data("required",!1),$(this).closest(".m-error").removeClass("m-error")}))})))}}),siteModules.spoilers({selector:".js-spoiler",beforeToggle:function(e){}}),siteModules.pockets({selector:".js-pocket",duration:400}),siteModules.loadingOnRequire({btn:".js-loading-on-require",beforeShow:function(){$(window).trigger("floatedPanels.stepRefresh")}}),shopModules.init(),cartFunctions.init()}));var site=function(e,t){"use strict";var i=$("body");return{init:function(){i.on("click.targetBlank",'[href][data-target="_blank"]',(function(){return!e.open($(this).attr("href"))})),function(){var t=$(".b-header");function i(){t.toggleClass("fixed",t.hasClass("b-header__sticky")&&(document.documentElement.scrollTop||document.body.scrollTop)>$(".b-header_top").outerHeight())}siteModules.dropDown({selector:"js-headerMenu",switch:"showMenu",lock:!0,onToggle:function(e){}}),siteModules.dropDown({selector:"js-headerSearch",switch:"showSearch",onToggle:function(e){this.hasClass("showSearch")&&setTimeout((function(){$('.b-header_top_search_form_field input[type="text"]')[0].focus()}),200)}}),i(),$(e).on("scroll.headerScroll",i)}(),function(){var t=$(".b-footer"),i=$('<button class="e-pageUp" type="button"><svg width="22" height="36" aria-hidden="true"><use xlink:href="#page-up"></use></svg></button>').appendTo(t.find("> .container"));function n(){var n=document.documentElement.scrollTop||document.body.scrollTop,s=$(e).height(),o=n+s;i.toggleClass("show",o>1.25*s),i.toggleClass("fixed",o>=t.offset().top+(["md","lg"].breakPoint()?84:54))}i.on("click.pageUp",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},800,"easeOutQuart")})),n(),$(e).on("resize.pageUp",(function(){helpers.delay.call(i,n,100)})),$(e).on("scroll.pageUp pageUp.Refresh",n)}(),$(".b-catalog_feed").flexRows({auto:!0,strong:!1,selector:".b-good_title"}).flexRows({auto:!0,strong:!1,selector:".b-good_info"}).flexRows({auto:!0,strong:!1,selector:".b-good_props"}).flexRows({auto:!0,strong:!0,selector:".b-good_purchase"})},onDomReady:function(){},onLoadPage:function(){$(e).on("load.pageReady",(function(){$("html").addClass("domIsReady"),setTimeout((function(){$(e).trigger("refresh.flexRows")}),300)}))}}}(window);site.onLoadPage();var forms=function(e,t){"use strict";var i=$("body");return{init:function(e){i.on("blur","[contenteditable]",(function(){var e=$(this),t=e.html(),i=e.text(),n=e.html().replace(/<div>/gi,"<br />").replace(/<\/div>/gi,"").replace(/<br\s*[\/]?>/gi,"%br%"),s=e.html(n).text();e.html(t),e.next('[type="hidden"]').val(s.replace(/%br%/gi,"\r\n")),i.length||e.empty()})),forms.placeholders(e+" .b-form_box.placeholder input, "+e+" .b-form_box.placeholder textarea, "+e+" .b-form_box.placeholder select"),forms.styleControls(e+' input[type="checkbox"], '+e+' input[type="radio"]',e+" select:not([multiple]):not(.js-selectric)",e+' input[type="file"]:not(.js-uploader)'),forms.styleSelects(e+" select.js-selectric"),forms.masking(e),forms.validate(e),forms.resetForm(),forms.confirmCheckbox(e),forms.datePicker(e),forms.spinner({namespace:e,selector:".js-spinner"}),forms.range(e+" .js-range")},confirmCheckbox:function(e){$(e).on("change.confirmCheckbox",".js-confirm",(function(){var e=$(this).closest("form"),t=e.find('button[type="submit"]'),i=e.data("reCaptchaResult")||!e.find(".js-reCaptcha").length,n=void 0===t.data("available")||t.data("available");t.prop("disabled",!($(this).is(":checked")&&i&&n))}))},datePicker:function(e){$.isFunction($.fn.datepicker)&&$(e+" .js-datePicker").each((function(){var e=$(this),t=e.find("input"),i=(e.closest("form").find(".b-checkout_datetime"),new Date);"pickup"==e.closest(".js-tabs-page").attr("id")&&i.getHours()>=18&&i.getMinutes()>0&&(console.log("date_pickaup"),i.setDate(i.getDate()+1)),e.datepicker({inline:!0,minDate:i,onSelect:function(e,i){t.val(e).trigger("change").trigger("refresh.validate")}})}))},masking:function(e){$.isFunction($.fn.mask)&&$(e+" [data-masking]").each((function(){var e=$(this).mask($(this).data("masking"),{onInvalid:function(){e.data("maskComplete",!1)},onComplete:function(t){e.data("maskComplete",!0),e.trigger("mask.complete",[t])},onKeyPress:function(t){e.hasClass("js-phone-field")&&(console.log(t),"+7 (8"!=t&&"+7 (7"!=t||e.val("+7 "),console.log(t.value),e.data("phonecomplete",11===t.replace(/\D/g,"").length),console.log("onKeyPress js-phone-field"),console.log(11===t.replace(/\D/g,"").length)),e.hasClass("js-cart-personal-phone")&&e.data("phonecomplete",11===t.replace(/\D/g,"").length),e.hasClass("js-phone-sms")&&e.data("smsCodeComplete",4===t.replace(/\D/g,"").length)}});e.data("storagePlaceholder",$(this).attr("placeholder")).on("focus.maskingPlaceholder",(function(){e.attr("placeholder",$(this).data("maskingPlaceholder"))})).on("blur.maskingPlaceholder",(function(){e.attr("placeholder",$(this).data("storagePlaceholder"))}))}))},placeholders:function(e){function t(){this.closest(".b-form_box").toggleClass("active",""!==$(this).val()),this.closest(".b-form_box").toggleClass("empty",""===$(this).val()),this.on("focus blur change selectric-change",(function(e){$(this).closest(".b-form_box").toggleClass("active","focus"===e.type||!!$(this).val().length)})),this.on("input",(function(e){$(this).closest(".b-form_box").toggleClass("empty",!($(this).val().length>0))})),setTimeout($.proxy((function(){this.closest(".b-form_box").toggleClass("transition")}),this),100)}$(e).each((function(){t.call($(this))}))},range:function(e){$.isFunction($.fn.slider)&&$(e||".js-range").each((function(){var e=$(this),t=$(e.data("from")+", "+e.data("to"));e.slider({range:!0,min:e.data("min")||0,max:e.data("max")||1e3,values:[parseInt($(e.data("from")).val().replace(" ",""),10)||e.data("min"),parseInt($(e.data("to")).val().replace(" ",""),10)||e.data("max")],step:e.data("step")||1,create:function(t,i){parseInt($(e.data("from")).val(),10)||e.data("min"),parseInt($(e.data("to")).val(),10)||e.data("max")},slide:function(i,n){$(e.data("from")).val(n.values[0].toString()),$(e.data("to")).val(n.values[1].toString()),t.trigger("change")}}),t.on("blur",(function(){parseFloat($(e.data("from")).val().replace(" ","")),parseFloat($(e.data("to")).val().replace(" ",""));parseFloat($(e.data("to")).val().replace(" ",""))<parseFloat($(e.data("from")).val().replace(" ",""))&&$(e.data("to")).val(parseFloat($(e.data("from")).val().replace(" ",""))),parseFloat($(e.data("from")).val().replace(" ",""))<e.data("min")&&$(e.data("from")).val(e.data("min")),parseFloat($(e.data("to")).val().replace(" ",""))>e.data("max")&&$(e.data("to")).val(e.data("max")),$(e.data("from")).val($(e.data("from")).val()),$(e.data("to")).val($(e.data("to")).val()),e.slider("option",{values:[parseFloat($(e.data("from")).val().replace(" ",""))||e.data("min"),parseFloat($(e.data("to")).val().replace(" ",""))||e.data("max")]})}))}))},resetForm:function(){i.off("click.resetForm").on("click.resetForm",".js-reset-form",(function(e){e.preventDefault();var t=$(this).closest("form");t[0].reset(),t.find("div[contenteditable]").empty(),t.find('div[contenteditable] ~ input[type="hidden"]').val(""),t.find('input[type="text"], input[type="email"], input[type="tel"], select').not("[data-default]").val("").trigger("change"),t.find('input[type="radio"], input[type="checkbox"]').prop("checked",!1),t.find("select").selectric("refresh"),t.find(".js-range").slider("option",{values:[$(t.find(".js-range").data("from")).data("default"),$(t.find(".js-range").data("to")).data("default")]});var i=t.find(".js-range:first"),n=$(i.data("from")+", "+i.data("to"));$(i.data("from")).val($(i.data("from")).data("default").toString()),$(i.data("to")).val($(i.data("to")).data("default").toString()),n.trigger("change"),$.uniform.update()}))},spinner:function(e){function t(e,t){var i=void 0!==this.data("max")&&Number(e)>this.data("max");return t&&t.call(this,i),i?this.data("max"):Number(e)}(e=e||{}).selector=e.selector?e.selector:".js-spinner",e.namespace=e.namespace?e.namespace+" ":".b-page",e.checkMaxHandler=!!e.checkMaxHandler&&e.checkMaxHandler,e.checkMinHandler=!!e.checkMinHandler&&e.checkMinHandler,$(e.namespace+e.selector).each((function(){var i=$(this),n=Number($(this).data("step")||1),s=Number($(this).data("min")||n),o=void 0!==i.data("suffix")?" "+i.data("suffix"):"",a=$(this).val()||n;a=t.call(i,a);i.val(a+o),i.closest(".b-spinner").length||i.wrap('<div class="b-spinner"></div>'),i.closest(".b-spinner").find(".b-spinner_buttons").length||(i.closest(".b-spinner").append('<div class="b-spinner_buttons"><button class="e-btn" data-spin="up"><span>+</span></button><button class="e-btn" data-spin="down"><span>-</span></button></div>'),i.closest(".b-spinner").off("click.spinAmount").on("click.spinAmount","button",(function(e){console.log("spin click"),e.preventDefault(),n=Number(i.data("step")||1),s=Number(i.data("min")||n),"bottles-refund"==i.attr("id")&&(s=0);var t=parseFloat($(this).closest(".b-spinner").find("input").val().replace(o,"")),a=Number(i.data("it")||1),r=0;switch($(this).data("spin")){default:case"up":a++,r=100*t+100*n;break;case"down":console.log("down"),a=a<1?0:a-1,r=100*t<100*n+100*s?100*s:100*t-100*n}var l=(r/=100).isInteger()?r+o:r.toFixed(2)+o;$(this).closest(".b-spinner").find("input").data("it",a).val(l).trigger("blur").trigger("change")})),i.off("keyup.spinnerKeyup").on("keyup.spinnerKeyup",(function(){$(this).val().match(/^\d+$/)||$(this).val($(this).data("step")||1)})).off("blur.spinnerBlur").on("blur.spinnerBlur",(function(){var i=void 0!==$(this).data("suffix")?" "+$(this).data("suffix"):"";""!==$(this).val()&&0!==$(this).val()||$(this).val($(this).data("step")||1);var n=t.call($(this),$(this).val().replace(i,""),e.checkMaxHandler),s=n.isInteger()?n+i:n.toFixed(2)+i;$(this).val(s),e.onBlur&&e.onBlur(parseFloat($(this).val()))})))}))},styleControls:function(e,t,i){$.isFunction($.fn.uniform)&&($(e).not(".js-switcher, .js-pure").uniform(),t&&$(t).not(".js-switcher, .js-pure").uniform({selectAutoWidth:!1,selectClass:"e-select"}),i&&$(i).each((function(){$(this).uniform({fileButtonHtml:"Обзор",fileClass:"e-uploader",filenameClass:"e-uploader_file",fileButtonClass:"e-uploader_btn e-btn e-btn_green_outline",fileDefaultHtml:$(this).data("label")||"Прикрепить файл:"})})))},styleSelects:function(e){helpers.isTouchDevice()?$.isFunction($.fn.uniform)&&$(e).uniform({selectAutoWidth:!1,selectClass:"e-select"}):$.isFunction($.fn.selectric)&&$(e).selectric({maxHeight:200,arrowButtonMarkup:"",disableOnMobile:!1,optionsItemBuilder:function(e,t){var i=$(t).data();return e.text+(i.someData?"<span>"+i.someData+"</span>":"")},labelBuilder:function(e){var t='<svg width="9" height="9" aria-hidden="true"><use xlink:href="#chevron-bold-down"></use></svg>',i=""!==e.value?e.text:'<span class="placeholder">'+e.text+"</span>";return i+t}})},toggleValidation:function(e,t){t&&this.find(".b-form_box").each((function(){$(this).toggleClass("disabled",!e),$(this).find("input").prop("disabled",!e)})),this.find("[data-required]").each((function(){$(this).attr("data-required",!!e).data("required",!!e)}))},validate:function(t){$(t+" form:not(.js-detach-validate)").each((function(){var t=$(this);$.isFunction($.fn.validate)&&t.data("checkup")&&(t.on("keyup","[data-diff]",(function(){$($(this).data("diff")).data("conditionalDiff",""!==$(this).val())})),t.validate({onChange:!!t.data("checkupOnChange")&&t.data("checkupOnChange"),onKeyup:!!t.data("checkupOnKeyup")&&t.data("checkupOnKeyup"),onBlur:!!t.data("checkupOnBlur")&&t.data("checkupOnBlur"),conditional:{passwords:function(){return $(this).val()===$('[data-conditional-check="passwords"]').val()},uploader:function(){return""!==$(this).closest(".b-uploader").find(".b-uploader_result").val()}},eachInvalidField:function(e,t){var i=$(this).data("conditionalType")?formNotifications.labels.conditional[$(this).data("conditionalType")]:formNotifications.labels.conditional[$(this).data("conditional")]||formNotifications.labels.conditional.def,n=$(this).data("patternType")?formNotifications.labels.pattern[$(this).data("patternType")]:formNotifications.labels.pattern.def,s=$(this).data("requirednotice")?$(this).data("requirednotice"):$(this).data("requiredType")?formNotifications.labels.required[$(this).data("requiredType")]:formNotifications.labels.required.def,o=t.required?t.conditional?t.pattern?"":n:i:s;if(formNotifications.showErrorLabel.call($(this),o,0),console.log($(this)),"sms"==$(this).attr("name")){var a=$(this).closest("form"),r=$(".js-phone-field",a);s=r.data("requirednotice")?r.data("requirednotice"):r.data("requiredType")?formNotifications.labels.required[r.data("requiredType")]:formNotifications.labels.required.def,o=t.required?t.conditional?t.pattern?"":n:i:s;formNotifications.showErrorLabel.call($(".js-phone-field",a),o,0)}},eachValidField:function(){formNotifications.hideErrorLabel.call($(this))},invalid:function(e){t.data("checkupScroll")&&!$("html").hasClass("m-leaflet-on")?setTimeout($.proxy((function(){var e=$(this).find(".b-form_box.m-error").first();e.length&&$("html, body").animate({scrollTop:e.offset().top-140},600)}),this),100):setTimeout($.proxy((function(){var e=$(this).find(".b-form_box.m-error").first();e.length&&$(".b-leaflet").animate({scrollTop:e.offset().top-140},600)}),this),100)},valid:function(t){var i=$(this),n=$(this).find('button[type="submit"].e-btn'),s=!!$(this).data("xhr"),o=$(this).data("handler"),a=$(this).data("handlerProperty");if("function"==typeof e[o]?e[o].call(i,t):"object"==typeof e[o]&&e[o][a]&&e[o][a].call(i,t),console.log("test_cart"),console.log(s),"eone_form"==i.attr("id")&&1!=i.data("period_still_avaliable")){t.preventDefault(),i.data("cart_ordering",0);var r=$(".cart-preloader");r.addClass("is-shown"),console.log("cart-preloader start"),console.log(r);var l=$('.js-datePicker input[name="date"]').val(),c=$(".cart-checkout-datetime__time-inner input:checked").val();$(".cart-checkout-datetime__time-inner input:checked").length>0&&$(".cart-checkout-datetime__time-inner input:checked").data("id")>0&&$('.cart-checkout-datetime__time-inner input[name="time_id"]').val($(".cart-checkout-datetime__time-inner input:checked").data("id")),console.log("test_cart2"),console.log(l),console.log(c);var d=!1;console.log(cartFunctions),console.log(cartFunctions.getStore());var h=cartFunctions.getStore();console.log(h.deliveryType),h.deliveryType&&"pickup"==h.deliveryType?(i.data("cart_ordering",1),i.data("period_still_avaliable",1),i.submit()):$.ajax({url:"/udata/emarket/deliveryDateParam/"+l+"/.json",dataType:"json",async:!0,success:function(e){if(r.addClass("is-shown"),console.log("check period"),"express доставка"==c)!0===function(e){switch(e){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}(e.deliveryExpress)?(console.log("YES - express доставка"),d=!0):(console.log("NO - express доставка"),d=!1);else if(void 0!==e&&void 0!==e.period&&void 0!==e.period.item)for(var t in e.period.item){var n=e.period.item[t],s=n.from.substr(0,2)+"-"+n.to.substr(0,2);c==s&&(console.log(c+" == "+s),d=!0)}if(console.log("periodStillAvaliable = "+d),!1===d){console.log("periodStillAvaliable === false"),console.log("clear calendar and time period"),$(".cart-checkout-datetime__time-inner").html(""),$(".cart-checkout-datetime__time ").addClass("hidden"),$(".cart-checkout-datetime__notice").removeClass("hidden"),$.dispatch({id:"delivery-time",type:"error-message-show",message:"Выберите другую дату"}),$.dispatch({id:"delivery-time-modal",type:"error-message-show",message:'<a href="#" class="js-choose_another_delivery_date">Выберите другую дату</a>'}),$.dispatch({id:"delivery-calendar-modal",type:"error-message-show",message:"Выберите другую дату"});var o=$('<div class="cart-error hidden-xs hidden-sm js-cart_status_fail" data-id="{@id}"><div class="cart-error__inner"><p>Выбранный интервал доставки в данный момент недоступен<br />Пожалуйста, выберите другой интервал доставки</p></div></div>');$(".cart-error_wrap").append(o),r.removeClass("is-shown"),setTimeout((function(){$(".cart-error_wrap").html("")}),5e3),$.dispatch({type:"cart-address-for-delivery",payload:e,allow:!0}),$(".js-choose_another_delivery_date").click()}else console.log("periodStillAvaliable === true "),i.data("cart_ordering",1),i.data("period_still_avaliable",1),i.submit()}})}s&&(t.preventDefault(),n.prop("disabled",!0).toggleClass("request"),$.ajax({url:i.attr("action"),method:i.attr("method"),data:i.serialize()+"&"+objSerialize(n.data()),dataType:"json",success:function(e){n.prop("disabled",!1).toggleClass("request"),xhrFormHandler.response.call(i,e)}}))}}).off("focus selectric-before-open refresh.validate change").on("focus selectric-before-open refresh.validate change","input, textarea, select, div[contenteditable]",(function(){$(this).closest(".m-valid").removeClass("m-valid"),$(this).closest(".m-error").removeClass("m-error")}))),t.data("checkupBtn")&&t.validate({nameSpace:"buttonSwitching",onKeyup:!0,onBlur:!0,buttonSwitching:!0,switching:function(e,i,n){$(this).data("validateStatus",i);var s=void 0===t.data("xhrValidateState")||t.data("xhrValidateState"),o=n&&s;$(this).find('button[type="submit"]').prop("disabled",!o)}})}))}}}(window),formNotifications=function(e,t){var i="m-error",n="_error",s="m-valid",o="undefined"!=typeof formNotices?formNotices:{},a={required:{def:"Необходимо заполнить",select:"Необходимо выбрать"},conditional:{def:"Введенные данные не совпадают",credit:"Некорректный номер банковской карты",passwords:"Введенные пароли не совпадают",checkboxes:"Необходимо выбрать один из параметров",inn:"Ошибка в ИНН",snils:"Ошибка в номере СНИЛС",diff:"Заполните хотя бы одно поле",phoneOrEmail:"Укажите телефон или email",uploader:"Необходимо загрузить хотя бы один файл",uploaderAmount:"Необходимо загрузить от 2-х до 5-ти изображений"},pattern:{def:"Некорректный формат данных",email:"Некорректный e-mail",phone:"Некорректный телефон",date:"Некорректно указана дата",time:"Некорректно указано время"},uploader:{count:"Вы пытаетесь загрузить больше изображений, чем это допустимо",size:"Загрузите файл размером меньше 10 Мб",uploading:"Во время загрузки изображений возникла ошибка"},submit:{success:"Спасибо. Мы свяжемся с вами в ближайшее время.",error:"Ошибка."}};function r(){var e=this,t={action:"xhrCheck"};t[e.attr("name")]=e.val(),$.ajax({url:e.data("xhrCheck")||e.closest("form").attr("action"),method:e.closest("form").attr("method"),data:t,dataType:"json",before:function(){e.closest(".b-form_box").toggleClass("request",!0)},success:function(e){e.result&&$(e.target).html(e.notice)}})}return{labels:a=$.extend({},a,o),showErrorLabel:function(t,o){var a=this.closest(".b-form_box");a.find(".b-form_box"+n).remove(),$(this).data("rowed")?a.append('<div class="b-form_box'+n+'">'+t+"</div>"):a.find(".b-form_box_field").append('<div class="b-form_box'+n+'">'+t+"</div>"),setTimeout((function(){a.removeClass(s).removeClass("m-successful").addClass(i)}),100),setTimeout((function(){$(e).trigger("aside.refresh")}),250)},hideErrorLabel:function(){var t=this.closest(".b-form_box");t.removeClass(i),t.removeClass("m-successful"),t.find(".b-form_box"+n).remove(),t.find("[data-required]").length&&(setTimeout((function(){t.addClass(s)}),100),setTimeout((function(){$(e).trigger("aside.refresh")}),250)),this.data("xhrCheck")&&r.call(this)},showMessage:function(e,t,i,n){var s=this.find(".b-form_message").length?this.find(".b-form_message"):$('<div class="b-form_message"></div>').prependTo(this),o=t?"success":"error";console.log("msg"+e),console.log(s),console.log(this),i?(s.html('<div class="b-form_message_balloon b-form_message_balloon__'+o+'"><div class="b-form_message_balloon_capsule"><div class="b-form_message_balloon_capsule_inner">'+e+"</div></div></div>").css({position:"absolute",zIndex:10,left:0,top:"50%",right:0,padding:0,marginTop:-s.find(".b-form_message_balloon").height()/2}),s.toggleClass("b-form_message__show",!0),this.css({height:this.outerHeight()}).toggleClass("b-form__hide",!0).animate({height:s.find(".b-form_message_balloon").height()},300,"easeOutQuart")):(s.height(s.height()).html('<div class="b-form_message_balloon b-form_message_balloon__'+o+'"><div class="b-form_message_balloon_capsule"><div class="b-form_message_balloon_capsule_inner">'+e+"</div></div></div>"),s.toggleClass("b-form_message__show",!0).animate({height:s.find(".b-form_message_balloon").height(),paddingBottom:i?0:16},300,"easeOutQuart",(function(){$(this).css({height:""})}))),n&&n.call(this)},hideMessage:function(){(this.find(".b-form_message").length?this.find(".b-form_message"):$('<div class="b-form_message"></div>').prependTo(this)).slideUp({duration:400,easing:"easeOutQuart"})},showMessageInPopUp:function(e,t,i,n){var s=this.find("form"),o=$('<div class="b-form_message b-form_message__show"></div>'),a=$('<div class="b-form_message_inner"></div>').appendTo(o);$('<div class="b-form_message_balloon b-form_message_balloon__'+(t?"success":"error")+'"></div>').appendTo(a).append('<div class="b-form_message_balloon_capsule"><div class="b-form_message_balloon_capsule_inner">'+e+"</div></div>"),this.leafLetPopUp("show",{animationStyleOfBox:"scale",animationStyleOfChange:"slide",boxWidth:490,boxHorizontalGutters:15,boxVerticalGutters:15,closeBtnLocation:"box",content:o,overlayOpacity:.65,scrollLocker:$(".b-page"),scrollMode:/*!helpers.mobile() ? */"inner",beforeLoad:function(){this.addClass("b-form_message_leaflet")},afterLoad:function(){i&&(s.toggleClass("disabled",!0).find("input, select, textarea, button").prop("disabled",!0),$.uniform.update(s.find("input, select, textarea"))),n&&n.call(this)}})}}}(window),xhrFormHandler=function(e,t){function i(e,t){$.each(t,(function(t,i){formNotifications.showErrorLabel.call(e.find('[name="'+t+'"]'),i,0)}))}return{response:function(t){var n=this,s="";if(console.log("xhrFormHandler this.closest(.b-form)"),console.log(this),console.log(this.closest(".b-form")),"boolean"==typeof t.fields&&t.fields)s=t.msg||formNotifications.labels.submit.success,n.data("inPopUp")?formNotifications.showMessageInPopUp.call(this.closest(".b-form"),s,!0,t.hideForm):formNotifications.showMessage.call(this.closest(".b-form"),s,!!t.fields,!!t.hideForm);else if("boolean"!=typeof t.fields||t.fields)if("object"==typeof t.fields){var o=" Некорректно заполнены поля: ";$.each(t.fields,(function(e,t){var i=n.find('[name="'+e+'"]').attr("placeholder")||n.find('[name="'+e+'"]').closest(".b-form_box").find(".b-form_box_title").text().replace(" *","");o+="&laquo;"+i+"&raquo;, "})),s=t.msg||formNotifications.labels.submit.error+o.substring(0,o.length-2)+".",formNotifications.showMessage.call(this.closest(".b-form"),s,!1,!1,(function(e){i(n,t.fields)}))}else"console"in e&&(console.log("Неверный формат ответа обработчика формы"),console.log(t));else s=t.msg||formNotifications.labels.submit.error+o.substring(0,o.length-2)+".",formNotifications.showMessage.call(this.closest(".b-form"),s,!1,!1,(function(e){i(n,t.fields)}))}}}(window),siteModules=function(e,t){return{accordions:function(t){function i(t){$(t.namespace+t.selector).each((function(){var t=$(this),i=t.data("resolutions")?t.data("resolutions").split(","):["xs","sm","md","lg"],n=t.data("actiononlink")?"li > a, li > span":"li > a > .js-accordion-trigger, li > span";console.log(n),t.data("screens",i),i.indexOf(helpers.screen())>=0?(t.find("li > ul, li > div").slideUp({duration:0}),t.find(".opened").find("> ul, > div").slideDown({duration:0})):t.find("li > ul, li > div").show(),t.find(n).each((function(){var n=!!$(this).closest("li").find("> ul, > div").length;$(this).closest("li").toggleClass("hasChild",n),i.indexOf(helpers.screen())>=0?$(this).off("click.accordionClick").on("click.accordionClick",(function(i){if($(this).closest("li").hasClass("hasChild")){if(i.preventDefault(),t.data("neighbors")){var n=$(this).closest("li").siblings();n.toggleClass("opened",!1),n.find("> ul, > div").slideUp({duration:200,easing:"easeOutQuart",complete:function(){$(e).trigger("floatedPanels.refresh")}})}var s=$(this).closest("li");s.toggleClass("opened"),s.find("> ul, > div").slideToggle({duration:200,easing:"easeOutQuart",complete:function(){$(e).trigger("floatedPanels.refresh")}})}$(this).closest("ul").toggleClass("faded",t.find("> .hasChild.opened").length)})):$(this).closest("li").find("> ul, > div").css("display","")})),t.off("accordion.close").on("accordion.close",(function(){t.data("screens").indexOf(helpers.screen())>=0&&$(this).find("li").each((function(){$(this).toggleClass("opened",!1),$(this).find("> ul, > div").slideUp({duration:200,easing:"easeOutQuart",complete:function(){$(e).trigger("floatedPanels.refresh")}})}))})),t.off("accordion.open").on("accordion.open",(function(){t.data("screens").indexOf(helpers.screen())>=0&&$(this).find("li").each((function(){$(this).toggleClass("opened",!0),$(this).find("> ul, > div").slideDown({duration:200,easing:"easeOutQuart",complete:function(){$(e).trigger("floatedPanels.refresh")}})}))}))}))}t.selector=t.selector?t.selector:".js-accordion",t.namespace=t.namespace?t.namespace+" ":"",i(t),$(e).off("resize.accordionsRefresh").on("resize.accordionsRefresh",(function(){helpers.delay.call($("body"),i(t),250,"accordions-")}))},autoComplete:function(t){t=t?t+" ":"",$(t+".js-autoComplete").each((function(){var t=$(this).attr("autocomplete","off"),i=t.parent(),n=$('<div class="b-autoComplete"></div>').appendTo(i),s=$('<div class="b-autoComplete_inner js-scrollBar"></div>').prependTo(n),o=-1;t.closest("form").on("keypress.enterKey",(function(t){13===t.keyCode&&n.find("li.focus").length&&(t.preventDefault(),e.location=n.find("li.focus .b-autoComplete_good, li.focus .b-autoComplete_footer_btn").attr("href"))})),t.on("keyup.autoComplete get.autoComplete",(function(e){var a=$(this).val(),r=38===e.keyCode,l=40===e.keyCode,c=13===e.keyCode;if(a.length>1&&!(r||l||c)&&(i.toggleClass("request",!0),$.ajax({url:t.data("source")||t.closest("form").attr("action"),method:t.closest("form").attr("method")||"post",data:t.closest("form").serialize()+"&trigger="+t.attr("name"),dataType:"json",success:function(e){i.toggleClass("request",!1),e.status&&(n.find("> *:not(.b-autoComplete_inner)").remove(),e.footer&&n.append(e.footer),s.html(e.results),n.toggleClass("opened",!0),i.toggleClass("autoCompleteOpened",!0),$(document).off("touchend.closeAutoComplete click.closeAutoComplete").on(helpers.isTouchDevice()?"touchend.closeAutoComplete":"click.closeAutoComplete",(function(e){var t=$(e.target),o="b-autoComplete";t.hasClass(o)||!!t.closest("."+o).length||(n.toggleClass("opened",!1),i.toggleClass("autoCompleteOpened",!1),setTimeout((function(){s.empty()}),350))})))}})),n.hasClass("opened")&&(r||l)){var d=n.find("li");o=(o+=r?-1:l?1:0)<0?d.length-1:o+1>d.length?0:o,d.removeClass("focus"),d.eq(o).addClass("focus")}})),i.on("click.autoComplete",".b-autoComplete_list li",(function(e){$(this).find("a").length||(e.preventDefault(),t.closest("form").data("setAutoCompleteParams")&&$.each($(this).data(),(function(e,i){t.parent().find('input[type="hidden"][name="'+e+'"]').length?t.parent().find('input[type="hidden"][name="'+e+'"]').val(i):t.parent().prepend('<input type="hidden" name="'+e+'" value="'+i+'" />')})),t.val($(this).text()).trigger("change"),n.toggleClass("opened",!1),setTimeout((function(){s.empty()}),400))}))}))},dropDown:function(t){var i=t.locker?t.locker:$(".b-page");t.switch=t.switch?t.switch:"opened",t.lock=!!t.lock&&t.lock,$(document).off("click.dropDown"+t.selector).on("click.dropDown"+t.selector,(function(n){var s=$(n.target),r=s.hasClass(t.selector+"-toggle")||!!s.closest("."+t.selector+"-toggle").length,l=helpers.touches.touchmove.y>-1&&Math.abs(helpers.touches.touchstart.y-helpers.touches.touchmove.y)>5;if(r){(s=s.hasClass(t.selector+"-toggle")?s:s.closest("."+t.selector+"-toggle")).is("a")&&n.preventDefault();var c=s.data("resolutions")?s.data("resolutions").split(","):["xs","sm","md","lg"],d=!!s.data("touch")&&s.data("touch");if(!(c.indexOf(helpers.screen())>=0&&d)||helpers.mobile()){n.preventDefault();var h=s.closest("."+t.selector),u=h.hasClass(t.switch);$("."+t.selector).toggleClass(t.switch,!1),h.toggleClass(t.switch,!u),h.find("."+t.selector+"-box").toggleClass(t.switch,!u),t.onToggle&&t.onToggle.call(h,!u),(t.lock||h.data("lock"))&&(u?a.call(i):o.call(i)),setTimeout((function(){$(e).trigger("floatedPanels.stepRefresh")}),300)}}else l||s.closest("."+t.selector+"-box").length&&!s.hasClass(t.selector+"-close")&&!s.closest("."+t.selector+"-close").length||$("."+t.selector).each((function(){var n=$(this),s=n.hasClass(t.switch);($(this).find(t.selector+"-toggle").data("resolutions")?$(this).find(t.selector+"-toggle").data("resolutions").split(","):["xs","sm","md","lg"]).indexOf(helpers.screen())>=0&&(n.toggleClass(t.switch,!1),(t.lock||n.data("lock"))&&s&&a.call(i),t.onToggle&&t.onToggle.call(n,!1),$(this).trigger("dropDown.closing"),setTimeout((function(){$(e).trigger("floatedPanels.stepRefresh")}),300))}));helpers.touches={touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1}}})),$("."+t.selector).off("dropDown.open").on("dropDown.open",(function(){$(this).toggleClass(t.switch,!0),(t.lock||$(this).data("lock"))&&o.call(i)})).off("dropDown.close").on("dropDown.close",(function(){$(this).toggleClass(t.switch,!1),a.call(i)}));var n=$("body"),s=$(".b-header__sticky, .b-header__sticky .b-header_drop_nav");function o(){if(!this.data("isLocked")){var t=document.documentElement.scrollTop||document.body.scrollTop;this.data("isLocked",!0),this.data("vpOverflow",n.css("overflow")),this.data("lockScrollState",t),n.css({overflow:"hidden"}),document.body.scrollHeight>e.innerHeight&&(n.css({paddingRight:helpers.getScrollBarWidth()}),s.css({paddingRight:helpers.getScrollBarWidth()})),/iPad|iPhone|iPod/.test(navigator.userAgent)&&n.css({position:"fixed",left:0,top:-n.scrollTop(),right:0})}}function a(){setTimeout($.proxy((function(){this.data("isLocked")&&(n.css({position:"",left:"",top:"",right:"",overflow:"",paddingRight:"",height:""}),n.css({paddingRight:""}),s.css({paddingRight:""}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&n.scrollTop(this.data("lockScrollState"))),this.data("isLocked",!1)}),this),300)}},floatedPanels:function(t){(t=t||{}).selector=t.selector?t.selector:".js-float-panel";var i=$(t.selector),n=$(".b-header");i.length&&i.each((function(){var i=$(this).parent(),s=$(this),o=void 0!==s.data("offset")?s.data("offset"):20,a=(["xs","sm"].breakPoint()?n.outerHeight():$(".b-header__sticky").length?$(e).width()>=1024?90:68:0)+o||o,r={};function l(t,n){var o=document.documentElement.scrollTop||document.body.scrollTop,l=n||r;s.removeClass("m-top m-bottom m-float"),("lg"===s.data("bp")?$(e).width()>=1024:(s.data("bp").split(",")||["lg"]).indexOf(helpers.screen())>=0)&&s.height()<i.height()&&(s.toggleClass("m-top",l.offsetTop>o),s.toggleClass("m-bottom",l.bottomExtremePoint<=o+l.height+a),s.toggleClass("m-fixed",o>=l.offsetTop&&o+l.height+a<l.bottomExtremePoint))}i.css({minHeight:""}).css({minHeight:$(t.selector+"-column").outerHeight()+($(t.selector+"-column-additional").length?$(t.selector+"-column-additional").outerHeight():0)-parseInt(i.css("margin-bottom"),10)-(i.prev().length?i.prev().outerHeight(!0)+parseInt(i.css("margin-top"),10):0)}),s.css({width:i.width()}),r={height:s.outerHeight(),offsetTop:i.offset().top-a,bottomExtremePoint:i.offset().top+i.outerHeight()},l(),$(e).off("load.sideBarsRefresh resize.sideBarsRefresh floatedPanels.refresh").on("load.sideBarsRefresh resize.sideBarsRefresh floatedPanels.refresh",(function(){a=(["xs","sm"].breakPoint()?n.outerHeight():$(".b-header__sticky").length?$(e).width()>=1024?90:68:0)+o||o,i.css({minHeight:""}),s.css({width:i.width()}),helpers.delay.call(s,$.proxy((function(){i.css({minHeight:$(t.selector+"-column").outerHeight()+($(t.selector+"-column-additional").length?$(t.selector+"-column-additional").outerHeight():0)-parseInt(i.css("margin-bottom"),10)-(i.prev().length?i.prev().outerHeight(!0)+parseInt(i.css("margin-top"),10):0)}),s.css({width:i.width()}),r={height:s.outerHeight(),offsetTop:i.offset().top-a,bottomExtremePoint:i.offset().top+i.outerHeight()}}),this),150),l()})),$(e).off("floatedPanels.stepRefresh").on("floatedPanels.stepRefresh",(function(){a=(["xs","sm"].breakPoint()?n.outerHeight():$(".b-header__sticky").length?$(e).width()>=1024?90:68:0)+o||o,i.css({minHeight:""}),i.css({minHeight:$(t.selector+"-column").outerHeight()+($(t.selector+"-column-additional").length?$(t.selector+"-column-additional").outerHeight():0)-parseInt(i.css("margin-bottom"),10)-(i.prev().length?i.prev().outerHeight(!0)+parseInt(i.css("margin-top"),10):0)}),r={height:s.outerHeight(),offsetTop:i.offset().top-a,bottomExtremePoint:i.offset().top+i.outerHeight()},l()})),$(e).off("scroll.sidebarTracker").on("scroll.sidebarTracker",l),$(e).off("load.sidebarTracker").on("load.sidebarTracker",(function(){helpers.delay.call(i,$.proxy((function(){l()}),this),150)})),setTimeout((function(){$(e).trigger("floatedPanels.refresh")}),600)}))},pockets:function(t){function i(e){$(e.selector).each((function(){var t=$(this),i=t.find(e.selector+"-box"),o=t.find(e.selector+"-box-inner").css({overflow:"hidden"}),a=t.find(e.selector+"-toggle").off("click.pocketModule"),r=t.data("resolutions")?t.data("resolutions").split(","):["xs","sm","md","lg"],l=!!t.data("heights")&&t.data("heights").split(","),c=!!t.data("blocks")&&t.data("blocks").split(","),d=t.data("lines")?t.data("lines").split(","):[2,3,4,6,6];if(r.indexOf(helpers.screen())>=0){i.css({overflow:"hidden"});var h=o.length?o.outerHeight():i.outerHeight();if(t.data("range",{min:0,max:h}),l)t.data("range",{min:parseInt(l[r.indexOf(helpers.screen())],10),max:h});else if(c){var u=0,p=0,f=c[r.indexOf(helpers.screen())];o.find(t.data("blocksTarget")?t.data("blocksTarget")+" > *":"> *").each((function(e){if(!(e<f))return!1;u+=$(this).outerHeight(),e>0&&(u+=Math.max(p,parseInt($(this).css("margin-top"),10))),p=parseInt($(this).css("margin-bottom"),10)})),t.data("range",{min:u,max:h})}else d&&t.data("range",{min:n.call(i)*d[r.indexOf(helpers.screen())]-2,max:h});t.data("noAnimation")||i.css(helpers.pfx+"transition","max-height "+e.duration+"ms").css("transition","max-height "+e.duration+"ms"),setTimeout((function(){void 0!==t.data("range")&&t.not(".opened").find(e.selector+"-box").css({maxHeight:t.data("range").min}),$.isFunction($.fn.owlCarousel)&&i.closest(".owl-carousel").trigger("refresh.owl.carousel")}),10),a.parent().toggleClass("excess",t.data("range").max<=t.data("range").min),a.off("click.pocketModule").on("click.pocketModule",(function(t){t.preventDefault();var i=$(this).closest(e.selector),n=i.hasClass("opened");(s.call(i,e,!n),i.data("closeNeighbors"))&&("boolean"==typeof i.data("closeNeighbors")?i.siblings(e.selector):i.closest(i.data("closeNeighbors")).find(e.selector).not($(this))).each((function(){s.call($(this),e,!1)}))})),setTimeout((function(){t.toggleClass("active",!0)}),100)}else t.toggleClass("active",!1),i.css({maxHeight:"",overflow:"visible"}),o.css({overflow:""})}))}function n(){var e="normal"!==this.css("line-height")?parseFloat(this.css("line-height")):1.14,t=Math.ceil(parseFloat(this.css("font-size")));return e=void 0!==e&&e<t?e*t:e,parseInt(void 0!==e?e:t,10)}function s(e,t){void 0!==e.onToggle&&e.onToggle&&e.onToggle.call(this,t);var i=this,n=i.find(e.selector+"-box"),s=i.find(e.selector+"-box-inner"),o=i.find(e.selector+"-toggle"),a=t?"opened":"closed",r=t?s.length?s.outerHeight():i.data("range").max:i.data("range").min;n.css({maxHeight:t?i.data("range").min:s.length?s.outerHeight():i.data("range").max}),o=o.find("[data-opened][data-closed]").length?o.find("[data-opened][data-closed]"):o,setTimeout($.proxy((function(){i.toggleClass("opened",t),n.css({maxHeight:r}),o.html(o.data(a)?o.data(a):o.html()),i.data("noAnimation")&&(n.css({overflow:t?"":"hidden"}),s.css({overflow:t?"":"hidden"}));var l=i.closest(".owl-carousel");if(l.length){var c=l.data("owl.carousel");c.options.responsive[c._breakpoint].autoHeight&&l.trigger("refresh.owl.carousel")}setTimeout($.proxy((function(){t&&n.css({maxHeight:""}),void 0!==e.onToggled&&e.onToggled&&e.onToggled.call(this,t)}),this),e.duration)}),this),10)}i(t),$(e).off("load.pocketRefresh resize.pocketRefresh").on("load.pocketRefresh resize.pocketRefresh",(function(){helpers.delay.call($("body"),(function(){i(t)}),250,"pocket-")}))},spoilers:function(t){(t=t||{}).namespace=t.namespace?t.namespace+" ":"",t.toggleClass=t.toggleClass?t.toggleClass:"opened";var i=location.hash;function n(e){$(e.namespace+e.selector).each((function(){var t=$(this).toggleClass("js-spoiler-active",!0),i=(t.find(e.selector+"-box").css({display:""}),t.find(e.selector+"-toggle").off("click.spoiler"));(t.data("resolutions")?t.data("resolutions").split(","):["xs","sm","md","lg"]).indexOf(helpers.screen())>=0?(t.not("."+e.toggleClass).find(e.selector+"-box").slideDown(0).slideUp(0),t.filter("."+e.toggleClass).find(e.selector+"-box").slideDown(0),i.off("click.spoiler").on("click.spoiler",(function(i){if($(i.target).is('a[href]:not(a[href="#"])')||i.preventDefault(),!$(i.target).hasClass("e-hint")&&!$(i.target).closest(".e-hint").length){var n=$(this).closest(e.selector);if(n.hasClass(e.toggleClass)&&n.find(e.selector+"-box").is(":visible")?s.call(n,e.selector,e.onToggle,e.beforeToggle):o.call(n,e.selector,e.onToggle,e.beforeToggle,n.data("correctPosition")),n.data("closeNeighbors")){var a="boolean"==typeof n.data("closeNeighbors")?n.siblings(e.selector):n.closest(n.data("closeNeighbors")).find(e.selector).not(t);if(!n.data("closeNeighborsPreventPositioning")&&["xs","sm"].breakPoint()){var r=n.prevAll(e.selector+".opened");r=r.length?r:n.parent(),$("html, body").animate({scrollTop:r.offset().top-60},250)}a.each((function(){s.call($(this),e.selector)}))}}}))):t.find(e.selector+"-box").show()}))}function s(i,n,s){var o=this,a=this.find(i+"-toggle"),r=this.find(i+"-box").filter((function(){return $(this).closest(".js-spoiler, .js-spoilerRoute, .js-spoilerPoint")[0]===o[0]}));o.toggleClass(t.toggleClass,!1);var l=(a=a.find("[data-closed][data-opened]").length?a.find("[data-closed][data-opened]"):a).data("closed")?a.data("closed"):a.html();a.data("closed")&&a.html(l),a.toggleClass("active",!1),void 0!==s&&s&&s(r),r.slideUp({duration:250,step:function(){$(e).trigger("floatedPanels.stepRefresh")},complete:function(){$(e).trigger("floatedPanels.refresh"),void 0!==n&&n&&n(this)}})}function o(i,n,s,o){var a=this,r=this.find(i+"-toggle"),l=this.find(i+"-box").filter((function(){return $(this).closest(".js-spoiler, .js-spoilerRoute, .js-spoilerPoint")[0]===a[0]}));a.toggleClass(t.toggleClass,!0);var c=(r=r.find("[data-closed][data-opened]").length?r.find("[data-closed][data-opened]"):r).data("opened")?r.data("opened"):r.html();r.data("opened")&&r.html(c),r.toggleClass("active",!0),void 0!==s&&s&&s(l),l.slideDown({duration:250,step:function(){$(e).trigger("floatedPanels.stepRefresh")},complete:function(){if(o){var t=a,i=(t=t.prev().length?t.prev():t.parent()).offset().top;i<(document.documentElement.scrollTop||document.body.scrollTop)-30&&$("html, body").animate({scrollTop:i-30},250)}$(e).trigger("floatedPanels.refresh"),$(e).trigger("resize"),void 0!==n&&n&&n(this)}})}i&&i.match("spoiler")&&$(t.selector).each((function(){$(this).removeClass("opened"),$(this).attr("id")===i.split("#")[1]&&$(this).addClass("opened")})),n(t),$(e).off("resize.spoilerRefresh").on("resize.spoilerRefresh",(function(){n(t)}))},tabs:function(t){(t=t||{}).namespace=t.namespace?t.namespace+" ":"";var i=t.selector,n=t.selector+"-toggle",s=t.selector+"-btn",o=t.selector+"-wrapper",a=t.selector+"-page";function r(t){$(t.namespace+t.selector).each((function(){var r=$(this),l=$(this).find(o);if(($(this).data("resolutions")?$(this).data("resolutions").split(","):["xs","sm","md","lg"]).indexOf(helpers.screen())>=0){$(this).toggleClass("js-init",!0),setTimeout((function(){$(this).toggleClass("js-transition",!0)}),500),$(this).find(n+" a.current").length||$(this).find(n+" a:first").addClass("current"),$(this).find(s+".current").length||$(this).find(s+":first").addClass("current");var c=$(this).find(n+" a.current, "+s+".current").data("href")||$(this).find(n+" a.current, "+n+" "+s+".current").attr("href"),d=$(a+c).outerHeight(!0);if($(this).find(a).toggleClass("opened",!1),r.data("noInitialTab")||$(this).find(a+c).toggleClass("opened",!0),r.off("click.switchTabs change.changeTabs mouseover.hoverTabs").on(!r.data("hoverTabs")||helpers.isTouchDevice()?"click.switchTabs change.changeTabs":"mouseover.hoverTabs",(r.data("strongByLevel")?" > ":"")+t.selector+'-toggle a[href*="#"], '+s,(function(h){!r.data("hoverTabs")&&$(this).is('a[href*="#"]')?h.preventDefault():r.data("hoverTabs")&&helpers.isTouchDevice()&&($(this).data("alreadyClicked")||$(this).data("noChild")||(h.preventDefault(),r.find(t.selector+"-toggle a, "+s).data("alreadyClicked",!1),$(this).data("alreadyClicked",!0))),l.css({height:$(a+c).outerHeight(!0)}),c=$(this).data("href")||$(this).attr("href"),d=$(a+c).outerHeight(!0),$(this).closest(n).find("a, "+s).toggleClass("current",!1),$(this).closest(i).find(r.data("strongByLevel")?"> "+o+" > "+a:a).toggleClass("opened",!1),$(this).toggleClass("current",!0),$(this).closest(i).find(a+c).toggleClass("opened",!0),l.stop(!0).animate({height:d},l.hasClass("js-transition")?500:0,"easeOutQuart",(function(){$(this).css({height:""})})),void 0!==t.onToggle&&t.onToggle&&t.onToggle.call(r,$(this),$(this).closest(t.selector).find(t.selector+"-page"+($(this).data("href")||$(this).attr("href")))),$(this).trigger("tabs.change-event"),!r.data("hoverTabs")&&$(this).is('a[href*="#"]')&&$(e).trigger("floatedPanels.refresh");var u=$(this).data("xhrUrl"),p=$(this).data("xhrParams");u&&p&&$.ajax({url:u||e.location,method:$(this).data("method")||"post",dataType:"json",data:$.extend({},p),success:function(e){}}),r.trigger("tabs.change",[{current:c}])})),"#"!==e.location.hash&&e.location.hash.length>1)$(this).find(n+' [href="'+e.location.hash+'"], '+n+' [data-hash="'+e.location.hash+'"]').trigger("click.switchTabs"),$("html, body").animate({scrollTop:$('[href="'+e.location.hash+'"]').closest(".js-tabs").offset().top-(["xs","sm"].breakPoint()?$(".b-header").outerHeight()+20:20)},400)}else $(this).toggleClass("js-init",!1),$(this).find(n+" a").toggleClass("current",!1),$(this).find(o).css({height:""})}))}r(t),$(e).off("resize.tabsRefresh").on("resize.tabsRefresh",(function(){r(t)}))},hashNav:function(){var e=$("body"),t=!1;function i(t){e.toggleClass("scrollingTo",!0);var i=$(this).attr("href")||$(this).data("hash"),n=$(i).length?$(i):$('[name="'+i.substring(1)+'"]'),s=($(this).data("offset")||20)+(["xs","sm"].breakPoint()?$(".b-header").outerHeight():20);if(i.length>1&&n.length){t.preventDefault();var o=n.offset().top-s;"none"!==n.css("transform")&&(o-=n.css("transform").split(/[()]/)[1].split(",")[5]),$("html, body").animate({scrollTop:o},800,"easeOutQuart",$.proxy((function(){e.toggleClass("scrollingTo",!1)}),this))}n.is(".js-tabs-page")&&n.closest(".js-tabs").find('[href="'+i+'"]').trigger("click.switchTabs")}e.off("click.hashNav").on("click.hashNav",'[data-hash], a[href^="#"]:not([href="#"], [class*="js-tabs-toggle"] a, .js-popup)',(function(e){!$(this).data("delay")||["md","lg","xl"].indexOf(helpers.screen())>=0?i.call(this,e):("boolean"!=typeof t&&clearTimeout(t),t=setTimeout($.proxy((function(){i.call(this,e)}),this),$(this).data("delay")||0))}))},imagesOnRetinaDisplays:function(t){(t=t||{}).namespace=t.namespace?t.namespace+" ":".b-page ","devicePixelRatio"in e&&e.devicePixelRatio>1&&($(t.namespace+".js-retina").each((function(){var e=$(this).attr("src"),t=$(this).data("2x");$(this).off("error.retinaFallback").on("error.retinaFallback",(function(){$(this).attr("src",e)})).attr("src",t)})),document.cookie="devicePixelRatio="+e.devicePixelRatio+";")},loadingOnRequire:function(t){function i(t,i){var n=this,s=$('<div class="js-loading-wrapper"></div>');$.ajax($.extend({},{dataType:"json",success:function(o){if(t.wrapping)s.append(o.html),s.css({opacity:0,transition:"opacity 400ms"}),n.append(s),s.slideUp(0),"IntersectionObserver"in e&&(lazyLoadImages=document.querySelectorAll(".lazy"),lazyLoadImages.forEach((function(e){imageObserver.observe(e)}))),setTimeout((function(){t.beforeShow&&t.beforeShow.call(s,o),s.slideDown({duration:400,easing:"easeOutQuart",step:function(){},complete:function(){t.onComplete&&t.onComplete.call(s,o),s.find("> *").unwrap(),$(e).trigger("resize"),$(e).trigger("floatedPanels.refresh")}}).css({overflow:"hidden",opacity:1})}),1);else{var a=$(o.html);(a=a.add(n.find("> div:last-child").filter((function(){return $(this).is(":hidden")})))).css({opacity:0,transition:"opacity 400ms"}),n.append(a),a.slideUp(0),"IntersectionObserver"in e&&(lazyLoadImages=document.querySelectorAll(".lazy"),lazyLoadImages.forEach((function(e){imageObserver.observe(e)}))),t.beforeShow&&t.beforeShow.call(n,o),a.slideDown({duration:400,easing:"easeOutQuart",step:function(){},complete:function(){t.onComplete&&t.onComplete.call($(this),o),$(e).trigger("resize"),$(e).trigger("floatedPanels.refresh")}}).css({opacity:""})}i&&i(o)}},t))}$("body").on("click.loadingOnRequire",t.btn,(function(e){e.preventDefault();var n=$(this).toggleClass("request",!0),s=$(n.data("loadingTarget")),o=n.attr("href").split("?"),a={};void 0!==o[1]&&(a=o[1].split("&").reduce((function(e,t,i,n){var s=t.split("=");return e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]),e}),{})),n.data("page",n.data("page")||2),i.call(s,{url:n.attr("href").split("?")[0],method:n.data("method")||"get",data:$.extend({},{page:n.data("page")},a),onComplete:t.onComplete,beforeShow:t.beforeShow,wrapping:$(this).data("wrapping")},(function(e){setTimeout((function(){n.toggleClass("request",!1)}),300),n.toggleClass("fade",e.last),n.closest(".js-loading-on-require-wrap").toggleClass("fade",e.last),n.attr("href",e.nextUrl||n.attr("href")).data("page",n.data("page")+1),e.btnText&&n.text(e.btnText),e.info&&$(n.data("loadingTarget")+"-info").text(e.info)}))}))}}}(window),sitePlugins=function(e,t){"use strict";return{carousels:function(t){t.selector=t.selector?t.selector:".b-carousel",t.namespace=t.namespace?t.namespace+" ":"",t.options=t.options?t.options:{};var i=$(t.namespace+t.selector);function n(){$.isFunction($.fn.owlCarousel)&&this.each((function(){var i=$(this),n=i.data("resolutions")?i.data("resolutions").split(","):["xs","sm","md","lg"],l=(i.data("loop"),i.find(".b-carousel_item").length-1);if(n.indexOf(helpers.screen())>=0&&l>=i.data()[helpers.screen()]){if(i.closest(".b-carousel_wrap").toggleClass("owl-carousel-wrap",!0),!i.hasClass("owl-carousel")&&(i.toggleClass("owl-carousel",!0).owlCarousel($.extend({items:1,margin:"number"==typeof i.data("margin")?i.data("margin"):20,animateOut:i.data("animateOut")||!1,animateIn:i.data("animateIn")||!1,autoplay:i.data("auto")||!1,autoplayTimeout:1e3*i.data("interval")||1e4,autoHeight:"object"!=typeof i.data("autoHeight")&&i.data("autoHeight")||!1,autoWidth:i.data("autoWidth")||!1,loop:void 0===i.data("loop")||i.data("loop"),lazyLoad:!!i.data("lazyLoad"),mouseDrag:!!i.data("mouseDrag")||!1,touchDrag:void 0===i.data("touchDrag")||!!i.data("touchDrag"),pullDrag:!1,freeDrag:!1,dots:i.data("dots")||!1,dotsEach:void 0===i.data("dotsEach")||!!i.data("dotsEach"),dotClass:"b-carousel_paging_bullet",dotsClass:"b-carousel_paging",dotsContainer:i.data("dotsContainer")||!1,nav:i.data("nav")||!1,navText:i.data("navText")||['<svg width="14" height="84" aria-hidden="true"><use xlink:href="#arrow-prev"></use></svg>','<svg width="14" height="84" aria-hidden="true"><use xlink:href="#arrow-next"></use></svg>'],navClass:i.data("navClass")||["b-carousel_arrow b-carousel_arrow__prev","b-carousel_arrow b-carousel_arrow__next"],navContainer:i.data("navContainer")||!1,smartSpeed:i.data("smartSpeed")||250,scrollBar:i.data("scrollBar")||!1,scrollBarContainer:i.data("scrollBarContainer")||!1,scrollBarClass:"b-carousel_scroll_bar",scrollBarHandleClass:"b-carousel_scroll_bar_handle",startPosition:void 0!==i.data("startPosition")?"last"===i.data("startPosition")?i.find(t.selector+"_item").length-1:i.data("startPosition"):0,useCSS:!!i.data("useCss"),fallbackEasing:"easeOutCubic",responsive:{0:{items:i.data("xs"),margin:"object"==typeof i.data("margin")?i.data("margin")[0]:i.data("margin"),mergeFit:!!i.data("mergeFit")&&i.data("mergeFit").split(",")[0],nav:s.call(i,i.data("xs")),dots:o.call(i,i.data("xs")),dotsEach:void 0!==i.data("dotsEach")&&!!i.data("dotsEach"),loop:a.call(i,i.data("xs")),startPosition:void 0!==i.data("startPositionXs")?"last"===i.data("startPositionXs")?i.find(t.selector+"_item").length-1:i.data("startPositionXs"):0},480:{items:i.data("sm"),margin:"object"==typeof i.data("margin")?i.data("margin")[1]:i.data("margin"),mergeFit:!!i.data("mergeFit")&&i.data("mergeFit").split(",")[1],nav:s.call(i,i.data("sm")),dots:o.call(i,i.data("sm")),dotsEach:void 0!==i.data("dotsEach")&&!!i.data("dotsEach"),loop:a.call(i,i.data("sm")),startPosition:void 0!==i.data("startPositionSm")?"last"===i.data("startPositionSm")?i.find(t.selector+"_item").length-1:i.data("startPositionSm"):0},768:{items:i.data("md"),margin:"object"==typeof i.data("margin")?i.data("margin")[2]:i.data("margin"),mergeFit:!!i.data("mergeFit")&&i.data("mergeFit").split(",")[2],nav:s.call(i,i.data("md")),dots:o.call(i,i.data("md")),loop:a.call(i,i.data("md")),startPosition:void 0!==i.data("startPositionMd")?"last"===i.data("startPositionMd")?i.find(t.selector+"_item").length-1:i.data("startPositionMd"):0},1024:{items:i.data("mdLg")||i.data("lg"),margin:"object"==typeof i.data("margin")?i.data("margin")[2]:i.data("margin"),mergeFit:!!i.data("mergeFit")&&i.data("mergeFit").split(",")[2],nav:s.call(i,i.data("mdLg")||i.data("lg")),dots:o.call(i,i.data("mdLg")||i.data("lg")),loop:a.call(i,i.data("mdLg")||i.data("lg")),startPosition:void 0!==i.data("startPositionLg")?"last"===i.data("startPositionLg")?i.find(t.selector+"_item").length-1:i.data("startPositionLg"):0},1200:{items:i.data("lg"),margin:"object"==typeof i.data("margin")?i.data("margin")[3]:i.data("margin"),mergeFit:!!i.data("mergeFit")&&i.data("mergeFit").split(",")[3],nav:s.call(i,i.data("lg")),dots:o.call(i,i.data("lg")),loop:a.call(i,i.data("lg")),startPosition:void 0!==i.data("startPositionLg")?"last"===i.data("startPositionLg")?i.find(t.selector+"_item").length-1:i.data("startPositionLg"):0}},onInitialized:function(){this._direction=null,r.call(this),"IntersectionObserver"in e&&(lazyLoadClonedImages=document.querySelectorAll(".cloned .lazy"),lazyLoadClonedImages.forEach((function(e){imageObserver&&imageObserver.observe(e)})))},onResized:function(){r.call(this)},onChanged:function(){r.call(this)},onChange:function(e){"position"===e.property.name&&(this._direction=e.property.value>e.item.index?"next":"prev")}},t.options)),void 0!==i.data("sync"))){var c=i.data("sync"),d=$(c).closest(".b-carousel");$(c).first().addClass("active"),$("body").on("click.owlCarouselThumbs",c,(function(e,t){e.preventDefault();d.find(".owl-item.active").find(c+".active").closest(".owl-item").index();$(c).removeClass("active"),$(c+'[data-index="'+$(this).data("index")+'"]').addClass("active"),!0,i.trigger("to.owl.carousel",[$(this).data("index"),i.data("smartSpeed")||250],!0),void 0!==i.data("timerSyncInProcess")&&clearTimeout(i.data("timerSyncInProcess")),i.data("timerSyncInProcess",setTimeout($.proxy((function(){!1}),this),400))})),i.data("syncFeedback")&&i.on("changed.owl.carousel",(function(e){var t=i.data("sync"),n=e.item.index+1-e.relatedTarget._clones.length/2,s=e.item.count;n=n>s||0===n?"next"===e.relatedTarget._direction?0:s-n%s-1:n-1,$(t).removeClass("active"),$(t+'[data-index="'+n+'"]').addClass("active"),d.trigger("to.owl.carousel",[n,300])}))}}else i.closest(".b-carousel_wrap").toggleClass("owl-carousel-wrap",!1),(i.data("owlCarousel")||i.data("owl.carousel"))&&(i.trigger("destroy.owl.carousel").removeClass("owl-carousel owl-loaded"),i.find(".owl-stage-outer").children().unwrap())}))}function s(e){var t=void 0===this.data("nav")||!!this.data("nav"),i=this.find(".b-carousel_item, > div").length>e;return t&&i}function o(e){var t=!!this.data("dots"),i=this.find(".b-carousel_item, > div").length>e;return t&&i}function a(e){var t=void 0===this.data("loop")||!!this.data("loop"),i=this.find(".b-carousel_item, > div").length>e;return t&&i}function r(){if(this.$element.hasClass("b-carousel__counter")){var e=this.$element.find(".b-carousel_paging").find(".b-carousel_paging_bullet").length,t=this.$element.find(".b-carousel_paging").find(".b-carousel_paging_bullet.active").index()+1;this.$element.attr("data-counter",t+"/"+e),$(this.$element.data("counter")).html("<span>"+t+"</span>/"+e).removeClass("hidden")}}n.call(i),$(e).off("resize.owlCarouselRefresh").on("resize.owlCarouselRefresh",(function(){helpers.delay.call($(e),(function(){n.call(i)}),250,"owl-")}))},popUps:function(){var t=$(".b-page"),i=$(".js-popup"),n=$(".js-lightBox"),s=$(".js-videoBox"),o={animationStyleOfBox:"scale",animationStyleOfChange:"slide",boxHorizontalGutters:10,boxVerticalGutters:40,closeBtnLocation:"box",directionBtnLocation:"overlay",overlayOpacity:.5,scrollLocker:t};$.isFunction($.fn.leafLetPopUp)&&(i.leafLetPopUp($.extend({},o,{closeBtnLocation:"box",selector:".js-popup",boxWidth:function(){return this.data("boxWidth")||600},beforeLoad:function(e,t){var i=$(".b-leaflet");i.data("triggerElement",t.elements.link),t.elements.link.data("leafletMod")&&($("body").addClass(t.elements.link.data("leafletMod")),i.addClass(t.elements.link.data("leafletMod")));var n=(a=t.elements.link).data("item_name"),s=a.data("item_type"),o=a.data("item_title");i.data("arenda_item_name",n),i.data("arenda_item_title",o),i.data("arenda_item_type",s);var a,r=(a=t.elements.link).data("not_available_item_href"),l=a.data("not_available_item_title");i.data("not_available_item_href","https://www.vodovoz-spb.ru"+r),i.data("not_available_item_title",l)},beforeClose:function(e){e.elements.link.data("leafletMod")&&$("body").removeClass(e.elements.link.data("leafletMod"))},afterLoad:function(){var e=$(".b-leaflet"),t=e.data("arenda_item_name"),i=e.data("arenda_item_title"),n=e.data("arenda_item_type");console.log(n),$(".arenda_month_form #arenda_name").val(t),$(".arenda_month_form .arenda_info").html(i),$(".arenda_month_form #arenda_type").val(n);var s=$(".b-leaflet"),o=s.data("not_available_item_href"),a=s.data("not_available_item_title");if($(".not_available_form #not_available_item_href").val(o),$(".not_available_form #not_available_item_title").val(a),forms.init(".b-leaflet"),$(".b-leaflet .recaptcha").length>0){var r=$(".b-leaflet .recaptcha").get(0);grecaptcha.render(r,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})}sitePlugins.carousels({selector:".b-carousel",namespace:".b-leaflet"}),console.log($(".owl-item:not('.cloned')")),$(".owl-item:not('.cloned') > .b-carousel_item > .l_img, .b-carousel > .b-carousel_item > .l_img").attr("data-lightbox","image")}})),n.leafLetPopUp($.extend({},o,{animationStyleOfBox:"scale",boxWidth:1200,boxHorizontalGutters:30,boxVerticalGutters:30,contentType:"image",closeBtnLocation:"overlay",directionBtnLocation:"overlay",overlayOpacity:.5,selector:".js-lightBox",maxHeight:function(){return $(e).height()-2*parseInt($(".b-leaflet_inner").css("paddingTop"),10)}})),s.leafLetPopUp($.extend({},o,{animationStyleOfBox:"scale",boxWidth:1e3,content:!0,contentType:"iframe",closeBtnLocation:"overlay",directionBtnLocation:"overlay",overlayOpacity:.5,selector:".js-videoBox"})),$("body").off("click.closeLeafletPopups").on("click.closeLeafletPopups",".js-popup-close",(function(e){e.preventDefault(),$("body").removeClass("b-leaflet_mobileForm"),i.leafLetPopUp("hide")})))}}}(window),shopModules=function(e,t){"use strict";var i=$("body"),n=".b-good, .b-product, .b-quickView, .b-mp-water_product, .b-mp-rent_card";function s(){i.on("click.setQuickAmount","[data-quick-amount]",(function(e){e.preventDefault();var t=$(this),i=t.data("quickAmount")||parseInt(t.text(),10),n='[data-quick-amount-id="'+t.data("quickAmountId")+'"]';i=i.isInteger()?i:1,$("button"+n).removeClass("active"),t.addClass("active"),$(".js-spinner"+n).val(i).trigger("change")})),i.on("change.unsetQuickAmount",".js-spinner:not(.js-prevent-request)",(function(e){e.preventDefault();var t=$(this),i=parseInt(t.val(),10),s='button[data-quick-amount-id="'+t.data("quickAmountId")+'"]';$(s).removeClass("active"),$(s+'[data-quick-amount="'+i+'"]').addClass("active"),o.call(t.closest(n),i)}))}function o(e){e=e||1;var t=function(e){var t=0;return $.ajax({url:e||"/udata/emarket/water19lAmountInCart.json",dataType:"json",async:!1,success:function(e){parseInt(e.result)>0&&(t=e.result)}}),t}(),i=e;this.hasClass("water19l")&&(i=e+parseInt(t));var n=this.find("[data-price-array]").data("priceArray"),s=this.find("[data-actual-price-array]").data("actualPriceArray"),o=0,a=0,r="",l=this.find(".js-add-to-cart");if(s){$.each(s,(function(t){i>=this.range[0]&&(this.range.length>1?i<=this.range[1]:s.length===t+1||i<=this.range[0])&&(t,o=this.price,void 0!==this.origin_price&&(o=this.price,a=this.origin_price,r=' <span class="old_sum">'+a*e+"</span>  ₽"))}));var c=this.find(".b-mp-water_product_prices_table");c.find("tr").removeClass("current"),c.find("tr").each((function(){var t=$(this);t.data("amount_val")<=e&&(c.find("tr").removeClass("current"),t.addClass("current"))})),this.find("[data-actual-sum]").data("actualSum",o*e).html(o*e),this.find("[data-actual-sum]").parent().find(".old_sum_wrap").html(r),this.find("[data-actual-price]").data("actualPrice",o).html(o);var d=this.find("[data-actual-price]").parents(".b-good:first").data("capacity_val");d>0&&(this.find(".capacity_one_item_price").length>0?this.find(".capacity_one_item_price").html(o/d+" руб. за шт., <br/>"):this.find("[data-actual-price]").before('<div class="capacity_one_item_price">'+o/d+" руб. за шт., <br/></div>")),l.data("price",o)}n&&($.each(n,(function(t){e>=this.range[0]&&(this.range.length>1?e<=this.range[1]:n.length===t+1||e<=this.range[0])&&this.price})),this.find("[data-sum]").data("sum",o*e).text(o*e),this.find("[data-price]").data("price",o).text(o))}function a(){i.on("click",".js_banners_wrap .promo-btn.set",(function(t){t.preventDefault(),e.location="/emarket/cart/"})),i.on("click.addToCart",".js-add-to-cart",(function(t){t.preventDefault();var i=$(this);if(!i.data("multiAddingAllowed")&&i.hasClass("inCart")&&i.data("redirectAllowed")&&(e.location=i.attr("href")),i.data("multiAddingAllowed")||!i.hasClass("inCart")){var n=i.closest(".b-good, .b-quickView_purchase, form").find("input, select, textarea").serializeObject(),s=$.extend({},i.data(),n);!function(e,t,i,n){$.ajax({url:e,method:t,dataType:"json",data:i,success:function(e){if(e.status){var t=n.closest(".b-carousel");if(e.btnClass){if(n.data("originalLabel",n.text()).toggleClass(e.btnClass,!0).text(e.btnLabel||"В корзине"),t.find('.js-add-to-cart[data-id="'+n.data("id")+'"]').not(".inCart").data("originalLabel",n.text()).toggleClass(e.btnClass,!0).text(e.btnLabel||"В корзине"),console.log("isPromo"),console.log(e),console.log(e.isPromo),e.isPromo&&"1"==e.isPromo){console.log("isPromo = 1"),e.is_promo_replace&&(console.log("is_promo_replace"),console.log(e.is_promo_replace),"1"==e.is_promo_replace&&($(".b-footer_cart").addClass("promo_replaced_block"),$(".promo_replaced").removeClass("hidden"))),$(".js-add-to-cart.isPromo").not(".inCart").not('[data-id="1027"]').data("originalLabel",n.text()).toggleClass(e.btnClass,!0).text("Недоступно").attr("disabled","disabled");var s=i.id?i.id:0;$(".js-add-to-cart.isPromo.inCart").not('[data-id="1027"]').not('[data-id="'+s+'"]').addClass("replace").removeClass("set").removeClass("inCart").text("Заменить").removeAttr("disabled"),$('.js-add-to-cart.isPromo.inCart[data-id="'+s+'"]').addClass("set").removeClass("replace").text("Оформить")}if(n.data("multiAddingAllowed")?setTimeout((function(){n.toggleClass(e.btnClass,!1).text(n.data("originalLabel"))}),"number"!=typeof n.data("multiAddingAllowed")?2e3:n.data("multiAddingAllowed")):n.is("a")&&e.btnUrl&&n.data("redirectAllowed",!0).data("url",n.data("url")||n.attr("href")).attr("href",e.btnUrl),n.closest(".b-quickView_purchase").length){var o=$(".b-catalog_feed").find('.js-add-to-cart[data-id="'+n.data("id")+'"]').first().not(".inCart");o.data("originalLabel",n.text()).toggleClass(e.btnClass,!0).text(e.btnLabel||"В корзине"),o.is("a")&&e.btnUrl&&o.data("redirectAllowed",!0).data("url",o.data("url")||o.attr("href")).attr("href",e.btnUrl);var a=n.closest(".b-quickView_purchase"),l=o.closest(".b-good_purchase"),c=a.find(".js-spinner").val(),d=a.find(".js-price-range-change").val();l.find(".js-spinner").val(c),l.find(".js-price-range-change").val(d).trigger("change.priceRangesChange"),l.find("select").selectric("refresh")}}if(console.log("start recommend check"),e.cart&&(r(e.cart),n.parents(".recommended_items").length>0)){console.log("load  recommend change btn");var h=n.closest(".bottom_recommend_box"),u=e["attribute:id"]?e["attribute:id"]:"",p=parseInt($(".recommend-good-amount spinner-input input",h).val())+1;$(".recommend-good-amount",h).removeClass("hidden").data("cart-item-id",u),$(".recommend-good-amount spinner-input input",h).val(p).trigger("blur").trigger("change"),$(".recommend_btn_add",h).addClass("hidden")}if(console.log("is wheel item?"),e.item&&e.item.wheel&&e.item.wheel.name){console.log("wheel add item");var f="";e.item&&e.item.wheel&&e.item.wheel.img&&(f='<img src="'+e.item.wheel.img+'"/>');var m='<div class="wheel_product cart-table-good cart-table__item"><div class="wheel_product_img cart-table-good__pic">'+f+'</div><div class="wheel_product_self"><div class="wheel_product_name cart-table-good__title">'+e.item.wheel.name+'</div><div class="wheel_product_cnt">ПОДАРОК</div></div><div class="wheel_product_price">бесплатно</div> </div>';$(".cart-table .wheel_product").remove(),$(".cart-table").append(m),console.log("try wheel discount update"),e.item&&e.item.wheel&&e.item.wheel.discount&&e.item.wheel.discount.status&&e.item.wheel.discount.item?(console.log("try wheel discount update"),$.dispatch({type:"cart-discount-update",payload:e.item.wheel.discount.item,status:e.item.wheel.discount.status,reason:"wheelDiscount"}),e.status&&$.dispatch({type:"cart-table-update",payload:e,status:e.status})):($.dispatch({type:"cart-discount-update",status:!1,reason:"wheelDiscount",payload:{}}),e.status&&$.dispatch({type:"cart-table-update",payload:e,status:e.status}))}}}})}($(this).attr("href")||$(this).closest("form").attr("action")||$(this).data("url")||e.location,$(this).data("method")||"post",s,i)}}))}function r(e){var t=$(".v-header-darkline__cart"),i=$("[data-amount]",t),n=$(".js_cart_empty_notice",t),s=$(".v-header-mobileline__cart [data-amount]");e.amount=e.amount.isInteger()?e.amount:0,e.amount>0?t.addClass("v-header-darkline__cart--full").removeClass("v-header-darkline__cart--empty"):t.removeClass("v-header-darkline__cart--full").addClass("v-header-darkline__cart--empty"),n.toggleClass("hidden",e.amount>0),i.toggleClass("hidden",!(e.amount>0)).data("amount",e.amount).text(e.amount),s.toggleClass("hidden",!(e.amount>0)).data("amount",e.amount).text(e.amount)}function l(e,t,i,n){if(e.status&&(e.cart&&r(e.cart),e.total&&(n.find("[data-total]").data("total",e.total.actual),n.find("[data-total]").text(e.total.actual.toString()),$(".js-checkout-total-sum").text(e.total.actual.toString())),e.item&&(t.find("[data-price]").data("price",e.item.price.actual),t.find("[data-price]").text(e.item.sum.actual.toString())),e.items&&e.items["nodes:item"]))for(var s in e.items["nodes:item"])if(e.items["nodes:item"].hasOwnProperty(s)&&e.items["nodes:item"][s]){var o=e.items["nodes:item"][s],a=o["attribute:id"],l="NULL",c="NULL",d="NULL";o.price&&(l=o.price.actual),o["total-price"]&&(d=o["total-price"].actual),o.amount&&(c=o.amount);var h=$(".b-cart_table_feed .cart_item_"+a);h.find("[data-price]").data("price",l);var u=h.find("[data-actual-price-array]").data("actual-price-array"),p=0,f="";$.each(u,(function(e){c>=this.range[0]&&(this.range.length>1?c<=this.range[1]:u.length===e+1||c<=this.range[0])&&(e,this.price,this.hasOwnProperty("origin_price")&&void 0!==this.origin_price&&(this.price,p=this.origin_price,f=' <strike class="old_sum">'+p*c+"</strike>"))})),h.find("[data-price]").html(f+d.toString())}}function c(){console.log("_clearCart"),this.add($(".b-checkout_footer")).toggleClass("fade",!0).slideUp({duration:400,easing:"easeOutQuart",complete:function(){$(this).find(".b-cart_table_feed").empty(),d.call($(this),!0)}}),$(".b-cart_notice").removeClass("hidden").slideDown({duration:400,easing:"easeOutQuart"}).removeClass("fade").nextAll().hide(),$(".b-checkout_full").slideUp({duration:400,easing:"easeOutQuart"})}function d(t){var i=this,n=i.closest("form"),s=i.closest(".b-cart_table_item"),o=(i.closest(".b-cart_feed"),$(".js-cart")),a=$(".b-cart_table_footer",o);if(t)helpers.delay.call(i,(function(){var t=s.find("input, select, textarea").serializeObject(),o=$.extend({customAction:"update"},i.data(),t);$.ajax({url:n.data("url")||n.attr("action")||e.location,method:n.attr("method")||"post",dataType:"json",data:o,success:function(e){l(e,s,0,a)}})}),300);else{var c=0,d=0;n.find(".b-cart_table_item").each((function(){var e=$(this).find("[data-price]").data("price")||0,t=parseInt($(this).find(".js-spinner").val(),10);t>0||(t=parseInt($(this).find(".hidden-amount").val(),10)),c+=e*t,d+=t,$(this).find("[data-price]").text(e*t)})),a.find("[data-total]").text(c.toString()),r({sum:c,amount:d})}}function h(){var t=!1;e.recaptcha_delivery_suc=function(){var e=$("#delivery .js-phone-sms-send"),i=e.closest(".js-phone"),n=i.find(".js-phone-sms-timer"),o=i.find(".js-phone-field");e.closest("form").find(".g-recaptcha").addClass("hidden"),e.data("repeat_count",0),n.removeClass("hidden").find("[data-timer]").html(i.data("repeatTimer")?i.data("repeatTimer")+1:31),s((function(){t=!1,n.addClass("hidden"),e.removeClass("hidden"),o.prop("hidden",!1)}),n.find("[data-timer]"))},e.recaptcha_pickup_suc=function(){var e=$("#pickup .js-phone-sms-send"),i=e.closest(".js-phone"),n=i.find(".js-phone-sms-timer"),o=i.find(".js-phone-field");e.closest("form").find(".g-recaptcha").addClass("hidden"),e.data("repeat_count",0),n.removeClass("hidden").find("[data-timer]").html(i.data("repeatTimer")?i.data("repeatTimer")+1:31),s((function(){t=!1,n.addClass("hidden"),e.removeClass("hidden"),o.prop("hidden",!1)}),n.find("[data-timer]"))},i.on("keyup.inputPhone",".js-phone-field",(function(e){var i=$(this),n=i.closest(".js-phone"),s=n.find(".js-phone-sms"),o=(n.find(".js-phone-sms-timer"),n.find(".b-checkout_contacts_sms_send_btn")),a=(n.find(".js-phone-sms-send"),i.data("phonecomplete"));console.log(i),console.log(a),console.log(o),s.data("required")||forms.toggleValidation.call(s.closest(".b-checkout_contacts_sms"),!0,!0),a&&n.data("url")&&!t&&o.show()})),i.on("keyup.inputPhone",".js-phone-sms",(function(e){var t=$(this),i=t.closest(".js-phone"),s=t.data("smsCodeComplete");helpers.delay.call(t,(function(){s&&i.data("url-check")&&function(e,t){t.parents(".b-form_box").removeClass("m-error"),t.parent().find(".b-form_box_error").remove(),t.prop("readonly",!0),t.data("smscodevalid",!1);t.parents("form").find(".js-confirm-by-phone"),e=t.closest(".js-phone");var i=e.find(".js-phone-sms-timer"),s=e.find(".js-phone-sms-send");$.ajax({url:e.data("url-check"),method:"post",dataType:"json",data:{sms:t.val()},success:function(e){var o="Что-то пошло не так",a=!1;t.data("smscodevalid",!1),e.code&&e.msg&&(o=e.msg,10!=e.code&&30!=e.code?(t.prop("readonly",!1),t.data("smscodevalid",!1),console.log("no - smscodevalid")):(t.prop("readonly",!0),t.data("smscodevalid",!0),console.log("smscodevalid"),t.parents("form").find("#delivery-customer").length>0&&t.parents("form").find("#delivery-customer").trigger("change"),t.parents("form").find("#pickup-customer").length>0&&t.parents("form").find("#pickup-customer").trigger("change"),s.addClass("hidden"),i.addClass("hidden"),clearTimeout(n),a=!0)),t.parents(".b-form_box").addClass("m-error"),a?t.parents(".b-form_box").addClass("m-successful"):t.parents(".b-form_box").removeClass("m-successful"),t.prop("readonly",!1),t.parents(".b-form_box").find(".b-form_box_error").length>0?t.parents(".b-form_box").find(".b-form_box_error").text(o):t.after('<div class="b-form_box_error">'+o+"</div>")}})}(i,t)}))})),i.on("click.repeatSMS",".js-phone-sms-presend",(function(e){var i=$(this),n=i.closest(".js-phone"),s=n.find(".js-phone-sms-timer"),a=n.find(".js-phone-field"),r=n.find(".js-phone-sms-send"),l=n.find(".js-phone-sms"),c=n.find(".js-phone-sms-wrap"),d=n.find(".js-phone-edit"),h=a.data("phonecomplete"),u=l.data("smscodevalid");console.log(l),console.log(u),h&&n.data("url")&&!t&&(t=!0,i.hide(),c.removeClass("hidden"),d.show(),o(n,a,s,r))})),i.on("click.repeatSMS",".js-phone-edit",(function(e){var i=$(this),s=i.closest(".js-phone"),o=s.find(".js-phone-sms-timer"),a=s.find(".js-phone-field"),r=s.find(".js-phone-sms-send"),l=s.find(".js-phone-sms"),c=s.find(".js-phone-sms-wrap");s.find(".js-phone-sms-presend"),a.data("phonecomplete"),l.data("smscodevalid");o.addClass("hidden"),clearTimeout(n),a.prop("readonly",!1),r.addClass("hidden"),a.data("smscodevalid",!1),t=!1,c.addClass("hidden"),i.hide()})),i.on("click.repeatSMS",".js-phone-sms-send",(function(e){var i=$(this),n=i.closest(".js-phone"),s=n.find(".js-phone-sms-timer"),a=n.find(".js-phone-field");a.data("phonecomplete")&&n.data("url")&&!t&&(t=!0,o(n,a,s,i))}));var n=null;function s(e,t){t[0].innerHTML--,0===Number(t[0].innerHTML)?(clearTimeout(n),e&&e()):n=setTimeout((function(){s(e,t)}),1e3)}function o(e,i,n,o){i.parents("form").find(".js-confirm-by-phone").prop("disabled",!0).prop("checked",!0),o.addClass("hidden"),i.prop("readonly",!0);var a=o.data("repeat_count")&&o.data("repeat_count")>0?o.data("repeat_count")+1:1;console.log("repeat_count"),console.log(o.data("repeat_count")),console.log(a),o.data("repeat_count",a),a<3?(n.removeClass("hidden").find("[data-timer]").html(e.data("repeatTimer")?e.data("repeatTimer")+1:31),s((function(){t=!1,n.addClass("hidden"),o.removeClass("hidden"),i.prop("hidden",!1)}),n.find("[data-timer]"))):o.closest("form").find(".g-recaptcha").removeClass("hidden"),$.ajax({url:e.data("url"),method:"post",dataType:"json",data:{phone:i.val()},success:function(e){}})}}return i.on("change.emitActionForPhoneConfirmation emit.actionForPhoneConfirmation",".b-checkout_form input, .b-checkout_form select",(function(e){var t=$(this).closest("form"),i=(!0===$(this).data("required-phone")||$(this).data("required-phone"),t.find('[data-action-target="phone-confirmation"]'));t.find("[data-required-phone]").each((function(){var e=$(this),t=e.data("required");e.attr("data-old-required",!!t).data("old-required",!!t),e.attr("data-required",!0).data("required",!0)}));var n=$.verifyForm(t,{type:"submit"},{}),s=!0===t.find(".js-phone-sms").data("smscodevalid")||""===t.find(".js-phone-sms").data("smscodevalid");//!!$('.js-phone-sms').data('smscodevalid');
  n&&s?i.prop("disabled",!1):i.prop("disabled",!0).prop("checked",!1),t.find("[data-required-phone]").each((function(){var e=$(this),t=e.data("old-required");e.attr("data-required",!!t).data("required",!!t)}))})),{init:function(){a(),s(),i.on("change.priceRangesChange",".js-price-range-change",(function(e){e.preventDefault();var t=$(this),i=t.closest(n),s=t.find("option:selected").data("prices"),o=t.find("option:selected").data("actualPrices");s&&i.find("[data-price-array]").data("priceArray",s),o&&i.find("[data-actual-price-array]").data("actualPriceArray",o),i.find(".js-spinner").trigger("change")})),i.on("change.updateCart",".js-cart input.js-spinner",(function(t){t.preventDefault();var i=$(this),n=i.closest(".b-cart_table_item"),s=i.closest(".b-cart_feed"),o=$(".b-cart_table_footer",s),a=n.find("input, select, textarea").serializeObject(),r=$.extend({customAction:"remove"},i.data(),a);$.ajax({url:i.data("url")+"?amount="+i.val()||e.location,method:s.data("method")||"post",dataType:"json",data:r,success:function(e){console.log("change.updateCart"),console.log(e),l(e,n,0,o),$(".js-tabs-btn.current").trigger("click")}})})),i.on("click.removeFromCart",".js-remove-from-cart",(function(t){t.preventDefault();var i=$(this),n=i.closest(".b-cart_table_item"),s=i.closest(".b-cart_feed"),o=$(".b-cart_table_footer",s),a=n.find("input, select, textarea").serializeObject(),h=$.extend({customAction:"remove"},i.data(),a);$.ajax({url:i.attr("href")||i.data("url")||e.location,method:s.data("method")||"post",dataType:"json",data:h,success:function(e){if(i.hasClass("js-cart-clear")&&(console.log("cart-clear"),$.dispatch({type:"cart-clear"})),e.status){if(e.cart&&r(e.cart),e.total&&(o.find("[data-total]").data("total",e.total.actual),o.find("[data-total]").text(e.total.actual.toString())),e.item&&e.hasOwnProperty("item")&&e.item.hasOwnProperty("deposit_pid")&&e.item.deposit_pid&&e.item.hasOwnProperty("deposit_itemid")&&e.item.deposit_itemid){var t=$(".cart_item_"+e.item.deposit_itemid);t.length>0&&t.toggleClass("fade",!0).rowSlideUp(400,(function(){t.remove(),s.find(".b-cart_table_item").length>1||c.call(s)}),"easeOutQuart")}var a=s.find(".b-cart_table_item").length;console.log("-on remove-"),console.log(a),console.log(s.find(".b-cart_table_item")),a>1?(n.hasClass("__discount")||n.hasClass("__promoCode")||n.hasClass("__pickupDiscount")||(["md","lg"].indexOf(helpers.screen())>=0?(console.log(n),n.toggleClass("fade",!0).rowSlideUp(400,(function(){console.log("-on remove again PRE-"),console.log(n),n.remove(),d.call(s,!0);var e=s.find(".b-cart_table_item").length;console.log("-on remove again-"),console.log(e),console.log(s.find(".b-cart_table_item")),e<2&&c.call(s)}),"easeOutQuart")):n.toggleClass("fade",!0).slideUp({duration:400,easing:"easeOutQuart",complete:function(){n.remove(),d.call(s,!0);var e=s.find(".b-cart_table_item").length;console.log("-on remove again2-"),console.log(e),console.log(s.find(".b-cart_table_item")),e<2&&c.call(s)}})),l(e,n,0,o),$(".js-tabs-btn.current").trigger("click")):c.call(s)}}})})),function(){function t(e,t,i){var n="";if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),n="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}$(".sort_list a").on("click",(function(){var i=$(this),n=i.data("field");t("sort_field",n);var s=i.hasClass("up_arrow")?"0":"1";"id"===n&&(s=1),t("sort_direction",s),e.location.reload(!0)})),$('a[href="#arenda_month"]').each((function(){var e=$(this),t=e.text(),i=e.attr("title"),n=e.parents("tr").find("td:eq(1)").html().replace("<br>"," ").replace("<br/>"," ").replace("<br />"," ").replace("<br />"," ");$(this).replaceWith('<button class="js-popup arenda_month" data-item_name="'+n+'" data-item_type="111" data-item_title="'+i+'" data-leaflet-mod="b-leaflet__orange" data-href="/templates/newvodovoz/arenda_month.html">'+t+"</button>")})),$('a[href="#arenda_day"]').each((function(){var e=$(this),t=e.text(),i=e.attr("title"),n=e.parents("tr").find("td:eq(1)").html().replace("<br>"," ").replace("<br/>"," ").replace("<br />"," ").replace("<br />"," ");$(this).replaceWith('<button class="js-popup arenda_month" data-item_name="'+n+'" data-item_type="222" data-item_title="'+i+'" data-leaflet-mod="b-leaflet__orange" data-href="/templates/newvodovoz/arenda_month.html">'+t+"</button>")})),$("img#zhalobabutton").each((function(){var e=$(this),t=e.attr("src"),i=e.attr("width"),n=e.attr("height");$(this).replaceWith('<button class="js-popup zhalobabutton" data-leaflet-mod="b-leaflet__orange" data-href="/templates/newvodovoz/contacts.html">Пожаловаться директору</button>'),$(".zhalobabutton").css({background:"url("+t+") no-repeat center center","background-size":"contain;",width:i+"px",height:n+"px"})}))}(),h(),i.on("change.emitAction emit.action","[data-action]",(function(e){var t=$(this),i=t.data("action"),n=t.closest("form");$.each(i.split(":"),(function(e,i){var s=n.find('[data-action="'+i+'"]:checked').data("action-state"),o=n.find('[data-action-target="'+i+'"]');switch(i){case"online":o.prop("disabled","disabled"===s),"disabled"===s&&o.prop("checked",!1);break;case"date-lock":var a=n.find(".b-checkout_datetime"),r=a.find(".js-datePicker");t.val().length>0&&t.data("isComplete")?(r.removeClass("disabled"),a.find("select").prop("disabled",!1).selectric("refresh"),forms.toggleValidation.call(a,!0,!1)):(r.addClass("disabled"),r.data("datepicker").clear(),a.find("select").val(null).prop("disabled",!0).selectric("refresh"),forms.toggleValidation.call(a,!1,!1))}}))})),i.on("keyup.promoCode",'.b-cart_tools_promoCode input[type="text"]',(function(){var t=$(this),i=t.closest(".form"),n=$(".b-cart_table_item.__discount"),s=$(".js-cart"),o=$(".b-cart_table_footer",s),a=(n.closest(".b-cart_feed"),i.find("input, select, textarea").serializeObject()),r=$.extend({customAction:"promoCode"},t.data(),a);helpers.delay.call(i,(function(){t.val().length>0?$.ajax({url:i.data("action")||e.location,method:i.data("method")||"post",dataType:"json",data:r,success:function(e){e.status?(t.prop("readonly",!0),i.data("applied",!0),formNotifications.hideErrorLabel.call(t),e.item&&e.item.title&&e.item.price&&(n.find(".b-cart_table_item_good span").html(e.item.title),n.find(".b-cart_table_item_sum span").html(e.item.price),n.removeClass("hidden")),e.cart&&l(e.cart,n,0,o)):!e.status&&e.message&&(t.prop("readonly",!1),i.data("applied",!1),n.addClass("hidden"),formNotifications.showErrorLabel.call(t,e.message,0)),$(".b-checkout_full").trigger("tabs.change",{current:$(".b-checkout_full_tabs .current").data("href")})}}):(t.prop("readonly",!1),i.data("applied",!1),n.addClass("hidden"),formNotifications.hideErrorLabel.call(t),$(".b-checkout_full").trigger("tabs.change",{current:$(".b-checkout_full_tabs .current").data("href")}))}),500)})),i.on("click.promoCodeCancel",".js-cancel-promo-code",(function(){var e=$(this),t=$('.b-cart_tools_promoCode input[type="text"]'),i=t.closest(".form"),n=$(".b-cart_table_item.__discount"),s=$(".js-cart"),o=$(".b-cart_table_footer",s);n.closest(".b-cart_feed"),i.data("applied",!1),helpers.delay.call(i,(function(){$.ajax({url:e.data("url"),method:e.data("method")||"post",dataType:"json",success:function(e){e.status&&(t.val("").prop("readonly",!1),i.data("applied",!1),n.addClass("hidden"),formNotifications.hideErrorLabel.call(i),$(".b-checkout_full").trigger("tabs.change",{current:$(".b-checkout_full_tabs .current").data("href")}),e.cart&&l(e.cart,n,0,o))}})}))})),i.on("tabs.change emit.checkoutType",".b-checkout_full",(function(t,i){var n="#pickup"===i.current,s=$(".b-cart_tools_promoCode .form").data("applied");$(".b-checkout_full_method_notice").toggleClass("hidden",!n),$(".b-checkout_full_method_notice .regular").toggleClass("hidden",s),$(".b-checkout_full_method_notice .promocode").toggleClass("hidden",!s);var o=$(this),a=$(".b-cart_table_item.__discount"),r=$(".js-cart"),c=$(".b-cart_table_footer",r),d=a.closest(".form"),h=(a.closest(".b-cart_feed"),$.extend({customAction:"pickupDiscount"},o.find("[data-get-discount-params].current").data("getDiscountParams")));$.ajax({url:o.data("getDiscount")||e.location,method:d.data("method")||"post",dataType:"json",data:h,success:function(e){e.status&&!s?(e.item&&e.item.title&&e.item.price?(a.find(".b-cart_table_item_good span").html(e.item.title),a.find(".b-cart_table_item_sum span").html(e.item.price),a.removeClass("hidden")):a.addClass("hidden"),e.cart&&l(e.cart,a,0,c)):s||(a.addClass("hidden"),e.cart&&l(e.cart,a,0,c))}})})),$(".b-checkout_full").trigger("emit.checkoutType",{current:$(".b-checkout_full_tabs .current").data("href")}),i.on("change.refundBottles",".b-cart_tools_refund .js-spinner",(function(){var t=$(this),i=t.closest(".form"),n=i.find("input, select, textarea").serializeObject(),s=$.extend({customAction:"refundBottles"},t.data(),n);helpers.delay.call(i,(function(){$.ajax({url:i.data("action")||e.location,method:i.data("method")||"post",dataType:"json",data:s,success:function(e){e.status}})}),500)}))},_updateCartWidget:r}}(window),cartFunctions=function(e,t){"use strict";var i=$("body"),n={noDeliveryPrice:"укажите адрес/время",promocodeDiscount:" за промокод",pickupDiscount:" за самовывоз"},s={discount:{pickup:!1,promocode:!1},deliveryType:"delivery",deliveryPrice:0};function o(){i.on("tabs.change-event",".cart .js-tabs-btn",(function(e){e.preventDefault(),$.dispatch({type:"cart-delivery-type-change",payload:$(this).data("href")}),console.log("hide summary info by pukup"),s.deliveryType=$(this).data("href"),console.log(s.deliveryType),console.log("#pickup"===s.deliveryType),$.dispatch({type:"cart-time-container-toggle",payload:"#pickup"===s.deliveryType});var t,i=$(".js-delivery-address");$(".js-delivery-address_fake").val(""),i.data("isComplete",!1).val("").trigger("change").trigger("refresh.validate");var n=$("cart-payment").data("pickupHideId"),o=$("cart-payment").data("deliveryHideId");for(var a in console.log("hide payment item"),console.log(n),console.log(o),t="#pickup"===s.deliveryType?n.split(","):o.split(","),$(".payment_item").show(),console.log(t),t)if(t.hasOwnProperty(a)){var l=t[a],c=$(".payment_item_"+l);console.log(l),console.log(c),c.length>0&&c.hide()}!function(e){console.log("setCustomPickupDiscount"),s.deliveryType=e.substring(1);var t=$(".cart [data-get-ship-discount]").data("getShipDiscount")||"/udata/emarket/setCustomPickupDiscount.json",i=$.extend({customAction:"pickupDiscount"},$(".cart [data-get-ship-discount-params].current").data("getShipDiscountParams"));console.log(t),console.log(i);var n=$("cart-promocode .cart-summary__promo-code-input input").data("applied");$.dispatch({type:"cart-notice-hide"}),$.ajax({url:t,method:"post",dataType:"json",data:i,success:function(e){e.status&&!n?(e.item&&$.dispatch({type:"cart-discount-update",payload:e.item,status:e.status,reason:s.deliveryType}),e.cart&&$.dispatch({type:"cart-table-update",payload:e.cart,status:e.status})):n||(e.item&&$.dispatch({type:"cart-discount-update",payload:e.item,status:e.status,reason:s.deliveryType}),e.cart&&$.dispatch({type:"cart-table-update",payload:e.cart,status:e.status})),console.log("setCustomPickupDiscount"),r()}})}($(this).data("href"))}))}function a(e){var t=$("[data-summary-amount]"),i=$("[data-summary-sum]"),n=$("[data-summary-total]");e.cart&&e.cart.amount&&t.text(e.cart.amount).data("summaryAmount",e.cart.amount),e.cart&&e.cart.sum&&i.text(e.cart.sum).data("summarySum",e.cart.sum),e.total&&e.total.actual&&n.text(e.total.actual).data("summaryTotal",e.total.actual)}function r(e,t){var i="pickup"===s.deliveryType,o=$(".cart-summary__row.is-delivery"),r=$(".value",o);o.toggleClass("hidden",i),r.html(e&&!1!==t?t:n.noDeliveryPrice),r.toggleClass("g-blue-dark",!(e&&!1!==t)),console.log("-updateCartWidgetDelivery-"),console.log(e),console.log(t),$.ajax({url:"/udata/emarket/order_delivery_price/"+t+"/.json",dataType:"json",success:function(e){console.log("order_delivery_price"),console.log(e),a(e)}})}function l(){$.subscribe((function(e){"cart-discount-update"===e.type&&e.payload&&(e.reason&&void 0!==s.discount[e.reason]&&(s.discount[e.reason]=e.status),function(e,t,i){s.discount.promocode||s.discount.pickup;var o=$(".cart-summary__row.is-discount"),a=$("[data-summary-discount]",o),r=$(".js-discount-reason",o);o.toggleClass("hidden",!t),t&&(r.text(s.discount.promocode?n.promocodeDiscount:s.discount.pickup?n.pickupDiscount:""),e.price_pure&&a.text(e.price_pure).data("summaryDiscount",e.price_pure))}(e.payload,e.status)),"cart-table-update"===e.type&&e.payload&&a(e.payload)}))}function c(){$.subscribe((function(e){if("cart-address-for-delivery"===e.type&&void 0!==e.allow)if(console.log("subscribeOnDeliveryUpdate - cart-address-for-delivery"),e.allow){if(!(o=e.payload))return;if(void 0===o.price||null===o.price||o.price<0)return;s.deliveryPrice=0===o.price?"бесплатно":o.price+" ₽",o.cart_notice&&$.dispatch({type:"cart-notice-show",message:o.cart_notice}),console.log("express"),console.log(o);var t=$(".cart-checkout-datetime__time-inner");if(!($(".cart-checkout-datetime .js-datePicker .datepicker--cell-day.-selected-").length>0))if(!0===function(e){switch(e){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}(o.deliveryExpress)&&o.deliveryExpressPrice>=0){console.log("express yes"),t.html("");o.deliveryExpressPrice;var i='<div class="express_delivery_wrap" data-mark_date="no"><label class="express_delivery_input"><input class="js-pure express_delivery" type="radio" name="time" value="express доставка" data-required="true"  /><span>Доставка в течение часа</span></label><span class="express_delivery_notice_2">*Доступно только для физических лиц <br/>**Стоимость услуги <span class="express_delivery_price">'+o.deliveryExpressPrice+" Р</span></span></div>";t.append(i);var n=$(".datepicker--cell-day.-current-");console.log("calendar trigger click current"),n.length>0&&(console.log("curr_day_click"),n.trigger("click")),$(".cart-checkout-datetime__time ").removeClass("hidden"),$(".cart-checkout-datetime__notice").addClass("hidden"),t.on("change",".js-pure",(function(e){var t=$(this).val();$('.js-pure[value="'+t+'"]:not(:checked)').prop("checked",!0),$(".js-modal_period_submit").removeAttr("disabled"),console.log("time_input_change"),$(this).hasClass("express_delivery")?cartFunctions.updateCartWidgetDelivery(!0,0===o.deliveryExpressPrice?"бесплатно":o.deliveryExpressPrice):cartFunctions.updateCartWidgetDelivery(!0,0===o.price?"бесплатно":o.price)}))}else t.html(""),$(".cart-checkout-datetime__time ").addClass("hidden"),$(".cart-checkout-datetime__notice").removeClass("hidden"),r(!0,s.deliveryPrice);r(!0,!1)}else console.log("subscribeOnDeliveryUpdate - not e.allow"),r(!1,undefined);if("cart-delivery-update"===e.type){console.log("subscribeOnDeliveryUpdate - cart-delivery-update");var o,a="number"==typeof e.price?0===e.price?"бесплатно":e.price+" ₽":null;(o=e.payload).cart_notice?$.dispatch({type:"cart-notice-show",message:o.cart_notice}):$.dispatch({type:"cart-notice-hide"}),r(!!a,a)}}))}return{init:function(){var e=$(".cart-preloader");$(document).ajaxSend((function(){$("#eone_form").length>0&&1!=$("#eone_form").data("cart_ordering")&&(console.log("$(document).ajaxSend"),e.addClass("is-shown"))})),$(document).ajaxComplete((function(){console.log("$(document).ajaxComplete before check"),console.log(!!$("#eone_form")),console.log($("#eone_form").data("cart_ordering")),$("#eone_form").length&&1!=$("#eone_form").data("cart_ordering")&&(console.log("$(document).ajaxComplete"),e.removeClass("is-shown"))})),$(".js-confirm-by-phone"),o(),console.log("cart_init - pre subscribeOnCartUpdate"),l(),c()},getStore:function(){return s},get19BottlesAmount:function(e){return new Promise((function(t,i){$.ajax({url:e||"https://www.vodovoz-spb.ru/udata/emarket/water19lAmountInCart.json",dataType:"json",async:!1,success:function(e){t(e)},error:function(e){i(e)}})}))},updateCartWidgetDelivery:r}}(window),YandexMaps=function(e,t){"use strict";var i='<svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><circle fill="#0076C0" cx="16" cy="16" r="16"/><circle fill="#FFF" cx="16" cy="16" r="10"/><circle fill="#0076C0" cx="16" cy="16" r="4"/></g></svg>',n='<svg width="42" height="42" viewBox="0 0 42 42" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><circle fill="#0076C0" cx="21" cy="21" r="21"/><circle fill="#FFF" cx="21" cy="21" r="15"/></g></svg>';function s(e){(e=e||{}).namespace=e.namespace?e.namespace+" ":"",e.selector=e.selector?e.selector:".b-map",e.collection=e.collection?e.collection:$(e.namespace+e.selector),"undefined"!==ymaps&&ymaps&&ymaps.ready((function(){function t(e,t,n){var s,o,a,l=this,c=e.properties,d=c.get("metaDataProperty.GeocoderMetaData.Address.Components"),h=!1;for(var u in console.log("_handleSearch"),console.log(e),d)"house"===d[u].kind&&(h=!0);if(h){console.log("is_house_kind process"),s=c.get("text"),o=c.get("text"),a=e.geometry.getCoordinates(),console.log(a);var p=c.get("metaDataProperty.GeocoderMetaData.Address.Components");if(p){var f=$(t).closest("form");p.reduce((function(e,t){var i=t.kind,n=t.name;f.find(".js-"+i).val(n)}),{})}t.data("isComplete",!0),n?(t.closest(".calculate-page").length>0&&(t.closest(".b-checkout_map_address").removeClass("hidden"),$(".map_legend").addClass("hidden")),$(".js-delivery-address_fake").val(s).data("focus_fake",!1),t.trigger("emit.action")):(console.log("_handleSearch !isSuggest"),t.val(s).trigger("change").trigger("refresh.validate").closest(".b-checkout_map_address").removeClass("hidden"),formNotifications.hideErrorLabel.call(t)),$(".js-delivery-address-full",l.element.closest("form")).val(o),$(".js-delivery-address-text",l.element.closest("form")).text(s),i.call(l,a),$(".b-checkout_address_main_map.js-pocket-box").css("max-height",""),r(a),console.log("after _apiDeliveryInfo")}else $(".js-delivery-address-full",l.element.closest("form")).val(""),$(".js-delivery-address-text",l.element.closest("form")).html('<span style="color: #c00 !important;">Укажите адрес точнее</span>'),t.data("isComplete",!1),n?t.trigger("emit.action"):(t.val("").trigger("change").trigger("refresh.validate").closest(".b-checkout_map_address").removeClass("hidden"),$(".js-delivery-price-wrap").hide()),formNotifications.showErrorLabel.call(t,"Укажите адрес точнее",0),$(".js-calculate-info").hide()}function i(e,t){var i=this.element,s=this;i.data("userPlaceMark")?(i.data("userPlaceMark").geometry.setCoordinates(e),s.setCenter(e)):(i.data("userPlaceMark",new ymaps.Placemark(e,{id:"userAddress"},{preset:"islands#blueDotIcon",draggable:!0})),i.data("userPlaceMark").events.add("dragend",(function(){var e=i.data("userPlaceMark").geometry.getCoordinates();s.panTo(e),n(e,t)})),s.geoObjects.add(i.data("userPlaceMark")))}function n(e,t){ymaps.geocode(e).then((function(i){var n=i.geoObjects.get(0),s=n.properties.get("name"),o=n.getAddressLine(),a=$(".js-delivery-address");if(console.log("_getAddress"),console.log("manual-"+t),console.log(n),console.log(" "),t){a.data("isSelected",!0);var l=n.properties.get("metaDataProperty.GeocoderMetaData.Address.Components"),c=!1;for(var d in l)"house"===l[d].kind&&(c=!0);if(c){a.data("isComplete",!0),formNotifications.hideErrorLabel.call(a),$(".js-delivery-address-full",a.closest("form")).val(o),$(".js-delivery-address-text",a.closest("form")).text(s);var h=n.properties.get("metaDataProperty.GeocoderMetaData.Address.Components");if(h)h.reduce((function(e,t){var i=t.kind,n=t.name;$(".js-"+i).val(n)}),{})}else a.data("isComplete",!1),formNotifications.showErrorLabel.call(a,"Укажите адрес точнее",0),$(".js-delivery-address-full",a.closest("form")).val(""),$(".js-delivery-address-text",a.closest("form")).html('<span style="color: #c00 !important;">Укажите адрес точнее</span>');a.trigger("emit.action")}a.val(o).trigger("change").trigger("refresh.validate").closest(".b-checkout_map_address").removeClass("hidden"),$(".js-delivery-address-text").text(s),r(e)})).catch((function(e){console.log("here"),console.log(e)}))}function o(e){var t=this;ymaps.geocode(e,{results:1}).then((function(n){ymapRequestLog("_geoQuery: "+e);var s=n.geoObjects.get(0),o=s.geometry.getCoordinates();console.log("_geoQuery object"),console.log(s),i.call(t,o,manual)}))}function a(e){switch(e){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}function r(e){console.log("_apiDeliveryInfo"),ymaps.geocode(e).then((function(t){var i=t.geoObjects.get(0);if(i){var n,s,o=i.properties.get("metaDataProperty.GeocoderMetaData.Address.Components"),r=!1;for(var l in o)"house"===o[l].kind&&(r=!0);if(r){if(e){e[0]&&(n=e[0]),e[1]&&(s=e[1]),$(".js-delivery-address-lat").val(n),$(".js-delivery-address-lon").val(s);var c="/udata/emarket/isAllowAdressForDelivery/"+n+"/"+s+".json";return void $.ajax({url:c,dataType:"json",success:function(e){if("no"===e.result)$.dispatch({type:"cart-address-for-delivery",payload:e,allow:!1}),$address=$(".js-delivery-address"),$(".js-delivery-address-text").html('<span style="color: #FC372A !important;">Ошибка определения доставки по данному адресу</span>'),$address.val(""),$(".js-delivery-price-wrap").hide(),$address.val(""),formNotifications.showErrorLabel.call($address,"Ошибка определения доставки по данному адресу",0),$(".js-calculate-info").hide();else{if(console.log("clear calendar and time period"),$(".cart-checkout-datetime__time-inner").html(""),$(".cart-checkout-datetime .js-datePicker .datepicker--cell-day.-selected-").removeClass("-selected-"),$(".cart-checkout-datetime__time ").addClass("hidden"),$(".cart-checkout-datetime__notice").removeClass("hidden"),$.dispatch({id:"delivery-time",type:"error-message-hide"}),$.dispatch({id:"delivery-time-modal",type:"error-message-hide"}),$.dispatch({id:"delivery-calendar-modal",type:"error-message-hide"}),$.dispatch({type:"cart-address-for-delivery",payload:e,allow:!0}),void 0!==e.price&&(0===e.price||e.price>0)){var t=0===e.price?"бесплатно":e.price;$(".js-delivery-price-text").text(t),$(".js-delivery-price-wrap").show();i="";var i=!0===a(e.isToday)&&!0!==a(e.noAvaliablePeriod)?"Сегодня: ":"Завтра: ",n=void 0!==e.priceNoCart?e.priceNoCart:"",s="",o="",r="",l="";if(!0===a(e.isToday)&&!0!==a(e.noAvaliablePeriod)){if(void 0!==e.period.item)for(var c in e.period.item){var d=(m=e.period.item[c]).from.substr(0,2),h=", ";(g=m.to.substr(0,2))>18?(""==l&&(h="Сегодня вечером: "),l=l+h+"с "+d+" до "+g):g>13?(""==r&&(h="Сегодня днем: "),r=r+h+"с "+d+" до "+g):g<=13&&(""==o&&(h="Сегодня утром: "),o=o+h+"с "+d+" до "+g)}}else{var u=(new Date).getDay()+1;if(void 0!==e.allPeriod.day)for(var p in e.allPeriod.day){var f=e.allPeriod.day[p];if(f.day_number==u)for(var c in f.item){d=(m=f.item[c]).from.substr(0,2),h=", ";(g=m.to.substr(0,2))>18?(""===l&&(h="Завтра вечером: "),l=l+h+"с "+d+" до "+g):g>13?(""===r&&(h="Завтра днем: "),r=r+h+"с "+d+" до "+g):g<=13&&(""===o&&(h="Завтра утром: "),o=o+h+"с "+d+" до "+g)}}}if(""!==o&&(s=s+o+"<br/>"),""!==r&&(s=s+r+"<br/>"),""!==l&&(s=s+l+"<br/>"),void 0!==e.period&&void 0!==e.period.item){d=(m=e.period.item[0]?e.period.item[0]:e.period.item[1]).from;var m,g=m.to;i+=d+(d.length<3?":00":"")+" – "+g+(g.length<3?":00":"")}$(".js-calculate-closest-delivery-period").html(i),$(".js-calculate-all-delivery-period").html(s),void 0!==e.min19lAmountForFreeDelivery&&$(".js-min-19l-amount-for-free-delivery").html(e.min19lAmountForFreeDelivery),$(".js-delivery-price_no_cart-text").text(n),$(".js-calculate-info").show()}var v=$(".js-tabs-page.opened form");v.length>0&&v.find(".datepicker--cell-day.-current-").length>0&&(console.log("curr_day_click"),v.find(".datepicker--cell-day.-current-").trigger("click"),v.find("#checkout-time").prop("selectedIndex",0).selectric("refresh"),v.find("#checkout-time").trigger("change"))}}})}}else $(".js-delivery-address-text").html('<span style="color: #FC372A !important;">Укажите адрес точнее</span>'),$(".js-delivery-address_fake").val(""),$(".js-delivery-address").val(""),$(".js-delivery-price-wrap").hide(),$(".js-calculate-info").hide()}}))}e.collection.each((function(){var e=$(this).empty(),a=new ymaps.Map(e.attr("id"),{center:[59.939095,30.315868],zoom:e.data("zoom")||16,controls:e.data("controls")||["fullscreenControl"]});new ymaps.ObjectManager;if(a.element=e,e.hasClass("polygon_map")&&polygon_list)for(var r in console.log("test polygon add"),polygon_list){var l=polygon_list[r];if(l.name&&l.color&&l.coordinates){var c={fillColor:l.color,strokeColor:l.color,opacity:.6,strokeWidth:5,strokeStyle:"solid",interactivityModel:"default#silent"};l.bg_img&&"none"!=l.bg_img&&(c={fillColor:l.color,fillImageHref:l.bg_img,fillMethod:"tile",strokeColor:l.color,opacity:.6,strokeWidth:5,strokeStyle:"solid",interactivityModel:"default#silent"});var d=new ymaps.Polygon([l.coordinates],{hintContent:l.name},c);a.geoObjects.add(d),console.log("add - "+l.name)}}function h(e){var t="/udata/emarket/sLog/"+e+"/.json";$.ajax({url:t})}helpers.isTouchDevice()&&a.behaviors.disable("drag"),a.controls.add("zoomControl",{float:"none",size:e.data("zoomSize")?["md","lg"].breakPoint()?"large":"small":"large",position:{right:10,top:e.height()/2-(e.data("zoomSize")?["md","lg"].breakPoint()?103:30:103)}});var u=$("#js_suggest_log_wrap");u.html(""),$("[data-suggest]").on("input",(function(){u.html("- Ввод символа: <span>"+$(this).val()+"</span> <br/>"+u.html());var e=$(this),i=e.parents(".suggestions-container");helpers.delay.call(e,(async function(){u.html("- Подготовка к отправке запроса в DaData: <span>"+e.val()+" </span><br/>"+u.html()),$(".suggestions",i).html('<div role="listbox"></div>'),$(".suggestions-help",i).empty();var n=e.val(),s={query:n,count:5,locations_geo:{lat:59.938784,lon:30.314997,radius_meters:3e5},locations_boost:[{kladr_id:"78"}],from_bound:{value:"street"},to_bound:{value:"house"}},o={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token c60704ff232ea0f347a04396b3a0b8ce3d2afa82"},body:JSON.stringify(s)};let r=await fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",o);e:try{u.html("- Отправка запроса в DaData: <span>"+n+" </span><br/>"+u.html());let e=await r.json();if(!r.ok){u.html("- Ошибка обработки ответа от DaData <br/>"+u.html());break e}for(var l=0;l<e.suggestions.length;++l)(e.suggestions[l].data.kladr_id.length>17||"00"==e.suggestions[l].data.kladr_id.substr(-2))&&$('[role="listbox"]',i).append('<div role="option" id="'+l+'" data-fulladress = "'+e.suggestions[l].unrestricted_value+'">'+e.suggestions[l].value+"</div>")}catch(e){return console.log(e),u.html("- Ошибка запроса к DaData. <br/>"+u.html()),!1}$('[role="listbox"]',i).on("blur",(function(){$(this).children().remove()})),$('[role="option"]',i).on("click",(function(){var e=$(this).data("fulladress");u.html("- Запроса к Ymap: <span>"+e+" </span><br/>"+u.html()),ymaps.geocode(e,{kind:"house",results:1}).then((function(n){var s=n.geoObjects.get(0);$("[data-suggest]",i).val(s.properties.get("text")).focus(),u.html("- Ответ запроса к Ymap: <span>"+s.properties.get("text")+" ("+s.geometry.getCoordinates()+")</span> <br/>"+u.html()),console.log("sendDaDataSuggest request"),h("DaData: "+e),t.call(a,s,p,!1)}),(function(e){$("[data-suggest]",i).val("ошибка").focus(),u.html("- Ошибка запроса к Ymap: <span>"+e.message+" </span><br/>"+u.html())})),$('[role="listbox"]',i).remove()}))}))}));var p=$(".js-delivery-address",a.element.closest("form")),f=new ymaps.control.SearchControl({options:{noPlacemark:!0,placeholderContent:"Введите здесь адрес доставки",kind:"house"}}),m=new ymaps.SuggestView(p[0],{provider:{suggest:function(e,t){return m&&m.state.get("open")?(console.log("sendsuggest request"),h(e),ymaps.suggest(e)):(console.log("emptysuggest"),ymaps.vow.resolve([]))}}});m.state.set("open",!0),f.events.add("resultselect",(function(e){f.getResult(e.get("index")||0).then((function(e){t.call(a,e,p,!1)}))})),m.events.add("select",(function(e){console.log("suggestAddress select"),p.data("isSelected",!0),console.log(p.data("isSelected")),formNotifications.hideErrorLabel.call(p);var i=e.originalEvent.item.value;console.log(i),ymaps.geocode(i,{results:1}).then((function(e){h("SuggestAddress select: "+i);var n=e.geoObjects.get(0);t.call(a,n,p,!0)}))})),a.controls.add(f),e.hasClass("polygon_map")&&a.controls.remove(f),a.events.add("click",(function(e){var t=e.get("coords");n(t,!0),a.panTo(t).then((function(){i.call(a,t,!0)}))}));var g=$(".js-delivery-address").val();""!==g&&o.call(a,g);var v=$(".js-delivery-address").data("address");v&&""!==v&&(console.log("Init user address "+v),ymaps.geocode(v,{results:1}).then((function(e){h("Init user address: "+s);var i=e.geoObjects.get(0);i.geometry.getCoordinates();console.log("Init user address _handleSearch "+v),p.closest(".b-form_box").addClass("transition").addClass("active"),t.call(a,i,p,!0)})))}))}))}function o(e,t,i){var n=t.objects.getById(i);t.objects.each((function(e){e.properties.active=!1})),n.properties.active=!0,e.setCenter(e.getCenter()),$(".js-outpost-id").val(i).trigger("change").trigger("refresh.validate"),$(".js-outpost-list input").each((function(){$(this).prop("checked",!1),$(this).data("id")===i&&$(this).prop("checked",!0),$.uniform.update()})),$("#pickup_delivery_id").val(i),n.properties.outpostInfo&&$(".js-outpost-info").html(n.properties.outpostInfo).closest(".b-checkout_map_address").removeClass("hidden")}function a(e){var t=this.id||helpers.randomString(6),n={type:"Feature",id:t,geometry:this.geometry,options:{hideIconOnBalloonOpen:!1,balloonShadow:!1,balloonAutoPan:!0},properties:{id:t,customMark:!0,customBalloon:void 0===this.properties.balloonContent||this.properties.balloonContent,entrance:!1}},s="VV#marker"+t.toString().capitalizeFirstLetter();if($.extend(n.options,this.options),$.extend(n.properties,this.properties),n.properties.customMark){var o=n.properties.label?'<div class="b-map_marker_label">'+n.properties.label+"</div>":"";ymaps.layout.storage.add(s,ymaps.templateLayoutFactory.createClass('<div class="b-map_marker[if properties.active] active[endif][if properties.hidden] hidden[endif]">'+o+i+"</div>")),$.extend(n.options,{iconLayout:s,iconShape:{type:"Rectangle",coordinates:[[-16,-16],[16,16]]}})}else $.extend(n.options,{preset:"islands#blueDotIcon"});if(n.properties.customBalloon){var a=ymaps.templateLayoutFactory.createClass('<div class="b-map_balloon"><span class="b-map_balloon_close i-icon i-close"></span><div class="b-map_balloon_inner">$[[options.contentLayout observeSize minWidth=300 maxWidth=584]]</div></div>',{build:function(){this.constructor.superclass.build.call(this),this._$element=$(".b-map_balloon",this.getParentElement()),this.applyElementOffset(),this._$element.find(".b-map_balloon_close").on("click",$.proxy(this.onCloseClick,this))},clear:function(){this._$element.find("b-map_balloon_close").off("click"),this.constructor.superclass.clear.call(this)},onSublayoutSizeChange:function(){a.superclass.onSublayoutSizeChange.apply(this,arguments),this._isElement(this._$element)&&(this.applyElementOffset(),this.events.fire("shapechange"))},applyElementOffset:function(){this._$element.css({left:-this._$element[0].offsetWidth/2,top:-(this._$element[0].offsetHeight+56)})},onCloseClick:function(e){e.preventDefault(),this.events.fire("userclose")},getShape:function(){if(!this._isElement(this._$element))return a.superclass.getShape.call(this);var e=this._$element.position();return new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[e.left,e.top],[e.left+this._$element[0].offsetWidth,e.top+this._$element[0].offsetHeight+34]]))},_isElement:function(e){return e&&e[0]&&e.find(".b-map_balloon_arrow")[0]}}),r=ymaps.templateLayoutFactory.createClass('<div class="b-map_balloon_content">$[properties.balloonContent]</div>');$.extend(n.options,{balloonShadow:!1,balloonLayout:a,balloonContentLayout:r,balloonPanelMaxMapArea:0,hideIconOnBalloonOpen:!1,openBalloonOnClick:!1})}return n}function r(){var t=this,i=t.data("mapInstance"),n=t.data("objectManager");function s(){i.setBounds(i.geoObjects.getBounds()),i.setZoom(i.getZoom()-1),1===n.objects.getLength()&&i.element.data("zoom")&&i.setZoom(i.element.data("zoom"))}function o(){if(t.data("offsets")){var e=t.closest(".container"),n=t.data("offsets")[helpers.screen()][0],s=t.data("offsets")[helpers.screen()][1];e=e.length?e:$(".container").first(),n="string"==typeof n?e.width()*(parseFloat(n)/100):n,s="string"==typeof s?t.outerHeight()*(parseFloat(s)/100):s,i.setCenterWithOffset(n,s)}}s(),$(e).on("resize.clinicsOnMapCenter",(function(){helpers.delay.call(t,s,200,"setCenter-")})),o(),$(e).on("resize.clinicsOnMapCenterCorrect",(function(){helpers.delay.call(t,o,250,"correctCenter-")}))}return{init:function(){var t;s({selector:".b-addressMap"}),(t=(t={selector:".b-outpostsMap"})||{}).namespace=t.namespace?t.namespace+" ":"",t.selector=t.selector?t.selector:".b-map",t.collection=t.collection?t.collection:$(t.namespace+t.selector),"undefined"===ymaps||!ymaps||ymaps.ready((function(){t.collection.each((function(){var t,i=$(this).empty(),s=new ymaps.Map(i.attr("id"),{center:[59.939095,30.315868],zoom:i.data("zoom")||16,controls:i.data("controls")||["fullscreenControl","searchControl"]}),l=new ymaps.ObjectManager({clusterize:!!i.data("clusterize"),gridSize:120});if(s.element=i,helpers.isTouchDevice()&&s.behaviors.disable("drag"),s.controls.add("zoomControl",{float:"none",size:i.data("zoomSize")?["md","lg"].breakPoint()?"large":"small":"large",position:{right:10,top:i.height()/2-(i.data("zoomSize")?["md","lg"].breakPoint()?103:30:103)}}),i.data("source")&&!i.data("clusterize")){t={type:"FeatureCollection",features:[]};var c=e[i.data("source")];$.each(c,(function(e,i){t.features.push(a.call(i,e))})),l.add(t),s.geoObjects.add(l)}else i.data("source")&&i.data("clusterize")&&(t={type:"FeatureCollection",features:[]},$.each(e[i.data("source")],(function(e,i){t.features.push(a.call(i))})),l.clusters.options.set({clusterIcons:[{href:"",size:[42,42],offset:[-21,-21]}],clusterNumbers:[300],clusterDisableClickZoom:!1,clusterIconContentLayout:ymaps.templateLayoutFactory.createClass('<div class="b-map_cluster">'+n+'<span class="b-map_cluster_content">$[properties.geoObjects.length]</span></div>')}),l.add(t),s.geoObjects.add(l));s.setBounds(s.geoObjects.getBounds()),1===l.objects.getLength()&&s.element.data("zoom")&&s.setZoom(s.element.data("zoom")),i.data("mapInstance",s),i.data("objectManager",l),r.call(i),$("body").on("change",".js-outpost-list input",(function(){var e=$(this).data("id");o(s,l,e)})),l.objects.events.add("click",(function(e){var t=e.get("objectId");o(s,l,t)}))}))}))},setCorrectBounds:r}}(window),helpers=function(e,t){function i(){var e=document.createElement("div"),i=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"],n=!1;return $.each(i,(function(s,o){if(e.style[i[s]]!==t)return n="-"+i[s].replace("Perspective","").toLowerCase()+"-",!1})),n}var n={set:function(e){var t=new Date,i=e.key+"="+e.value;return t.setDate(t.getDate()+1),i+=e.expires?"; expires="+t.toUTCString():"",i+=e.path?"; path="+e.path:"",document.cookie=i},get:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return!!t&&decodeURIComponent(t[1])},remove:function(e){helpers.cookies.set({key:e,value:"",expires:-1})}};return{pfx:i(),touches:{touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1}},reCaptchaKey:"",cookies:n,async:function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,document.body.appendChild(t)},delay:function(e,t,i){"undefined"!==this.data((i||"")+"timeout")&&clearTimeout(this.data((i||"")+"timeout")),this.data((i||"")+"timeout",setTimeout($.proxy((function(){e&&e()}),this),t||500))},editGetParams:function(e,t,i){var n,s,o,a=e.match(/#/gi)&&0!==e.indexOf("#");if(n=(e=a?e.split("#"):[e,""])[0].split("?"),a=a?"#"+e[1]:"",o="?",s=n[1])for(var r=s.split("&"),l=0;l<r.length;l++){r[l].split("=")[0]!==t?o+=r[l]:o+=t+"="+i,o+=l<r.length-1?"&":""}return n[0]+o+a},getNumEnding:function(e,t){var i;if((e%=100)>=11&&e<=19)i=t[2];else switch(e%10){case 1:i=t[0];break;case 2:case 3:case 4:i=t[1];break;default:i=t[2]}return i},getScrollBarWidth:function(){var e=$('<div class="b-scrollBar-test"></div>').css({position:"absolute",left:-99999,top:-99999,overflowY:"scroll",width:50,height:50,visibility:"hidden"});$("body").append(e);var t=e[0].offsetWidth-e[0].clientWidth;return e.remove(),t},getPfx:i,pixelsRatio:function(){return"devicePixelRatio"in e&&e.devicePixelRatio>1},randomString:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),i="";e=e||Math.floor(Math.random()*t.length);for(var n=0;n<e;n++)i+=t[Math.floor(Math.random()*t.length)];return i},screen:function(){var t=$(e).width();return t<480?"xs":t>=480&&t<768?"sm":t>=768&&t<1200?"md":t>=1200?"lg":void 0},isTouchDevice:function(){return"ontouchstart"in e||navigator.maxTouchPoints||navigator.msMaxTouchPoints},checkBool:function(e){switch(e){case"true":case"yes":case"1":case!0:return!0;case"false":case"no":case"0":case null:case!1:case t:return!1;default:return Boolean(e)}}}}(window);function objSerialize(e,t){var i,n=[];for(i in e)if(e.hasOwnProperty(i)){var s=t?t+"["+i+"]":i,o=e[i];n.push(null!==o&&"object"==typeof o?objSerialize(o,s):encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}function initReCaptchaOnLoad(){forms.reCaptcha()}$(document).off("touchstart.globalSwipeControl touchmove.globalSwipeControl").on("touchstart.globalSwipeControl touchmove.globalSwipeControl",(function(e){var t=e.originalEvent.touches[0];helpers.touches[e.type].x=t.pageX,helpers.touches[e.type].y=t.pageY})),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},$.fn.rowSlideUp=function(e,t,i){var n=this.find("> td"),s=helpers.pfx;if(this.toggleClass("slideUp",!0),n.length){n.each((function(){$(this).wrapInner('<div style="padding: '+$(this).css("padding-top")+" "+$(this).css("padding-right")+" "+$(this).css("padding-bottom")+" "+$(this).css("padding-left")+';"></div>').attr("style","padding: 0 !important;")}));var o=n.find("> div");return n.css(s+"transition","border 400ms").css("transition","border 400ms"),o.css(s+"transition","opacity 400ms").css("transition","opacity 400ms"),setTimeout((function(){o.css("opacity",0).slideUp({duration:e,easing:i||"swing",step:function(){$(window).trigger("floatedPanels.stepRefresh")},complete:t})}),50),this}},function(e){function t(t,i){this.options=i,this.elements=t.find(this.options.selector),this.clear(this.elements),this.options.breakpoints.indexOf(helpers.screen())>=0&&this.processing(),e(window).on("refresh.flexRows resize.flexRows",e.proxy((function(t){helpers.delay.call(e(this),e.proxy((function(){this.options.breakpoints.indexOf(helpers.screen())>=0?this.processing():this.clear(this.elements)}),this),500)}),this))}e.fn.flexRows=function(i){return(i=i||{}).selector=i.selector?i.selector:"> *",i.auto=!!i.auto&&!!i.auto,i.strong=!!i.strong&&!!i.strong,i.handler=!!i.handler&&i.handler,i.breakpoints=i.breakpoints?i.breakpoints:["xs","sm","md","lg","xl"],new t(this,e.extend(i,this.data())),this},t.prototype.processing=function(){if(this.rows=this.splitUpIntoRows(),this.options.handler)for(var e=0;e<this.rows.length;e++)this.options.handler.call(this.rows[e]);else if(this.options.auto)for(var t=0;t<this.rows.length;t++)this.alignment(this.rows[t]);else if(this.options.split)for(var i=0;i<this.rows.length;i++)this.split(this.rows[i]);return!0},t.prototype.splitUpIntoRows=function(){var t={},i=[];return this.elements.each((function(i){void 0===t["top"+e(this).offset().top]&&(t["top"+e(this).offset().top]=[]),t["top"+e(this).offset().top].push(e(this))})),e.each(t,(function(){var t=e();e(this).each((function(){t=t.add(e(this))})),i.push(t)})),i},t.prototype.alignment=function(t){var i=0;this.options.strong?(t.css({height:""}).each((function(){i=e(this).outerHeight()>i?e(this).outerHeight():i})),t.css({height:i})):(t.css({minHeight:""}).each((function(){i=e(this).outerHeight()>i?e(this).outerHeight():i})),t.css({minHeight:i}))},t.prototype.split=function(t){t.each((function(t){e(this).removeClass("split"),t>0&&e(this).addClass("split")}))},t.prototype.clear=function(e){e.css({height:"",minHeight:""}).removeClass("split")}}(jQuery),String.prototype.capitalizeFirstLetter||(String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),String.prototype.discharge||(String.prototype.discharge=function(e){return this.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+e)}),Number.prototype.isInteger||(Number.prototype.isInteger=function(){return this%1==0}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),Array.prototype.breakPoint||(Array.prototype.breakPoint=function(){return this.indexOf(helpers.screen())>=0});var siteResponsive=function(e,t){return{init:function(t){siteModules.imagesOnRetinaDisplays(),function(t){function i(e,t,i,s){var o=e.width()>i.width()&&(!e.data("resolutions")||e.data("resolutions").split(",").indexOf(helpers.screen())>=0);i.toggleClass("scrollable",o),t.toggleClass("scrollable",o),t.toggleClass("fade-right",o),t.toggleClass("blue-shadow",!e.closest(".b-box").length),n.call(e,s)}function n(e){var t=this.closest(".b-table_overflow").next(".b-table_overflow_bar");t.find(".b-table_overflow_bar_handle").width(t.width()*(this.closest(".b-table_overflow").width()/this.width())),null!==e&&(e.width(this.find("tr:first-child td:first-child").outerWidth()+(["xs"].breakPoint()?10:0)),e.find("tr:first-child td:first-child").css({height:this.find("tr:first-child td:first-child").outerHeight(),paddingTop:0,paddingBottom:0}))}function s(){var e=$(this),t=e.next(".b-table_overflow_bar");t.find(".b-table_overflow_bar_handle").css({left:$(this).scrollLeft()*t.width()/e.find("> *").width()}),e.closest(".b-table_overflow_wrap").toggleClass("fade-left",e.scrollLeft()>0),e.closest(".b-table_overflow_wrap").toggleClass("fade-right",e.scrollLeft()+e.outerWidth()<e.find("> *").outerWidth()),e.closest(".b-table_overflow_wrap").find(".b-table_stuckColumn").toggleClass("fade-left",e.scrollLeft()>0)}$(t.collection).each((function(){var t=$(this);t.closest(".b-table_overflow").length||(t.wrap('<div class="b-table_overflow"></div>'),t.closest(".b-table_overflow").wrap('<div class="b-table_overflow_wrap"></div>'));var n=t.closest(".b-table_overflow_wrap"),o=t.closest(".b-table_overflow"),a=null,r=null;if(t.data("firstColumnIsFixed")){n.prepend('<div class="b-table_stuckColumn"></div>'),a=n.find(".b-table_stuckColumn"),r=t.clone().appendTo(a);var l=0;r.find("tr").each((function(e){var i=t.find("tr").eq(e).find("td").first();$(this).find("td").first().nextAll().remove(),l>1?$(this).find("td").first().remove():i.addClass("fade"),l=$(this).find("td").first().attr("rowspan")}))}else n.append('<div class="b-table_overflow_bar"><div class="b-table_overflow_bar_handle"></div></div>');i(t,n,o,a),$(e).on("resize.swipedTables",(function(){i(t,n,o,a)})),t.closest(".b-table_overflow").on("scroll.tableOnScroll",s)}))}({collection:".b-wysiwyg table:not(.b-table_collapsed), .b-daico_section_table",namespace:t});var i=$("body").addClass("m-"+helpers.screen()).addClass("m-"+(helpers.isTouchDevice()?"touch":"mouse")).addClass(navigator.platform.match(/(Mac)/i)?"m-mac":"m-win");$(e).off("resize.screenClasses").on("resize.screenClasses",(function(){i.removeClass("m-xs m-sm m-md m-lg").addClass("m-"+helpers.screen())}))}}}(window),_handlers=[],dispatch=function(e){for(var t=0;t<=_handlers.length-1;t++)_handlers[t](e)},subscribe=function(e){_handlers.push(e)},unsubscribe=function(e){for(var t=0;t<=_handlers.length-1;t++)_handlers[t]===e&&_handlers.splice(t--,1)};function SpinnerInput(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartEmptyComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartTableComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartRefundBottlesComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartPhoneComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartPromoCodeComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartPaymentComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartDatesCaptionComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function CartTimeContainerComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function stringToBoolean(e){switch(e){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}function CartNoticeComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function ContactlessPaymentComponent(){return Reflect.construct(HTMLInputElement,[],this.constructor)}function CountDownComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function ErrorMessageComponent(){return Reflect.construct(HTMLElement,[],this.constructor)}function activateElementsOnPageScrolling(e){window.scrollY>0?document.getElementsByTagName("body")[0].classList.add("scrolled"):document.getElementsByTagName("body")[0].classList.remove("scrolled")}$.dispatch=dispatch,$.subscribe=subscribe,$.unsubscribe=unsubscribe,SpinnerInput.prototype=Object.create(HTMLElement.prototype),SpinnerInput.prototype.constructor=SpinnerInput,Object.setPrototypeOf(SpinnerInput,HTMLElement),SpinnerInput.prototype.connectedCallback=function(){this.checkMax.bind(this),this.checkMin.bind(this),this.handleSuffix.bind(this),this._$buttonMinus=$(this).find(".spinner__btn_minus"),this._$buttonPlus=$(this).find(".spinner__btn_plus"),this._$input=$(this).find("input"),this._$buttonMinus.length&&this._$buttonPlus.length&&this._$input.length&&(this._step=Number($(this).data("step")||1),this._min=Number($(this).data("min")||this._step),this._max=$(this).data("max"),this._value=Number(this._$input.val()),this._checkMaxHandler=null,this._checkMinHandler=null,this._$buttonMinus.on("click.spinnerInput",this.handleClickMinus.bind(this)),this._$buttonPlus.on("click.spinnerInput",this.handleClickPlus.bind(this)),this._$input.on("keyup.spinnerKeyup",this.handleKeyUp.bind(this)),this._$input.on("blur.spinnerBlur",this.handleBlur.bind(this)),this._$suffix=$(this).find("[data-suffix]"),this.handleSuffix())},SpinnerInput.prototype.disconnectedCallback=function(){this._$buttonMinus.off("click.spinnerInput"),this._$buttonPlus.off("click.spinnerInput"),this._$input.off("keyup.spinnerKeyup"),this._$input.off("blur.spinnerBlur")},SpinnerInput.prototype.handleKeyUp=function(){this._$input.val().match(/^\D+$/)?(this._$input.val(this._step||1),this._value=this._step||1):this._$input.val().match(/^\d+$/)&&(this._value=Number(this._$input.val())),this.handleSuffix()},SpinnerInput.prototype.handleBlur=function(){""!==this._$input.val()&&0!==this._$input.val()||this._$input.val(this._step||1);var e=this.checkMax(),t=e.isInteger()?e:e.toFixed(2);this._$input.val(t),this._value=e,this.handleSuffix()},SpinnerInput.prototype.handleClickMinus=function(e){e&&e.preventDefault(),this._value=100*this._value<100*this._step+100*this._min?100*this._min:100*this._value-100*this._step,this._value=this._value/100,this._$input.val(this._value).trigger("blur").trigger("change"),this.handleSuffix()},SpinnerInput.prototype.handleClickPlus=function(e){e&&e.preventDefault(),this._value=100*this._value+100*this._step,this._value=this._value/100,this._$input.val(this._value).trigger("blur").trigger("change"),this.handleSuffix()},SpinnerInput.prototype.handleSuffix=function(){if(this._$suffix.length){var e=this._$suffix.data("suffix");this._$suffix.text(helpers.getNumEnding(this._value,e))}},SpinnerInput.prototype.checkMax=function(e){e=e||this._value;var t=this._max&&Number(e)>this._max;return this._checkMaxHandler&&this._checkMaxHandler.call(this,t),t?this._max:Number(e)},SpinnerInput.prototype.checkMin=function(e){e=e||this._value;var t=this._min&&Number(e)<this._min;return this._checkMinHandler&&this._checkMinHandler.call(this,t),t?this._min:Number(e)},customElements.define("spinner-input",SpinnerInput),CartEmptyComponent.prototype=Object.create(HTMLElement.prototype),CartEmptyComponent.prototype.constructor=CartEmptyComponent,Object.setPrototypeOf(CartEmptyComponent,HTMLElement),CartEmptyComponent.prototype.connectedCallback=function(){this.handleDispatcher=this.handleDispatcher.bind(this),$.subscribe(this.handleDispatcher)},CartEmptyComponent.prototype.disconnectedCallback=function(){$.unsubscribe(this.handleDispatcher)},CartEmptyComponent.prototype.handleDispatcher=function(e){var t=$(this),i=$(".cart__columns");"cart-clear"===e.type&&(t.hide().toggleClass("hidden",!1).toggleClass("fade",!0),setTimeout((function(){t.toggleClass("fade",!1).slideDown({duration:400,easing:"easeOutQuart",complete:function(){}})}),100),i.toggleClass("fade",!0).slideUp({duration:400,easing:"easeOutQuart",complete:function(){i.remove()}}),$(".js-clear-cart").toggleClass("hidden",!0))},customElements.define("cart-empty",CartEmptyComponent),CartTableComponent.prototype=Object.create(HTMLElement.prototype),CartTableComponent.prototype.constructor=CartTableComponent,Object.setPrototypeOf(CartTableComponent,HTMLElement),CartTableComponent.prototype.connectedCallback=function(){console.log("CartTableComponent.prototype.connectedCallback"),this.handleDispatcher=this.handleDispatcher.bind(this),this.handleAmount=this.handleAmount.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleItems=this.handleItems.bind(this),this.handleItem=this.handleItem.bind(this);var e=this;$(this).on("click.removeFromCart",".cart-table-good__remove",(function(t){t.preventDefault(),e.handleRemove($(this))})),$(this).on("change.changeAmountInCart",".cart-table-good spinner-input input",(function(t){console.log("change.changeAmountInCart"),t.preventDefault(),e.handleAmount($(this))})),$.subscribe(this.handleDispatcher)},CartTableComponent.prototype.disconnectedCallback=function(){$(this).off("click.removeFromCart"),$(this).off("click.changeAmountInCart"),$.unsubscribe(this.handleDispatcher)},CartTableComponent.prototype.handleRemove=function(e){var t=$(this),i=e.closest(".cart-table-good"),n=i.find("input, select, textarea").serializeObject(),s=$.extend({customAction:"remove"},i.data(),n);$.ajax({url:e.attr("href")||e.data("url")||window.location,method:$(this).data("method")||"post",dataType:"json",data:s,success:function(e){console.log("recalc delivery cost on remove item");var n=$(".cart-checkout-datetime .js-datePicker input").val(),s="/udata/emarket/deliveryDateParam/${date}/.json".replace("${date}",n);n&&""!=n&&$.ajax({url:s,dataType:"json",success:function(e){var t=$(".cart-checkout-datetime__time-inner .js-pure:checked");console.log("selected_time: "+t),t.length>0&&($(t).hasClass("express_delivery")?cartFunctions.updateCartWidgetDelivery(!0,0===e.deliveryExpressPrice?"бесплатно":e.deliveryExpressPrice):cartFunctions.updateCartWidgetDelivery(!0,0===e.price?"бесплатно":e.price))}}),$.dispatch({type:"cart-table-update",payload:e,status:e.status}),e.delivery&&$.dispatch({type:"cart-delivery-update",payload:e,price:!!e["void:delivery-price"].actual&&e["void:delivery-price"].actual});var o=t.find(".cart-table-good").length;o>1?(i.hasClass("pre-deposit-item")&&($depositGood=i.next(".deposit-item"),o>2?(i.toggleClass("fade",!0).slideUp({duration:400,easing:"easeOutQuart",complete:function(){i.remove()}}),$depositGood.toggleClass("fade",!0).slideUp({duration:400,easing:"easeOutQuart",complete:function(){$depositGood.remove()}})):$.dispatch({type:"cart-clear"})),i.toggleClass("fade",!0).slideUp({duration:400,easing:"easeOutQuart",complete:function(){i.remove()}})):$.dispatch({type:"cart-clear"})}})},CartTableComponent.prototype.handleAmount=function(e){var t=e.closest(".cart-table-good"),i=t.find("input, select, textarea").serializeObject(),n=$.extend({customAction:"amount"},t.data(),i);$.ajax({url:e.data("url")+"?amount="+e.val()||window.location,method:$(this).data("method")||"post",dataType:"json",data:n,success:function(e){console.log("recalc delivery cost on change amount item");var t=$(".cart-checkout-datetime .js-datePicker input").val(),i="/udata/emarket/deliveryDateParam/${date}/.json".replace("${date}",t);t&&""!=t&&$.ajax({url:i,dataType:"json",success:function(e){var t=$(".cart-checkout-datetime__time-inner .js-pure:checked");console.log("selected_time: "+t),t.length>0&&($(t).hasClass("express_delivery")?cartFunctions.updateCartWidgetDelivery(!0,0===e.deliveryExpressPrice?"бесплатно":e.deliveryExpressPrice):cartFunctions.updateCartWidgetDelivery(!0,0===e.price?"бесплатно":e.price))}}),shopModules._updateCartWidget(e.cart),$.dispatch({type:"cart-table-update",payload:e,status:e.status}),e.delivery&&$.dispatch({type:"cart-delivery-update",payload:e,price:!!e["void:delivery-price"].actual&&e["void:delivery-price"].actual})}})},CartTableComponent.prototype.handleDispatcher=function(e){if("cart-table-update"===e.type){if(console.log("response.item.wheel.allow 11"),e.payload.item&&e.payload.item.wheel&&e.payload.item.wheel.hasOwnProperty("allow")){console.log("response.item.wheel.allow 22");var t=$(".wheel_hover"),i=$(".wheel_product"),n=$(".wheel_integration"),s=$("#wheel_button");!0===e.payload.item.wheel.allow_spin||"true"==e.payload.item.wheel.allow_spin||1==e.payload.item.wheel.allow_spin?(console.log("response.item.wheel.allow 33 show"),t.addClass("hidden"),n.removeClass("hidden")):(console.log("response.item.wheel.allow 33 hide"),t.removeClass("hidden"),i.remove(),$.dispatch({type:"cart-discount-update",status:!1,reason:"wheelDiscount",payload:{}}),e.payload.cart&&$.dispatch({type:"cart-table-update",payload:e.payload.cart,status:e.payload.status})),!0===e.payload.item.wheel.allow||"true"==e.payload.item.wheel.allow||1==e.payload.item.wheel.allow?n.hasClass("hidden")&&(n.removeClass("hidden"),n.removeClass("wide"),s.data("status","open"),s.text("НАЖМИТЕ, ЧТОБЫ ВЫИГРАТЬ ПРИЗ")):n.addClass("hidden")}this.handleItems(e.payload)}},CartTableComponent.prototype.handleItems=function(e){if(e.items&&e.items["nodes:item"])for(var t in e.items["nodes:item"])if(e.items["nodes:item"].hasOwnProperty(t)&&e.items["nodes:item"][t]){var i=e.items["nodes:item"][t];this.handleItem(i)}},CartTableComponent.prototype.handleItem=function(e){var t=$(this),i=e["attribute:id"],n=null,s=null,o=null,a=null,r=t.find('[data-cart-item-id="'+i+'"]'),l=r.find(".cart-table-good__amount input"),c=r.find(".cart-table-good__price-one"),d=r.find(".cart-table-good__price-sum"),h=r.find(".cart-table-good__price-discount");e.amount&&(o=e.amount),e.price&&e.price.actual&&(n=e.price.actual),e["total-price"]&&e["total-price"].actual&&(s=e["total-price"].actual),e.discount_percents&&(a=e.discount_percents),s&&d.html(s+" руб."),n&&c.html(n+" руб./шт."),o&&l.val(o),a&&h.html("-"+a+"%"),c.toggleClass("hidden",o<=1),h.toggleClass("hidden",a<=0)},customElements.define("cart-table",CartTableComponent),CartRefundBottlesComponent.prototype=Object.create(HTMLElement.prototype),CartRefundBottlesComponent.prototype.constructor=CartRefundBottlesComponent,Object.setPrototypeOf(CartRefundBottlesComponent,HTMLElement),CartRefundBottlesComponent.prototype.connectedCallback=function(){this._$self=$(this),this._$input=$("input",$(this)),this._$input.on("keyup.bottlesRefundInput",this.handleKeyUp.bind(this))},CartRefundBottlesComponent.prototype.disconnectedCallback=function(){this._$input.off("keyup.bottlesRefundInput")},CartRefundBottlesComponent.prototype.handleKeyUp=function(e){this._$self.find("input").val(this._$self.find("input").val().replace(/[^0-9]/g,""));var t=this,i=this._$self.find("input, select, textarea").serializeObject(),n=$.extend({customAction:"refundBottles"},this._$self.data(),i);helpers.delay.call(t._$self,(function(){$.ajax({url:t._$self.data("action")||window.location,method:t._$self.data("method")||"post",dataType:"json",data:n,success:function(e){e.status}})}),500)},customElements.define("cart-refund",CartRefundBottlesComponent),CartPhoneComponent.prototype=Object.create(HTMLElement.prototype),CartPhoneComponent.prototype.constructor=CartPhoneComponent,Object.setPrototypeOf(CartPhoneComponent,HTMLElement),CartPhoneComponent.prototype.connectedCallback=function(){this.checkSMS=this.checkSMS.bind(this),this.handleDispatcher=this.handleDispatcher.bind(this),this._options={id:$(this).data("id"),timer:$(this).data("timer")},this._state={sent:!1,confirm:!1,phoneComplete:!1},this._$self=$(this),this._$num=$(".cart-checkout-phone__num",this._$self),this._$sms=$(".cart-checkout-phone__sms",this._$self),this._$numI=$("input",this._$num),this._$smsI=$("input",this._$sms),this._$send=this._$self.find(".cart-checkout-phone__send"),this._$tools=this._$self.find(".cart-checkout-phone__tools"),this._$notice=this._$self.find(".cart-checkout-phone__notice"),this._$count=this._$self.find(".cart-checkout-phone__count-down"),this._$countLine=this._$self.find(".cart-checkout-phone__count-down-line"),this._$changeAction=this._$self.find('.cart-checkout-phone__tools-btn[data-action="change"]'),this._$repeatAction=this._$self.find('.cart-checkout-phone__tools-btn[data-action="repeat"]'),this._$numI.on("keyup.phoneInput",this.handlePhoneInput.bind(this)),this._$smsI.on("keyup.smsInput",this.handleSMSInput.bind(this)),this._$send.on("click.sendSMS",this.sendSMS.bind(this)),this._$changeAction.on("click.changePhone",this.changePhone.bind(this)),this._$repeatAction.on("click.changePhone",this.repeatSMS.bind(this)),$.subscribe(this.handleDispatcher)},CartPhoneComponent.prototype.disconnectedCallback=function(){this._$numI.off("keyup.phoneInput"),this._$send.off("click.sendSMS")},CartPhoneComponent.prototype.handleDispatcher=function(e){"count-down-complete"===e.type&&e.id===this._options.id&&(this._$repeatAction.prop("disabled",!1),this._$countLine.toggleClass("hidden",!0))},CartPhoneComponent.prototype.changePhone=function(){this._$smsI.val(""),this._$numI.val(""),this._$numI.prop("readonly",!1),this._$numI.trigger("change"),this._$numI.data("phonecomplete",!1),this._$sms.addClass("hidden"),this._$send.addClass("hidden"),this._$tools.addClass("hidden"),this._$notice.addClass("hidden"),this._$count.addClass("hidden"),this._$countLine.toggleClass("hidden",!1),$(".js-confirm-by-phone").prop("checked",!0).prop("disabled",!0),$.dispatch({id:this._options.id,type:"count-down-stop"})},CartPhoneComponent.prototype.repeatSMS=function(){this.sendSMS()},CartPhoneComponent.prototype.sendSMS=function(){this._state.sent=!0,this._$sms.removeClass("hidden"),this._$send.addClass("hidden"),this._$numI.prop("readonly",!0),this._$tools.toggleClass("hidden",!0),this._$notice.toggleClass("hidden",!0),this._$repeatAction.prop("disabled",!0),this._$count.toggleClass("hidden",!1),this._$countLine.toggleClass("hidden",!1),$.dispatch({type:"count-down-start",id:this._options.id,timer:this._options.timer+1}),$.ajax({url:this._$self.data("sendPhone"),method:this._$self.data("method")||"post",dataType:"json",data:{phone:this._$numI.val()},success:function(e){}})},CartPhoneComponent.prototype.checkSMS=function(){var e=this;e._$self.prop("readonly",!0),e._$smsI.data("smscodevalid",!1),$.ajax({url:e._$self.data("checkPhone"),method:"post",dataType:"json",data:{sms:e._$smsI.val()},success:function(t){var i="Что-то пошло не так",n=!1;t.code&&(i=t.msg||"Что-то пошло не так",10!==t.code&&30!==t.code?(e._$self.prop("readonly",!1),e._$smsI.data("smscodevalid",!1),$(".js-confirm-by-phone").prop("checked",!0).prop("disabled",!0)):(e._$self.prop("readonly",!0),e._$smsI.data("smscodevalid",!0),$(".js-confirm-by-phone").prop("disabled",!1),n=!0)),n?(formNotifications.hideErrorLabel.call(e._$smsI.closest(".b-form_box")),e._$sms.addClass("hidden"),e._$send.addClass("hidden"),e._$tools.removeClass("hidden"),e._$notice.addClass("hidden"),e._$count.addClass("hidden"),e._$countLine.toggleClass("hidden",!1),$.dispatch({id:e._options.id,type:"count-down-stop"})):formNotifications.showErrorLabel.call(e._$smsI.closest(".b-form_box"),i,0)}})},CartPhoneComponent.prototype.handlePhoneInput=function(e){this._state.phoneComplete=this._$numI.data("phonecomplete"),console.log("phonecomplete"),console.log(this._state.phoneComplete),this._$send.toggleClass("hidden",!this._state.phoneComplete),this._$notice.toggleClass("hidden",!this._state.phoneComplete)},CartPhoneComponent.prototype.handleSMSInput=function(){var e=this;helpers.delay.call(e._$sms,(function(){4===e._$smsI.val().length&&e._$smsI.data("maskComplete")?e.checkSMS():formNotifications.hideErrorLabel.call(e._$smsI.closest(".b-form_box"))}),200)},customElements.define("cart-phone",CartPhoneComponent),CartPromoCodeComponent.prototype=Object.create(HTMLElement.prototype),CartPromoCodeComponent.prototype.constructor=CartPromoCodeComponent,Object.setPrototypeOf(CartPromoCodeComponent,HTMLElement),CartPromoCodeComponent.prototype.connectedCallback=function(){this.handleError=this.handleError.bind(this),this.handleSuccess=this.handleSuccess.bind(this),this._$self=$(this),this._$btn=$(".cart-summary__promo-code-btn",$(this)),this._$input=$(".cart-summary__promo-code-input input",$(this)),this._$notice=$(".cart-summary__promo-code-notice",$(this)),this._$btn.on("click.applyPromoCode",this.handleApply.bind(this)),this._$input.on("keyup.promoCodeInput",this.handleKeyUp.bind(this)),this._$self.on("promoCode.reset",this.resetPromoCode.bind(this))},CartPromoCodeComponent.prototype.disconnectedCallback=function(){this._$btn.off("click.applyPromoCode"),this._$input.off("keyup.promoCodeInput"),this._$self.off("promoCode.reset")},CartPromoCodeComponent.prototype.resetPromoCode=function(){this._$input.val(""),this._$input.prop("disabled",!1),this._$input.data("applied",!1),this._$btn.toggleClass("hidden",!0),this._$notice.toggleClass("hidden",!0),$.dispatch({id:this._$self.data("id"),type:"error-message-hide"})},CartPromoCodeComponent.prototype.handleKeyUp=function(e){this._$btn.toggleClass("hidden",0===this._$input.val().length);var t=this._$self;helpers.delay.call(t,(function(){$.dispatch({id:t.data("id"),type:"error-message-hide"})}),200)},CartPromoCodeComponent.prototype.handleApply=function(e){var t=this,i=this._$self.find("input, select, textarea").serializeObject(),n=$.extend({customAction:"promoCode"},this._$self.data(),i);$.ajax({url:this._$self.data("action")||window.location,method:this._$self.data("method")||"post",dataType:"json",data:n,success:function(e){e.status?t.handleSuccess(e):e.status||t.handleError(e)},error:function(){t.handleError({message:"Произошла ошибка"})}})},CartPromoCodeComponent.prototype.handleError=function(e){this._$input.prop("disabled",!1),this._$input.data("applied",!1),this._$btn.toggleClass("hidden",!1),this._$notice.toggleClass("hidden",!0),$.dispatch({id:this._$self.data("id"),type:"error-message-show",message:e.message||"Некорректный промокод"}),e.cart&&$.dispatch({type:"cart-table-update",payload:e.cart,status:e.status}),$.dispatch({type:"cart-discount-update",status:!1,reason:"promocode",payload:{}})},CartPromoCodeComponent.prototype.handleSuccess=function(e){this._$input.prop("disabled",!0),this._$input.data("applied",!0),this._$btn.toggleClass("hidden",!0),this._$notice.toggleClass("hidden",!1),$.dispatch({id:this._$self.data("id"),type:"error-message-hide"}),e.cart&&$.dispatch({type:"cart-table-update",payload:e.cart,status:e.status}),e.item&&$.dispatch({type:"cart-discount-update",status:!0,reason:"promocode",payload:e.item})},customElements.define("cart-promocode",CartPromoCodeComponent),CartPaymentComponent.prototype=Object.create(HTMLElement.prototype),CartPaymentComponent.prototype.constructor=CartPaymentComponent,Object.setPrototypeOf(CartPaymentComponent,HTMLElement),CartPaymentComponent.prototype.connectedCallback=function(){$(this).on("change.onlinPaymentComponent","input",this.handleChange.bind(this))},CartPaymentComponent.prototype.disconnectedCallback=function(){$(this).off("change.onlinPaymentComponent")},CartPaymentComponent.prototype.handleChange=function(e){var t=$(this).find(":checked");$.dispatch({type:"cart-payment-change",payload:{checked:t}})},customElements.define("cart-payment",CartPaymentComponent),CartDatesCaptionComponent.prototype=Object.create(HTMLElement.prototype),CartDatesCaptionComponent.prototype.constructor=CartDatesCaptionComponent,Object.setPrototypeOf(CartDatesCaptionComponent,HTMLElement),CartDatesCaptionComponent.prototype.connectedCallback=function(){this.handleDispatcher=this.handleDispatcher.bind(this),this.texts=$(this).data("texts"),$.subscribe(this.handleDispatcher)},CartDatesCaptionComponent.prototype.disconnectedCallback=function(){$.unsubscribe(this.handleDispatcher)},CartDatesCaptionComponent.prototype.handleDispatcher=function(e){"cart-delivery-type-change"===e.type&&$(this).html(this.texts[e.payload]||"Дата и время:")},customElements.define("cart-dates-caption",CartDatesCaptionComponent),CartTimeContainerComponent.prototype=Object.create(HTMLElement.prototype),CartTimeContainerComponent.prototype.constructor=CartTimeContainerComponent,Object.setPrototypeOf(CartTimeContainerComponent,HTMLElement),CartTimeContainerComponent.prototype.connectedCallback=function(){this.handleDispatcher=this.handleDispatcher.bind(this),this.handleResponse=this.handleResponse.bind(this),this.handleTimeList=this.handleTimeList.bind(this),this._date=null,this._$self=$(this),this._autoChangeToNext=this._$self.data("autoChangeDateToNext"),this._$notice=$(".cart-checkout-datetime__notice",this._$self),this._$selector=$(".cart-checkout-datetime__time",this._$self),this._$selectorInner=$(".cart-checkout-datetime__time-inner"),this._$datepicker=$(".cart-checkout-datetime .js-datePicker input"),$("body").on("change.changeCartDate",".cart-checkout-datetime .js-datePicker input",this.changeDate.bind(this)),$.subscribe(this.handleDispatcher)},CartTimeContainerComponent.prototype.disconnectedCallback=function(){$.unsubscribe(this.handleDispatcher)},CartTimeContainerComponent.prototype.changeDate=function(e){console.log("CartTimeContainerComponent.prototype.changeDate");var t=this,i=$(e.target);if(i.hasClass("datepicker_sync"))return console.log(i),void console.log("break onchange event");var n=i.val(),s=new Date(n.replace(/(\d{2}).(\d{2}).(\d{4})/,"$3-$2-$1")),o=s.getDate(),a=s.getMonth(),r=s.getFullYear();if(!i.hasClass("current_datepicker")&&!i.hasClass("datepicker_sync")){i.addClass("current_datepicker");var l=o+" "+["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"][a];$(".js-delivery_date_str").text(l)}var c=$(".cart-checkout-datetime .js-datePicker input:not(.datepicker_sync):not(.current_datepicker)"),d=$(".cart-checkout-datetime .js-datePicker input");if(c.addClass("datepicker_sync"),c.each((function(){var e=$(this);e.val()!=i.val()&&e.parent().find('.datepicker--cell-day[data-date="'+o+'"][data-month="'+a+'"][data-year="'+r+'"]').trigger("click")})),this._date=i.val(),console.log("this._date"),console.log(this._date),$.dispatch({type:"cart-time-container-toggle",payload:!!this._date.length}),console.log("refresh date in calendar"),console.log(this._date),this._date.length&&$(this).data("apiUrl")){var h=$(this).data("apiUrl").replace("${date}",this._date);$.ajax({url:h,dataType:"json",success:function(e){t.handleResponse(e)}})}d.removeClass("datepicker_sync").removeClass("current_datepicker")},CartTimeContainerComponent.prototype.handleResponse=function(e){void 0!==e.price?$.dispatch({type:"cart-address-for-delivery",payload:e,allow:!0}):$.dispatch({type:"cart-address-for-delivery",allow:!1});var t=!helpers.checkBool(e.noAvaliablePeriod);console.log(e),cartFunctions.updateCartWidgetDelivery(!0,!1);var i=isToday=!1;if(e.deliveryExpress&&e.isToday&&e.hasOwnProperty("deliveryExpressPrice")&&e.deliveryExpressPrice>=0){switch(e.deliveryExpress){case"true":case"yes":case"1":i=!0;break;case"false":case"no":case"0":case null:i=!1;break;default:i=Boolean(e.deliveryExpress)}switch(e.isToday){case"true":case"yes":case"1":isToday=!0;break;case"false":case"no":case"0":case null:isToday=!1;break;default:isToday=Boolean(e.isToday)}if(!0===i&&!0===isToday&&e.deliveryExpressPrice>=0&&e.deliveryExpressId>=0){console.log("express доставка"),this._$selectorInner.html("");e.deliveryExpressPrice;var n='<div class="express_delivery_wrap" data-mark_date="yes"><label class="express_delivery_input"><input class="js-pure express_delivery" type="radio" name="time" value="express доставка" data-id="'+e.deliveryExpressId+'" data-required="true"  /><span>Доставка в течение часа</span></label><span class="express_delivery_notice_2">*Доступно только для физических лиц <br/>**Стоимость услуги <span class="express_delivery_price">'+e.deliveryExpressPrice+" Р</span></span></div>";this._$selectorInner.append(n),this._$selectorInner.find(".express_delivery").prop("disabled",!1)}}t||i&&isToday?($(".js-modal_calendar_submit").removeAttr("disabled"),t&&this.handleTimeList(e.period,i&&isToday),$.dispatch({id:"delivery-time",type:"error-message-hide"}),$.dispatch({id:"delivery-time-modal",type:"error-message-hide"}),$.dispatch({id:"delivery-calendar-modal",type:"error-message-hide"})):($(".js-modal_calendar_submit").prop("disabled",!0),$(".js-modal_period_submit").prop("disabled",!0),this.handleTimeList({},e),this._autoChangeToNext?this._$datepicker.parent().find(".datepicker--cell-day.-current-").next().trigger("click"):($.dispatch({id:"delivery-time",type:"error-message-show",message:"Выберите другую дату"}),$.dispatch({id:"delivery-time-modal",type:"error-message-show",message:'<a href="#" class="js-choose_another_delivery_date">Выберите другую дату</a>'}),$.dispatch({id:"delivery-calendar-modal",type:"error-message-show",message:"Выберите другую дату"}))),this._$selectorInner.on("change",".js-pure",(function(){var t=$(this).val();$('.js-pure[value="'+t+'"]:not(:checked)').prop("checked",!0),$(".js-modal_period_submit").removeAttr("disabled"),console.log("time_input_change"),$(this).hasClass("express_delivery")?cartFunctions.updateCartWidgetDelivery(!0,0===e.deliveryExpressPrice?"бесплатно":e.deliveryExpressPrice):cartFunctions.updateCartWidgetDelivery(!0,0===e.price?"бесплатно":e.price)}))},CartTimeContainerComponent.prototype.handleTimeList=function(e,t){if(console.log("time insert"),console.log(e),console.log(t),!0!==t&&(this._$selectorInner.html(""),this._$selectorInner.find("input").each((function(){$(this).prop("disabled",!0).prop("checked",!1)}))),this._$selectorInner.append('<input type="hidden" name="time_id" value=""  />'),e&&e.item){for(var i in e.item)if(e.item.hasOwnProperty(i)){var n=e.item[i],s=n.from,o=n.to,a=n.id,r=s+"-"+o;1000001==a&&(r="Утром"),1000002==a&&(r="Днём"),1000003==a&&(r="Вечером");var l='<label><input class="js-pure" type="radio" name="time" value="'+s+"-"+o+'" data-period="'+s+"-"+o+'" data-id="'+a+'" data-required="true"  /><span>'+r+"</span></label>";this._$selectorInner.append(l),this._$selectorInner.find('input[data-period="'+s+"-"+o+'"]').prop("disabled",!1)}}else $.dispatch({id:"delivery-time",type:"error-message-show",message:"Выберите другую дату"}),$.dispatch({id:"delivery-time-modal",type:"error-message-show",message:'<a href="#" class="js-choose_another_delivery_date">Выберите другую дату</a>'}),$.dispatch({id:"delivery-calendar-modal",type:"error-message-show",message:"Выберите другую дату"})},CartTimeContainerComponent.prototype.handleDispatcher=function(e){if("cart-delivery-type-change"===e.type&&e.payload){var t="#pickup"===e.payload?"/emarket/eonestep/pickup/do/":"/emarket/eonestep/delivery/do/",i="#pickup"===e.payload?"6516":"601";$(".eone_form").attr("action",t),$(".js-delivery-id").val(i),$(this).toggleClass("hidden","#pickup"===e.payload),this._$datepicker.parent().find(".datepicker--cell-day.-selected-").trigger("click");var n=$(".js-datePicker input");n.val(""),n.trigger("change.changeCartDate")}"cart-time-container-toggle"===e.type&&(this._$notice.toggleClass("hidden",e.payload),this._$selector.toggleClass("hidden",!e.payload))},customElements.define("cart-time-container",CartTimeContainerComponent),CartNoticeComponent.prototype=Object.create(HTMLElement.prototype),CartNoticeComponent.prototype.constructor=CartNoticeComponent,Object.setPrototypeOf(CartNoticeComponent,HTMLElement),CartNoticeComponent.prototype.connectedCallback=function(){this.handleDispatcher=this.handleDispatcher.bind(this),$.subscribe(this.handleDispatcher)},CartNoticeComponent.prototype.disconnectedCallback=function(){$.unsubscribe(this.handleDispatcher)},CartNoticeComponent.prototype.handleClick=function(e){e.preventDefault();var t=$(this);t.removeClass("active"),setTimeout((function(){t.html(e.message)}),400)},CartNoticeComponent.prototype.handleDispatcher=function(e){var t=$(this);"cart-notice-show"===e.type&&(t.toggleClass("hidden",!1),t.find("> div").html(e.message)),"cart-notice-hide"!==e.type||e.id&&e.id!==t.data("id")||t.toggleClass("hidden",!0)},customElements.define("cart-notice",CartNoticeComponent),ContactlessPaymentComponent.prototype=Object.create(HTMLInputElement.prototype),ContactlessPaymentComponent.prototype.constructor=ContactlessPaymentComponent,Object.setPrototypeOf(ContactlessPaymentComponent,HTMLInputElement),ContactlessPaymentComponent.prototype.connectedCallback=function(){this.handleDispatcher=this.handleDispatcher.bind(this),$.subscribe(this.handleDispatcher)},ContactlessPaymentComponent.prototype.disconnectedCallback=function(){$.unsubscribe(this.handleDispatcher)},ContactlessPaymentComponent.prototype.handleDispatcher=function(e){if("cart-payment-change"===e.type){var t=!e.payload.checked.data("onlinePayment");$(this).attr("disabled",t),t&&$(this).prop("checked",!1)}},customElements.define("contactless-payment",ContactlessPaymentComponent,{extends:"input"}),CountDownComponent.prototype=Object.create(HTMLElement.prototype),CountDownComponent.prototype.constructor=CountDownComponent,Object.setPrototypeOf(CountDownComponent,HTMLElement),CountDownComponent.prototype.connectedCallback=function(){this.setText=this.setText.bind(this),this.countDown=this.countDown.bind(this),this.handleDispatcher=this.handleDispatcher.bind(this),this._timer=null,this._current=0,$.subscribe(this.handleDispatcher)},CountDownComponent.prototype.disconnectedCallback=function(){$.unsubscribe(this.handleDispatcher)},CountDownComponent.prototype.setText=function(){$(this).html(this._current+" "+helpers.getNumEnding(this._current,$(this).data("decl")))},CountDownComponent.prototype.countDown=function(e){var t=this;t._current--,this.setText(),0===t._current?(clearTimeout(t._timer),e&&e()):this._timer=setTimeout((function(){t.countDown(e)}),1e3)},CountDownComponent.prototype.handleDispatcher=function(e){var t=$(this).data("id");"count-down-start"===e.type&&e.id===t&&(this._current=e.timer||11,this.countDown((function(){$.dispatch({id:t,type:"count-down-complete"})}))),"count-down-stop"===e.type&&e.id===t&&(this._timer&&clearTimeout(this._timer),this._current=0,this.setText())},customElements.define("count-down",CountDownComponent),ErrorMessageComponent.prototype=Object.create(HTMLElement.prototype),ErrorMessageComponent.prototype.constructor=ErrorMessageComponent,Object.setPrototypeOf(ErrorMessageComponent,HTMLElement),ErrorMessageComponent.prototype.connectedCallback=function(){this.handleDispatcher=this.handleDispatcher.bind(this),$.subscribe(this.handleDispatcher)},ErrorMessageComponent.prototype.disconnectedCallback=function(){$(this).off("click.clickOnError"),$.unsubscribe(this.handleDispatcher)},ErrorMessageComponent.prototype.handleClick=function(e){e.preventDefault();var t=$(this);t.removeClass("active"),setTimeout((function(){t.html(e.message)}),400)},ErrorMessageComponent.prototype.handleDispatcher=function(e){var t=$(this);"error-message-show"!==e.type||e.id&&e.id!==t.data("id")||(t.html(e.message),setTimeout((function(){t.addClass("active")}),10)),"error-message-hide"!==e.type||e.id&&e.id!==t.data("id")||(t.removeClass("active"),setTimeout((function(){t.html(e.message)}),400))},customElements.define("error-message",ErrorMessageComponent),$((function(){var e=window.location.hash,t="popupgood=",i="good=";if(-1!=e.indexOf(t)){if((s=e.slice(e.indexOf(t)+10)).length>0){var n=$('*[data-gid="'+s+'"]').eq(0);console.log(n),n.length>0&&$("html, body").animate({scrollTop:n.offset().top},2e3,(function(){$(".js-popup",n).eq(0).trigger("click")}))}}else if(-1!=e.indexOf(i)){var s;if((s=e.slice(e.indexOf(i)+5)).length>0){n=$('*[data-gid="'+s+'"]').eq(0);console.log(n),n.length>0&&$("html, body").animate({scrollTop:n.offset().top},2e3)}}})),$((function(){if($(".js-add-to-cart_fake").click((function(){$(this).parents(".b-mp-water_product_wrap").find(".js-add-to-cart").length>0&&($(this).parents(".b-mp-water_product_wrap").find(".js-add-to-cart").trigger("click"),console.log("fake"));var e=$(this).data("id");return $('.promo-wrap-hidden .js-add-to-cart[data-id="'+e+'"]').length>0&&($('.promo-wrap-hidden .js-add-to-cart[data-id="'+e+'"]').trigger("click"),console.log("fake banner")),!1})),$(".b-footer_cart.show.recommended_items_wrap").hover((function(){$(this).addClass("recommended_items_footer")}),(function(){$(this).removeClass("recommended_items_footer")})),$(".cart-error__close_link").click((function(){return $(".popup_er").removeClass("popup_er"),!1})),$(".js-modal_calendar_submit").on("click",(function(e){if(e.preventDefault(),console.log("js-modal_calendar_submit"),console.log($(this).is("[disabled]")),$(this).is("[disabled]"))return!1;return Fancybox.close(),Fancybox.show([{src:"#vModal--calendar_periods",type:"inline"}],{compact:!0,autoFocus:!0,closeButton:!0,defaultDisplay:"flex",dragToClose:!0,wheel:!1,id:"calendar_periods"}),!0})),$("body").on("click",".js-choose_another_delivery_date",(function(e){e.preventDefault(),console.log("js-modal_calendar_return");return Fancybox.close(),Fancybox.show([{src:"#vModal--calendar",type:"inline"}],{compact:!0,autoFocus:!0,closeButton:!0,defaultDisplay:"flex",dragToClose:!0,wheel:!1,id:"calendar"}),!0})),$(".js-modal_period_submit").click((function(e){return e.preventDefault(),console.log("js-modal_period_submit"),$(this).is("[disabled]")||$(".eone_form").trigger("submit"),!1})),$(".js-cart_guest").length>0){var e={compact:!0,autoFocus:!0,closeButton:!0,defaultDisplay:"flex",dragToClose:!0,wheel:!1,id:"userLogin",on:{done:(e,t)=>{document.querySelectorAll(".vModal form .recaptcha").forEach((e=>{""==e.innerHTML&&grecaptcha.render(e,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})})),document.querySelectorAll(".vModal form").forEach((e=>{e.querySelector(".form-error-str.response").innerHTML=""})),resetSmsCodeTimer()},shouldClose:(e,t)=>{document.querySelectorAll(".vModal form .recaptcha").forEach((e=>{grecaptcha.reset()}))}}};Fancybox.close(),Fancybox.show([{src:"#vModal--userLogin",type:"inline"}],e)}})),$((function(){!function(e){"use strict";jQuery.fn.beforeAfter=function(t){var i=jQuery.extend({movable:!0,clickMove:!0,alwaysShow:!0,position:50,opacity:.4,activeOpacity:1,hoverOpacity:.8,separatorColor:"#ffffff",bulletColor:"#ffffff",arrowColor:"#333333"},t);return this.each((function(){!function(t){if(2==jQuery(t).children().length){var n=e(t).children()[0],s=e(t).children()[1],o=e(t).css("position"),a=(e(t).css("z-index"),e(t).css("overflow")),r=e(n).css("position"),l=e(n).css("top"),c=e(n).css("left"),d=e(n).css("width"),h=e(n).css("height"),u=e(n).css("z-Index"),p="position:"+r+";top:"+l+";left:"+c+";width:"+d+";height:"+h+";z-index:"+u+";float:"+e(n).css("float"),f="position:"+e(s).css("position")+";top:"+e(s).css("top")+";left:"+e(s).css("left")+";width:"+e(s).css("width")+";height:"+e(s).css("height")+";z-index:"+e(s).css("z-Index");jQuery(t).attr("data-bareservedstyle","position:"+o+";overflow:"+a),jQuery(n).attr("data-bareservedstyle",p),jQuery(s).attr("data-bareservedstyle",f);var m=isNaN(parseInt(u))?0:parseInt(u),g="-webkit-user-select:none;-ms-user-select:none;user-select:none;";jQuery(t).css({position:"relative",overflow:"hidden"}),jQuery(n).css({position:"relative",top:"0",left:"0",width:"100%"}),jQuery(s).css({position:"absolute",top:"0",right:"0",width:"auto",height:"100%","z-index":m+1});var v=document.createElement("DIV");v.setAttribute("style","position:relative !important;width:100% !important;height:100%  !important;"+g),jQuery(n).clone({withDataAndEvents:!0}).appendTo(v);var y=document.createElement("DIV");y.setAttribute("style","position:absolute !important;width:"+i.position+"% !important;height:100% !important;top:0px !important;right:0px !important;overflow:hidden !important;"+g),jQuery(s).clone({withDataAndEvents:!0}).appendTo(y);var b=document.createElement("I");b.setAttribute("style","border:solid black;border-width:0 2px 2px 0;display:inline-block;padding:3px;transform:rotate(135deg);-webkit-transform:rotate(135deg);");var _=document.createElement("I");_.setAttribute("style","border:solid black;border-width:2px 0 0 2px;display:inline-block;padding:3px;transform:rotate(135deg);-webkit-transform:rotate(135deg);");var w=document.createElement("DIV");w.setAttribute("style","position:absolute;width:32px;height:32px;line-height:30px;padding:4xp;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;background-color:#fff;");var x=document.createElement("DIV");x.setAttribute("style","position:relative;width:100%;height:100%;");var C=document.createElement("DIV");C.setAttribute("style","position:absolute !important;width:2px !important;height:100% !important;top:0px !important;right:"+i.position+"% !important;overflow:visible !important;transform:translateX(50%) !important;background-color: #fff;cursor:e-resize;opacity:"+i.opacity+";z-index:"+m+"2;"+g),jQuery(b).css("border-color",i.arrowColor),jQuery(_).css("border-color",i.arrowColor),jQuery(w).css("background-color",i.bulletColor),jQuery(C).css("background-color",i.separatorColor),w.append(b),w.append(_),x.append(w),C.append(x),t.append(v),t.append(y),t.append(C),jQuery(n).remove(),jQuery(s).remove();var k=function(){jQuery(v).children().width()>0&&jQuery(y).children().width(jQuery(v).children().width()),jQuery(v).children().height()>0&&jQuery(y).children().height(jQuery(v).children().height())};if(jQuery(window).on("resize",k),i.movable){var $=!1;i.clickMove&&(jQuery(v).on("click",(function(){void 0!==i.onMoveStart&&i.onMoveStart();var e=jQuery(t).width(),n=jQuery(C).css("right"),s=((parseInt(n)+Math.min(.05*e,5))/e*100).toFixed(2),o=s>100?100:s<0?0:s;o+="%",jQuery(y).width(o),jQuery(C).css("right",o),void 0!==i.onMoving&&n!=jQuery(C).css("right")&&i.onMoving(),void 0!==i.onMoveEnd&&i.onMoveEnd()})),jQuery(y).on("click",(function(){void 0!==i.onMoveStart&&i.onMoveStart();var e=jQuery(t).width(),n=jQuery(C).css("right"),s=((parseInt(n)-Math.min(.05*e,5))/e*100).toFixed(2),o=s>100?100:s<0?0:s;o+="%",jQuery(y).width(o),jQuery(C).css("right",o),void 0!==i.onMoving&&n!=jQuery(C).css("right")&&i.onMoving(),void 0!==i.onMoveEnd&&i.onMoveEnd()}))),jQuery(t).on("mouseenter",(function(){jQuery(C).css("opacity",i.hoverOpacity)})),jQuery(t).on("mouseleave",(function(){jQuery(C).css("opacity",i.opacity)}));var T=function(e){var n=e.pageX||e.touches[0].clientX,s=jQuery(t).offset().left,o=jQuery(t).width(),a=jQuery(C).css("right"),r=((s+o-n)/o*100).toFixed(2),l=r>100?100:r<0?0:r;l+="%",jQuery(y).width(l),jQuery(C).css("right",l),void 0!==i.onMoving&&a!=jQuery(C).css("right")&&i.onMoving()},S=function(e){$=!0,jQuery(C).css("opacity",i.opacity),void 0!==i.onMoveEnd&&i.onMoveEnd()};jQuery(C).on("mousedown",(function(e){$=!1,jQuery(C).css("opacity",i.activeOpacity),void 0!==i.onMoveStart&&i.onMoveStart(),jQuery(document).on("mousemove",T),jQuery(document).on("mouseup",(function(e){jQuery(document).off("mousemove",T),$||S()})),jQuery(window).on("mouseup",(function(e){jQuery(document).off("mousemove",T),$||S()}))})),jQuery(C).on("touchstart",(function(e){$=!1,void 0!==i.onMoveStart&&i.onMoveStart(),jQuery(C).css("opacity",i.activeOpacity),jQuery(document).on("touchmove",T),jQuery(document).on("touchcancel",(function(e){jQuery(document).off("touchmove",T),$||S()})),jQuery(window).on("touchcancel",(function(e){jQuery(document).off("touchmove",T),$||S()})),jQuery(document).on("touchend",(function(e){jQuery(document).off("touchmove",T),$||S()}))}))}k()}else console.log("%cWarning: %s","color:#e4672e;font-size:200%;","BeforeAfter plugin need absolutely two childrens.")}(this)}))}}(jQuery),$(".beforeAfter").length>0&&$(".beforeAfter").beforeAfter({movable:!0,clickMove:!0,position:60,separatorColor:"#fafafa",bulletColor:"#fafafa",onMoveStart:function(e){console.log(event.target)},onMoving:function(){console.log(event.target)},onMoveEnd:function(){console.log(event.target)}})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(this,(function(e){"use strict";const t=(e,t=1e4)=>(e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t),i=function(e){if(!(e&&e instanceof Element&&e.offsetParent))return!1;const t=e.scrollHeight>e.clientHeight,i=window.getComputedStyle(e).overflowY,n=-1!==i.indexOf("hidden"),s=-1!==i.indexOf("visible");return t&&!n&&!s},n=function(e,t){return!(!e||e===document.body||t&&e===t)&&(i(e)?e:n(e.parentElement,t))},s=function(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(t.childElementCount>1){for(var i=document.createElement("div");t.firstChild;)i.appendChild(t.firstChild);return i}return t.firstChild},o=e=>`${e||""}`.split(" ").filter((e=>!!e)),a=(e,t,i)=>{o(t).forEach((t=>{e&&e.classList.toggle(t,i||!1)}))};class r{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}const l={passive:!1};class c{constructor(e,{start:t=(()=>!0),move:i=(()=>{}),end:n=(()=>{})}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=n;for(const e of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[e]=this[e].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,l),this.element.addEventListener("touchstart",this.onTouchStart,l),this.element.addEventListener("touchmove",this.onMove,l),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||0!==e.button)return;const t=new r(e);this.currentPointers.some((e=>e.id===t.id))||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new r(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map((e=>new r(e))):[new r(e)],n=[];for(const e of i){const t=this.currentPointers.findIndex((t=>t.id===e.id));t<0||(n.push(e),this.currentPointers[t]=e)}n.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&0!==e.button||(this.triggerPointerEnd(e,new r(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new r(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){const i=this.currentPointers.findIndex((e=>e.id===t.id));i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,l),this.element.removeEventListener("touchstart",this.onTouchStart,l),this.element.removeEventListener("touchmove",this.onMove,l),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function d(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function h(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const u=e=>"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e),p=(e,...t)=>{const i=t.length;for(let n=0;n<i;n++){const i=t[n]||{};Object.entries(i).forEach((([t,i])=>{const n=Array.isArray(i)?[]:{};e[t]||Object.assign(e,{[t]:n}),u(i)?Object.assign(e[t],p(n,i)):Array.isArray(i)?Object.assign(e,{[t]:[...i]}):Object.assign(e,{[t]:i})}))}return e},f=function(e,t){return e.split(".").reduce(((e,t)=>"object"==typeof e?e[t]:void 0),t)};class m{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const e of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))e.startsWith("on")&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}setOptions(e){this.options=e?p({},this.constructor.defaults,e):{};for(const[e,t]of Object.entries(this.option("on")||{}))this.on(e,t)}option(e,...t){let i=f(e,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...n){let s=f(t,e);var o;"string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))||(s=parseFloat(s)),"true"===s&&(s=!0),"false"===s&&(s=!1),s&&"function"==typeof s&&(s=s.call(this,this,e,...n));let a=f(t,this.options);return a&&"function"==typeof a?s=a.call(this,this,e,...n,s):void 0===s&&(s=a),void 0===s?i:s}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,((e,t,i)=>{let n="";return i?n=this.option(`${t[0]+t.toLowerCase().substring(1)}.l10n.${i}`):t&&(n=this.option(`l10n.${t}`)),n||(n=e),n}));for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e.replace(/\{\{(.*?)\}\}/g,((e,t)=>t))}on(e,t){let i=[];"string"==typeof e?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach((e=>{let i=this.events.get(e);i||(this.events.set(e,[]),i=[]),i.includes(t)||i.push(t),this.events.set(e,i)}))}off(e,t){let i=[];"string"==typeof e?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach((e=>{const i=this.events.get(e);if(Array.isArray(i)){const e=i.indexOf(t);e>-1&&i.splice(e,1)}}))}emit(e,...t){[...this.events.get(e)||[]].forEach((e=>e(this,...t))),"*"!==e&&this.emit("*",e,...t)}}Object.defineProperty(m,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.19"}),Object.defineProperty(m,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class g extends m{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const t=new Map;for(const[i,n]of Object.entries(e)){const e=this.option(i),s=this.plugins[i];s||!1===e?s&&!1===e&&(s.detach(),delete this.plugins[i]):t.set(i,new n(this,e||{}))}for(const[e,i]of t)this.plugins[e]=i,i.attach();this.emit("attachPlugins")}detachPlugins(e){e=e||Object.keys(this.plugins);for(const t of e){const e=this.plugins[t];e&&e.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}}var v;!function(e){e[e.Init=0]="Init",e[e.Error=1]="Error",e[e.Ready=2]="Ready",e[e.Panning=3]="Panning",e[e.Mousemove=4]="Mousemove",e[e.Destroy=5]="Destroy"}(v||(v={}));const y=["a","b","c","d","e","f"],b={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},_={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:b},w='<div class="f-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>',x=e=>e&&null!==e&&e instanceof Element&&"nodeType"in e,C=(e,t)=>{e&&o(t).forEach((t=>{e.classList.remove(t)}))},k=(e,t)=>{e&&o(t).forEach((t=>{e.classList.add(t)}))},$={a:1,b:0,c:0,d:1,e:0,f:0},T=1e3,S="mousemove",M="drag",P="content";let E=null,D=null;class j extends g{get isTouchDevice(){return null===D&&(D=window.matchMedia("(hover: none)").matches),D}get isMobile(){return null===E&&(E=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),E}get panMode(){return this.options.panMode!==S||this.isTouchDevice?M:S}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return"auto"===e?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){const{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of y){const t="e"==e||"f"===e?.001:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var n;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:v.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},$)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},$)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},j.Plugins),i)),this.emit("init");const o=this.content;if(o.addEventListener("load",this.onLoad),o.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const t=s(w);!e.contains(o)||o.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(t):this.spinner=(null===(n=o.parentElement)||void 0===n?void 0:n.insertBefore(t,o))||null}this.emit("beforeLoad")}else queueMicrotask((()=>{this.enable()}))}initContent(){const{container:e}=this,t=this.cn(P);let i=this.option(P)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&k(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){this.spinner&&(this.spinner.remove(),this.spinner=null),this.option("spinner")&&this.container.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),this.state===v.Init?this.enable():this.updateMetrics()}onError(){this.state!==v.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=v.Error,this.emit("error"))}attachObserver(){var e;const t=()=>Math.abs(this.containerRect.width-this.container.getBoundingClientRect().width)>.1||Math.abs(this.containerRect.height-this.container.getBoundingClientRect().height)>.1;this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver((()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout((()=>{t()&&this.onResize(),this.updateTimer=null}),500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))}))),null===(e=this.resizeObserver)||void 0===e||e.observe(this.container)}detachObserver(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new c(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(S,this.onMouseMove)}detachEvents(){var e;const{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(e=this.pointerTracker)||void 0===e||e.stop(),this.pointerTracker=null,document.removeEventListener(S,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){const e=this.friction;this.setTargetForce();const t=this.option("maxVelocity");for(const i of y)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame((()=>this.animate())):this.stop("current")}setTargetForce(){for(const e of y)"e"===e&&this.isBouncingX||"f"===e&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){const{current:i}=this,n=i.e+e,s=i.f+t,o=this.getBounds(),{x:a,y:r}=o,l=a.min,c=a.max,d=r.min,h=r.max;let u=0,p=0;return l!==1/0&&n<l?u=l-n:c!==1/0&&n>c&&(u=c-n),d!==1/0&&s<d?p=d-s:h!==1/0&&s>h&&(p=h-s),Math.abs(u)<.001&&(u=0),Math.abs(p)<.001&&(p=0),Object.assign(Object.assign({},o),{xDiff:u,yDiff:p,inBounds:!u&&!p})}clampTargetBounds(){const{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){const{content:t,contentRect:i}=this,{fitWidth:n,fitHeight:s,fullWidth:o,fullHeight:a}=i;let r=o,l=a;if(this.option("zoom")||0!==this.angle){const i=!(t instanceof HTMLImageElement||"none"!==window.getComputedStyle(t).maxWidth&&"none"!==window.getComputedStyle(t).maxHeight),c=i?o:n,d=i?a:s,h=this.getMatrix(e),u=new DOMPoint(0,0).matrixTransform(h),p=new DOMPoint(0+c,0).matrixTransform(h),f=new DOMPoint(0+c,0+d).matrixTransform(h),m=new DOMPoint(0,0+d).matrixTransform(h),g=Math.abs(f.x-u.x),v=Math.abs(f.y-u.y),y=Math.abs(m.x-p.x),b=Math.abs(m.y-p.y);r=Math.max(g,y),l=Math.max(v,b)}return{contentWidth:r,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===S||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:t,y:i,xDiff:n,yDiff:s}=this.checkBounds(),o=this.option("maxVelocity");let a=this.velocity.e,r=this.velocity.f;0!==n?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,0!==s?(this.isBouncingY=!0,s*r<=0?r+=.14*s:(r=.14*s,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=r)}enable(){const{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const e of y)this.current[e]=this.target[e]=t[e];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=v.Ready,this.emit("ready")}onClick(e){var t;this.isDragging&&(null===(t=this.pointerTracker)||void 0===t||t.clear(),this.trackingPoints=[],this.startDecelAnim());const i=e.target;if(!i||e.defaultPrevented)return;if(i&&i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const e=window.getSelection();return e&&"Range"===e.type})()&&!i.closest("button"))return;const n=i.closest("[data-panzoom-action]"),s=i.closest("[data-panzoom-change]"),o=n||s,a=o&&x(o)?o.dataset:null;if(a){const t=a.panzoomChange,i=a.panzoomAction;if((t||i)&&e.preventDefault(),t){let i={};try{i=JSON.parse(t)}catch(e){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(i)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();const r=this.content.getBoundingClientRect();if(this.dragStart.time&&!this.canZoomOut()&&(Math.abs(r.x-this.dragStart.x)>2||Math.abs(r.y-this.dragStart.y)>2))return;this.dragStart.time=0;const l=t=>{this.option("zoom")&&t&&"string"==typeof t&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(t)&&"function"==typeof this[t]&&(e.preventDefault(),this[t]({event:e}))},c=this.option("click",e),d=this.option("dblClick",e);d?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout((()=>{1===this.clicks?(this.emit("click",e),!e.defaultPrevented&&c&&l(c)):(this.emit("dblClick",e),e.defaultPrevented||l(d)),this.clicks=0,this.clickTimer=null}),350))):(this.emit("click",e),!e.defaultPrevented&&c&&l(c))}addTrackingPoint(e){const t=this.trackingPoints.filter((e=>e.time>Date.now()-100));t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var n;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const s=this.content.getBoundingClientRect();if(this.dragStart={x:s.x,y:s.y,top:s.top,left:s.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===S&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;if(!i.length){const t=e.composedPath()[0];if(["A","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(t.nodeName)||t.closest("[contenteditable]")||t.closest("[data-selectable]")||t.closest("[data-draggable]")||t.closest("[data-panzoom-change]")||t.closest("[data-panzoom-action]"))return!1;null===(n=window.getSelection())||void 0===n||n.removeAllRanges()}if("mousedown"===e.type)e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,i,s){if(!1===this.option("touch",e))return;if(!this.isDragging)return;if(i.length<2&&this.panOnlyZoomed&&t(this.targetScale)<=t(this.minScale))return;if(this.emit("touchMove",e),e.defaultPrevented)return;this.addTrackingPoint(i[0]);const{content:o}=this,a=h(s[0],s[1]),r=h(i[0],i[1]);let l=0,c=0;if(i.length>1){const e=o.getBoundingClientRect();l=a.clientX-e.left-.5*e.width,c=a.clientY-e.top-.5*e.height}const u=d(s[0],s[1]),p=d(i[0],i[1]);let f=u?p/u:1,m=r.clientX-a.clientX,g=r.clientY-a.clientY;this.dragOffset.x+=m,this.dragOffset.y+=g,this.dragOffset.time=Date.now()-this.dragStart.time;let v=t(this.targetScale)===t(this.minScale)&&this.option("lockAxis");if(v&&!this.lockedAxis)if("xy"===v||"y"===v||"touchmove"===e.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const t=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=t>45&&t<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,m=0,g=0}else this.lockedAxis=v;if(n(e.target,this.content)&&(v="x",this.dragOffset.y=0),v&&"xy"!==v&&this.lockedAxis!==v&&t(this.targetScale)===t(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const y=this.checkBounds(m,g);this.option("rubberband")?("x"!==this.isInfinite&&(y.xDiff>0&&m<0||y.xDiff<0&&m>0)&&(m*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*y.xDiff))),"y"!==this.isInfinite&&(y.yDiff>0&&g<0||y.yDiff<0&&g>0)&&(g*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*y.yDiff)))):(y.xDiff&&(m=0),y.yDiff&&(g=0));const b=this.targetScale,_=this.minScale,w=this.maxScale;b<.5*_&&(f=Math.max(f,_)),b>1.5*w&&(f=Math.min(f,w)),"y"===this.lockedAxis&&t(b)===t(_)&&(m=0),"x"===this.lockedAxis&&t(b)===t(_)&&(g=0),this.applyChange({originX:l,originY:c,panX:m,panY:g,scale:f,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),n(e.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==v.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const i=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of y)this.velocity[e]=0;this.target.e=this.current.e,this.target.f=this.current.f,C(this.container,"is-scaling"),C(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:n}=this,s=n[0],o=n[n.length-1];let a=0,r=0,l=0;o&&s&&(a=o.clientX-s.clientX,r=o.clientY-s.clientY,l=o.time-s.time);const c=(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1;1!==c&&(a*=c,r*=c);let d=0,h=0,u=0,p=0,f=this.option("decelFriction");const m=this.targetScale;if(l>0){u=Math.abs(a)>3?a/(l/30):0,p=Math.abs(r)>3?r/(l/30):0;const e=this.option("maxVelocity");e&&(u=Math.max(Math.min(u,e),-1*e),p=Math.max(Math.min(p,e),-1*e))}u&&(d=u/(1/(1-f)-1)),p&&(h=p/(1/(1-f)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&t(m)===this.minScale)&&(d=u=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&t(m)===this.minScale)&&(h=p=0);const g=this.dragOffset.x,v=this.dragOffset.y,b=this.option("dragMinThreshold")||0;Math.abs(g)<b&&Math.abs(v)<b&&(d=h=0,u=p=0),(m<this.minScale-1e-5||m>this.maxScale+1e-5||i&&!d&&!h)&&(f=.35),this.applyChange({panX:d,panY:h,friction:f}),this.emit("decel",u,p,g,v)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce((function(e,t){return Math.abs(t)>Math.abs(e)?t:e}));const i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===S)return;if(e.defaultPrevented)return;const n=this.option("wheel");"pan"===n?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):"zoom"===n&&!1!==this.option("zoom")&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){"Escape"===e.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:i,content:n,contentRect:s}=this,o=Object.assign({},$);for(const n of y){const s="e"==n||"f"===n?T:1e5;o[n]=t(e[n],s),Math.abs(i[n]-e[n])<("e"==n||"f"===n?.51:.001)&&(e[n]=i[n])}let{a:a,b:r,c:l,d:c,e:d,f:h}=o,u=`matrix(${a}, ${r}, ${l}, ${c}, ${d}, ${h})`,p=-h+"px",f=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;if(h>0){if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===u)return;f.style.transform=u}else{if(this.option("transformParent")&&(f=f.parentElement||f),f.style.borderBottomWidth===p)return;f.style.borderBottomWidth=p}const{contentWidth:m,contentHeight:g}=this.calculateContentDim();s.width=m,s.height=g,this.emit("afterTransform")}updateMetrics(e=!1){var i;if(!this||this.state===v.Destroy)return;if(this.isContentLoading)return;const n=Math.max(1,(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1),{container:s,content:o}=this,a=o instanceof HTMLImageElement,r=s.getBoundingClientRect(),l=getComputedStyle(this.container);let c=r.width*n,d=r.height*n;const h=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),u=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),p=d-h;this.containerRect={width:c,height:d,innerWidth:u,innerHeight:p};let f=this.option("width")||"auto",m=this.option("height")||"auto";"auto"===f&&(f=parseFloat(o.dataset.width||"")||(e=>{let t=0;return t=e instanceof HTMLImageElement?e.naturalWidth:e instanceof SVGElement?e.width.baseVal.value:Math.max(e.offsetWidth,e.scrollWidth),t||0})(o)),"auto"===m&&(m=parseFloat(o.dataset.height||"")||(e=>{let t=0;return t=e instanceof HTMLImageElement?e.naturalHeight:e instanceof SVGElement?e.height.baseVal.value:Math.max(e.offsetHeight,e.scrollHeight),t||0})(o));let g=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;this.option("transformParent")&&(g=g.parentElement||g);const y=g.getAttribute("style")||"";g.style.setProperty("transform","none","important"),a&&(g.style.width="",g.style.height=""),g.offsetHeight;const b=o.getBoundingClientRect();let _=b.width*n,w=b.height*n,x=0,C=0;a&&(Math.abs(f-_)>1||Math.abs(m-w)>1)&&({width:_,height:w,top:x,left:C}=((e,t,i,n)=>{const s=i/n;return s>e/t?(i=e,n=e/s):(i=t*s,n=t),{width:i,height:n,top:.5*(t-n),left:.5*(e-i)}})(_,w,f,m)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:b.top-r.top+x,bottom:r.bottom-b.bottom+x,left:b.left-r.left+C,right:r.right-b.right+C,fitWidth:_,fitHeight:w,width:_,height:w,fullWidth:f,fullHeight:m}),g.style.cssText=y,a&&(g.style.width=`${_}px`,g.style.height=`${w}px`),this.setTransform(),!0!==e&&this.emit("refresh"),this.ignoreBounds||(t(this.targetScale)<t(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===v.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}getBounds(){const e=this.option("bounds");if("auto"!==e)return e;const{contentWidth:i,contentHeight:n}=this.calculateContentDim(this.target);let s=0,o=0,a=0,r=0;const l=this.option("infinite");if(!0===l||this.lockedAxis&&l===this.lockedAxis)s=-1/0,a=1/0,o=-1/0,r=1/0;else{let{containerRect:e,contentRect:l}=this,c=t(this.contentRect.fitWidth*this.targetScale,T),d=t(this.contentRect.fitHeight*this.targetScale,T),{innerWidth:h,innerHeight:u}=e;if(this.containerRect.width===c&&(h=e.width),this.containerRect.width===d&&(u=e.height),i>h){a=.5*(i-h),s=-1*a;let e=.5*(l.right-l.left);s+=e,a+=e}if(this.contentRect.fitWidth>h&&i<h&&(s-=.5*(this.contentRect.fitWidth-h),a-=.5*(this.contentRect.fitWidth-h)),n>u){r=.5*(n-u),o=-1*r;let e=.5*(l.bottom-l.top);o+=e,r+=e}this.contentRect.fitHeight>u&&n<u&&(s-=.5*(this.contentRect.fitHeight-u),a-=.5*(this.contentRect.fitHeight-u))}return{x:{min:s,max:a},y:{min:o,max:r}}}updateControls(){const e=this,i=e.container,{panMode:n,contentRect:s,fullScale:o,targetScale:r,coverScale:l,maxScale:c,minScale:d}=e;let h={toggleMax:r-d<.5*(c-d)?c:d,toggleCover:r-d<.5*(l-d)?l:d,toggleZoom:r-d<.5*(o-d)?o:d}[e.option("click")||""]||d,u=e.canZoomIn(),p=e.canZoomOut(),f=p&&n===M;t(r)<t(d)&&!this.panOnlyZoomed&&(f=!0),(t(s.width,1)>t(s.fitWidth,1)||t(s.height,1)>t(s.fitHeight,1))&&(f=!0),t(s.width*r,1)<t(s.fitWidth,1)&&(f=!1),n===S&&(f=!1);let m=u&&t(h)>t(r),g=!m&&!f&&p&&t(h)<t(r);a(i,this.cn("canZoomIn"),m),a(i,this.cn("canZoomOut"),g),a(i,this.cn("isDraggable"),f);for(const e of i.querySelectorAll('[data-panzoom-action="zoomIn"]'))u?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of i.querySelectorAll('[data-panzoom-action="zoomOut"]'))p?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of i.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){u||p?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));const t=e.querySelector("g");t&&(t.style.display=u?"":"none")}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:s=0,originX:o=0,originY:a=0,flipX:r=!1,flipY:l=!1,ignoreBounds:c=!1}){this.state!==v.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:s,originX:o,originY:a,friction:n,flipX:r,flipY:l,ignoreBounds:c})}applyChange({panX:e=0,panY:i=0,scale:n=1,angle:s=0,originX:o=-this.current.e,originY:a=-this.current.f,friction:r=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:d=!1,bounce:h=this.option("bounce")}){if(this.state===v.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=d;const{current:u}=this,p=u.e,f=u.f,m=this.getMatrix(this.target);let g=(new DOMMatrix).translate(p,f).translate(o,a).translate(e,i);if(this.option("zoom")){if(!d){const e=this.targetScale,t=this.minScale,i=this.maxScale;e*n<t&&(n=t/e),e*n>i&&(n=i/e)}g=g.scale(n)}g=g.translate(-o,-a).translate(-p,-f).multiply(m),s&&(g=g.rotate(s)),l&&(g=g.scale(-1,1)),c&&(g=g.scale(1,-1));for(const e of y)"e"!==e&&"f"!==e&&(g[e]>this.minScale+1e-5||g[e]<this.minScale-1e-5)?this.target[e]=g[e]:this.target[e]=t(g[e],T);(this.targetScale<this.scale||Math.abs(n-1)>.1||this.panMode===S||!1===h)&&!d&&this.clampTargetBounds(),this.isResting||(this.state=v.Panning,this.requestTick())}stop(e=!1){if(this.state===v.Init||this.state===v.Destroy)return;const t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of y)this.velocity[t]=0,"current"===e?this.current[t]=this.target[t]:"target"===e&&(this.target[t]=this.current[t]);this.setTransform(),C(this.container,"is-scaling"),C(this.container,"is-animating"),this.isTicking=!1,this.state=v.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),k(this.container,"is-animating"),this.isScaling&&k(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame((()=>this.animate())))}panWithMouse(e,i=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==S||!e)return;if(t(this.targetScale)<=t(this.minScale))return;this.emit("mouseMove",e);const{container:n,containerRect:s,contentRect:o}=this,a=s.width,r=s.height,l=n.getBoundingClientRect(),c=(e.clientX||0)-l.left,d=(e.clientY||0)-l.top;let{contentWidth:h,contentHeight:u}=this.calculateContentDim(this.target);const p=this.option("mouseMoveFactor");p>1&&(h!==a&&(h*=p),u!==r&&(u*=p));let f=.5*(h-a)-c/a*100/100*(h-a);f+=.5*(o.right-o.left);let m=.5*(u-r)-d/r*100/100*(u-r);m+=.5*(o.bottom-o.top),this.applyChange({panX:f-this.target.e,panY:m-this.target.f,friction:i})}zoomWithWheel(e){if(this.state===v.Destroy||this.state===v.Init)return;const i=Date.now();if(i-this.pwt<45)return void e.preventDefault();this.pwt=i;var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce((function(e,t){return Math.abs(t)>Math.abs(e)?t:e}));const s=Math.max(-1,Math.min(1,n)),{targetScale:o,maxScale:a,minScale:r}=this;let l=o*(100+45*s)/100;t(l)<t(r)&&t(o)<=t(r)?(this.cwd+=Math.abs(s),l=r):t(l)>t(a)&&t(o)>=t(a)?(this.cwd+=Math.abs(s),l=a):(this.cwd=0,l=Math.max(Math.min(l,a),r)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),t(l)!==t(o)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(t(this.contentRect.width,1)<t(this.contentRect.fitWidth,1)||t(this.targetScale)<t(this.maxScale))}canZoomOut(){return this.option("zoom")&&t(this.targetScale)>t(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.fullScale-this.minScale)?"full":"fit",e)}toggleMax(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.maxScale-this.minScale)?"max":"fit",e)}toggleCover(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.coverScale-this.minScale)?"cover":"fit",e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t="auto",originX:i=0,originY:n=0,event:s}={}){if(this.isContentLoading||this.state===v.Destroy)return;const{targetScale:o}=this;this.stop();let a=1;if(this.panMode===S&&(s=this.pmme||s),s){const e=this.content.getBoundingClientRect(),t=s.clientX||0,o=s.clientY||0;i=t-e.left-.5*e.width,n=o-e.top-.5*e.height}const r=this.fullScale,l=this.maxScale;let c=this.coverScale;"number"==typeof e?a=e/o:("next"===e&&(r-c<.2&&(c=r),e=o<r-1e-5?"full":o<l-1e-5?"max":"fit"),a="full"===e?r/o||1:"cover"===e?c/o||1:"max"===e?l/o||1:1/o||1),t="auto"===t?a>1?.15:.25:t,this.applyChange({scale:a,originX:i,originY:n,friction:t}),s&&this.panMode===S&&this.panWithMouse(s,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);const n=e.classList.contains(t);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:t,b:i,c:n,d:s,e:o,f:a}=e;return new DOMMatrix([t,i,n,s,o,a])}reset(e){if(this.state!==v.Init&&this.state!==v.Destroy){this.stop("current");for(const e of y)this.target[e]=$[e];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===e?this.option("friction"):e,this.state=v.Panning,this.requestTick())}}destroy(){this.stop(),this.state=v.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:t}=this,i=this.option("classes")||{};for(const t of Object.values(i))e.classList.remove(t+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(j,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:_}),Object.defineProperty(j,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const O=function(e,t){let i=!0;return(...n)=>{i&&(i=!1,e(...n),setTimeout((()=>{i=!0}),t))}},A=(e,t)=>{let i=[];return e.childNodes.forEach((e=>{e.nodeType!==Node.ELEMENT_NODE||t&&!e.matches(t)||i.push(e)})),i};var L;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Destroy=2]="Destroy"}(L||(L={}));const I=e=>{if("string"==typeof e&&(e={html:e}),!(e instanceof String||e instanceof HTMLElement)){const t=e.thumb;void 0!==t&&("string"==typeof t&&(e.thumbSrc=t),t instanceof HTMLImageElement&&(e.thumbEl=t,e.thumbElSrc=t.src,e.thumbSrc=t.src),delete e.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",index:-1,dim:0,gap:0,pos:0,transition:!1},e)},H=(e={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},e);class R extends m{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}class F extends R{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;return e||(e=document.createElement("ul"),k(e,this.cn("list")),e.setAttribute("role","tablist"),this.instance.container.appendChild(e),k(this.instance.container,this.cn("hasDots")),this.list=e),e}refresh(){var e;const t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),s=this.option("dynamicFrom");if(t<i||t>n)return void this.cleanup();const o="number"==typeof s&&t>5&&t>=s,r=!this.list||this.isDynamic!==o||this.list.children.length!==t;r&&this.cleanup();const l=this.build();if(a(l,this.cn("isDynamic"),!!o),r)for(let e=0;e<t;e++)l.append(this.createItem(e));let c,d=0;for(const t of[...l.children]){const i=d===this.instance.page;i&&(c=t),a(t,this.cn("isCurrent"),i),null===(e=t.children[0])||void 0===e||e.setAttribute("aria-selected",i?"true":"false");for(const e of["isBeforePrev","isPrev","isNext","isAfterNext"])C(t,this.cn(e));d++}if(c=c||l.firstChild,o&&c){const e=c.previousElementSibling,t=e&&e.previousElementSibling;k(e,this.cn("isPrev")),k(t,this.cn("isBeforePrev"));const i=c.nextElementSibling,n=i&&i.nextElementSibling;k(i,this.cn("isNext")),k(n,this.cn("isAfterNext"))}this.isDynamic=o}createItem(e=0){var t;const i=document.createElement("li");i.setAttribute("role","presentation");const n=s(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(n),null===(t=i.children[0])||void 0===t||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,C(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(F,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});const z="disabled",N="next",B="prev";class q extends R{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){const e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let n=this.prev,s=this.next;n&&s&&(n.removeAttribute(z),s.removeAttribute(z),e.isInfinite||(i<=0&&n.setAttribute(z,""),i>=t-1&&s.setAttribute(z,"")))}createButton(e){const t=this.instance,i=document.createElement("button");i.setAttribute("tabindex","0"),i.setAttribute("title",t.localize(`{{${e.toUpperCase()}}}`)),k(i,this.cn("button")+" "+this.cn(e===N?"isNext":"isPrev"));const n=t.isRTL?e===N?B:N:e;var s;return i.innerHTML=t.localize(this.option(`${n}Tpl`)),i.dataset[`carousel ${s=e,s?s.match("^[a-z]")?s.charAt(0).toUpperCase()+s.substring(1):s:""}`]="true",i}build(){let e=this.container;e||(this.container=e=document.createElement("div"),k(e,this.cn("container")),this.instance.container.appendChild(e)),this.next||(this.next=e.appendChild(this.createButton(N))),this.prev||(this.prev=e.appendChild(this.createButton(B)))}cleanup(){this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove(),this.prev=null,this.next=null,this.container=null}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(q,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class W extends R{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){this.nav&&this.target&&(this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.state===L.Ready&&this.onNavReady(this.nav),this.target.on("ready",this.onTargetReady),this.target.state===L.Ready&&this.onTargetReady(this.target))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){i.pointerType||this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var n,s;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;const o=i.target,{nav:a,target:r}=this;if(!a||!r||!o)return;const l=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!l)return;const c=parseInt(l.dataset.index||"",10)||0,d=r.getPageForSlide(c),h=a.getPageForSlide(c);a.slideTo(h),r.slideTo(d,{friction:(null===(s=null===(n=this.nav)||void 0===n?void 0:n.plugins)||void 0===s?void 0:s.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){const{target:e,nav:t}=this;if(!e||!t)return;if(t.state!==L.Ready||e.state!==L.Ready)return;const i=e.pages[e.page].slides[0].index,n=t.getPageForSlide(i);this.markSelectedSlide(i),t.slideTo(n)}markSelectedSlide(e){const t=this.nav;t&&t.state===L.Ready&&(this.selectedIndex=e,[...t.slides].map((t=>{t.el&&t.el.classList[t.index===e?"add":"remove"]("is-nav-selected")})))}attach(){const e=this;let t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){const e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(W,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const V={Navigation:q,Dots:F,Sync:W};class U extends g{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===L.Ready}get isInfinite(){let e=!1;const{contentDim:t,viewportDim:i,pages:n,slides:s}=this;return n.length>=2&&t+s[0].dim>=i&&(e=this.option("infinite")),e}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:L.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof e&&(e=document.querySelector(e)),!e||!x(e))throw new Error("No Element found");this.container=e,this.slideNext=O(this.slideNext.bind(this),150),this.slidePrev=O(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask((()=>{this.processOptions()}))}processOptions(){const e=p({},U.defaults,this.userOptions);let t="";const i=e.breakpoints;if(i&&u(i))for(const[n,s]of Object.entries(i))window.matchMedia(n).matches&&u(s)&&(t+=n,p(e,s));t===this.bp&&this.state!==L.Init||(this.bp=t,this.state===L.Ready&&(e.initialSlide=this.pages[this.page].slides[0].index),this.state!==L.Init&&this.destroy(),super.setOptions(e),!1===this.option("enabled")?this.attachEvents():setTimeout((()=>{this.init()}),0))}init(){this.state=L.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},U.Plugins),this.userPlugins)),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=L.Ready,this.emit("ready")}initLayout(){const{container:e}=this,t=this.option("classes");k(e,this.cn("container")),a(e,t.isLTR,!this.isRTL),a(e,t.isRTL,this.isRTL),a(e,t.isVertical,!this.isHorizontal),a(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),k(i,t.viewport),i.append(...A(e,`.${t.slide}`)),e.prepend(i));let n=this.option("track")||e.querySelector(`.${t.track}`);n||(n=document.createElement("div"),k(n,t.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){const{track:e}=this;if(e){this.slides=[],[...A(e,`.${this.cn("slide")}`)].forEach((e=>{if(x(e)){const t=I({el:e,isDom:!0,index:this.slides.length});this.slides.push(t),this.emit("initSlide",t,this.slides.length)}}));for(let e of this.option("slides",[])){const t=I(e);t.index=this.slides.length,this.slides.push(t),this.emit("initSlide",t,this.slides.length)}this.emit("initSlides")}}setInitialPage(){let e=0;const t=this.option("initialSlide");e="number"==typeof t?this.getPageForSlide(t):parseInt(this.option("initialPage",0)+"",10)||0,this.page=e}setInitialPosition(){if(!this.track||!this.pages.length)return;const e=this.isHorizontal;let t=this.page;this.pages[t]||(this.page=t=0);const i=this.pages[t].pos*(this.isRTL&&e?1:-1),n=e?`${i}px`:"0",s=e?"0":`${i}px`;this.track.style.transform=`translate3d(${n}, ${s}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new j(this.viewport,p({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:e=>!(this.pages.length<2&&!e.options.infinite),bounds:()=>this.getBounds(),maxVelocity:e=>Math.abs(e.target[this.axis]-e.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",((e,t,...i)=>{this.emit(`Panzoom.${t}`,e,...i)})),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:t,viewportDim:i}=this;let n=this.option("slidesPerPage");("number"!=typeof n||t<=i)&&(n=1/0);let s=0,o=0,a=0;for(const t of this.slides)(!e.length||o+t.dim>i||a===n)&&(e.push(H()),s=e.length-1,o=0,a=0),e[s].slides.push(t),o+=t.dim+t.gap,a++;return e}processPages(){const e=this.pages,{contentDim:i,viewportDim:n}=this,s=this.option("center"),o=this.option("fill"),a=o&&s&&i>n&&!this.isInfinite;if(e.forEach(((e,t)=>{e.index=t,e.pos=e.slides[0].pos,e.dim=0;for(const[t,i]of e.slides.entries())e.dim+=i.dim,t<e.slides.length-1&&(e.dim+=i.gap);a&&e.pos+.5*e.dim<.5*n?e.pos=0:a&&e.pos+.5*e.dim>=i-.5*n?e.pos=i-n:s&&(e.pos+=-.5*(n-e.dim))})),e.forEach(((e,s)=>{o&&!this.isInfinite&&i>n&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,i-n)),e.pos=t(e.pos,1e3),e.dim=t(e.dim,1e3),e.pos<.1&&e.pos>-.1&&(e.pos=0)})),this.isInfinite)return e;const r=[];let l;return e.forEach((e=>{const t=Object.assign({},e);l&&t.pos===l.pos?(l.dim+=t.dim,l.slides=[...l.slides,...t.slides]):(t.index=r.length,l=t,r.push(t))})),r}getPageFromIndex(e=0){const t=this.pages.length;let i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var i;const n=this.isHorizontal?"width":"height";let s=0,o=0,a=e.el;if(a?s=parseFloat(a.dataset[n]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",k(a,this.cn("slide")+" "+e.class),(this.track||document.body).prepend(a)),s)a.style[n]=`${s}px`,a.style["width"===n?"height":"width"]="";else{const e=Math.max(1,(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1);s=a.getBoundingClientRect()[n]*e}const r=getComputedStyle(a);return"content-box"===r.boxSizing&&(this.isHorizontal?(s+=parseFloat(r.paddingLeft)||0,s+=parseFloat(r.paddingRight)||0):(s+=parseFloat(r.paddingTop)||0,s+=parseFloat(r.paddingBottom)||0)),o=parseFloat(r[this.isHorizontal?"marginRight":"marginBottom"])||0,e.el||a.remove(),{dim:t(s,1e3),gap:t(o,1e3)}}getBounds(){const{isInfinite:e,isRTL:t,isHorizontal:i,pages:n}=this;let s={min:0,max:0};if(e)s={min:-1/0,max:1/0};else if(n.length){const e=n[0].pos,o=n[n.length-1].pos;s=t&&i?{min:e,max:o}:{min:-1*o,max:-1*e}}return{x:i?s:{min:0,max:0},y:i?{min:0,max:0}:s}}repositionSlides(){let e,{isHorizontal:i,isRTL:n,isInfinite:s,viewport:o,viewportDim:a,contentDim:r,page:l,pages:c,slides:d,panzoom:h}=this,u=0,p=0,f=0,m=0;h?m=-1*h.current[this.axis]:c[l]&&(m=c[l].pos||0),e=i?n?"right":"left":"top",n&&i&&(m*=-1);for(const i of d)i.el?("top"===e?(i.el.style.right="",i.el.style.left=""):i.el.style.top="",i.index!==u?i.el.style[e]=0===p?"":`${t(p,1e3)}px`:i.el.style[e]="",f+=i.dim+i.gap,u++):p+=i.dim+i.gap;if(s&&f&&o){let n=getComputedStyle(o),s="padding",l=i?"Right":"Bottom",c=parseFloat(n[s+(i?"Left":"Top")]);m-=c,a+=c,a+=parseFloat(n[s+l]);for(const i of d)i.el&&(t(i.pos)<t(a)&&t(i.pos+i.dim+i.gap)<t(m)&&t(m)>t(r-a)&&(i.el.style[e]=`${t(p+f,1e3)}px`),t(i.pos+i.gap)>=t(r-a)&&t(i.pos)>t(m+a)&&t(m)<t(a)&&(i.el.style[e]=`-${t(f,1e3)}px`))}let g,v,y=[...this.inTransition];if(y.length>1&&(g=c[y[0]],v=c[y[1]]),g&&v){let i=0;for(const n of d)n.el?this.inTransition.has(n.index)&&g.slides.indexOf(n)<0&&(n.el.style[e]=`${t(i+(g.pos-v.pos),1e3)}px`):i+=n.dim+n.gap}}createSlideEl(e){const{track:t,slides:i}=this;if(!t||!e)return;if(e.el)return;const n=document.createElement("div");k(n,this.cn("slide")),k(n,e.class),k(n,e.customClass),e.html&&(n.innerHTML=e.html);const s=[];i.forEach(((e,t)=>{e.el&&s.push(t)}));const o=e.index;let a=null;s.length&&(a=i[s.reduce(((e,t)=>Math.abs(t-o)<Math.abs(e-o)?t:e))]);const r=a&&a.el?a.index<e.index?a.el.nextSibling:a.el:null;t.insertBefore(n,t.contains(r)?r:null),e.el=n,this.emit("createSlide",e)}removeSlideEl(e,t=!1){const i=e.el;if(!i)return;if(C(i,this.cn("isSelected")),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),C(i,this.cn("isSelected")),void(i.style.left="");this.emit("removeSlide",e);const n=new CustomEvent("animationend");i.dispatchEvent(n),e.el&&e.el.remove(),e.el=null}transitionTo(e=0,i=this.option("transition")){if(!i)return!1;const{pages:n,panzoom:s}=this;e=parseInt((e||0).toString())||0;const o=this.getPageFromIndex(e);if(!s||!n[o]||n.length<2||Math.abs(n[this.page].slides[0].dim-this.viewportDim)>1)return!1;const a=e>this.page?1:-1,r=this.pages[o].pos*(this.isRTL?1:-1);if(this.page===o&&t(r,1e3)===t(s.target[this.axis],1e3))return!1;this.clearTransitions();const l=s.isResting;k(this.container,this.cn("inTransition"));const c=this.pages[this.page].slides[0],d=this.pages[o].slides[0];this.inTransition.add(d.index),this.createSlideEl(d);let h=c.el,u=d.el;l||"slide"===i||(i="fadeFast",h=null);const p=this.isRTL?"next":"prev",f=this.isRTL?"prev":"next";return h&&(this.inTransition.add(c.index),c.transition=i,h.addEventListener("animationend",this.onAnimationEnd),h.classList.add(`f-${i}Out`,`to-${a>0?f:p}`)),u&&(d.transition=i,u.addEventListener("animationend",this.onAnimationEnd),u.classList.add(`f-${i}In`,`from-${a>0?p:f}`)),s.panTo({x:this.isHorizontal?r:0,y:this.isHorizontal?0:r,friction:0}),this.onChange(o),!0}manageSlideVisiblity(){const e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const n of this.slides)i.has(n)?e.add(n):t.add(n);for(const t of this.inTransition)e.add(this.slides[t]);for(const t of e)this.createSlideEl(t),this.lazyLoadSlide(t);for(const i of t)e.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let t=this.cn("isSelected");if(t)for(const i of this.slides)i.el&&(i.el.dataset.index=`${i.index}`,this.pages[this.page].slides.includes(i)?(i.el.classList.contains(t)||(k(i.el,t),this.emit("selectSlide",i)),i.el.removeAttribute(e)):(i.el.classList.contains(t)&&(C(i.el,t),this.emit("unselectSlide",i)),i.el.setAttribute(e,"true")))}flipInfiniteTrack(){const e=this.panzoom;if(!e||!this.isInfinite)return;const t="x"===this.option("axis")?"e":"f",{viewportDim:i,contentDim:n}=this;let s=e.current[t],o=e.target[t]-s,a=0,r=.5*i,l=n;this.isRTL&&this.isHorizontal?(s<-r&&(a=-1,s+=l),s>l-r&&(a=1,s-=l)):(s>r&&(a=1,s-=l),s<-l+r&&(a=-1,s+=l)),a&&(e.current[t]=s,e.target[t]=s+o)}lazyLoadSlide(e){const t=this,i=e&&e.el;if(!i)return;const n=new Set,o="f-fadeIn";i.querySelectorAll("[data-lazy-srcset]").forEach((e=>{e instanceof HTMLImageElement&&n.add(e)}));let a=Array.from(i.querySelectorAll("[data-lazy-src]"));i.dataset.lazySrc&&a.push(i),a.map((e=>{e instanceof HTMLImageElement?n.add(e):x(e)&&(e.style.backgroundImage=`url('${e.dataset.lazySrc||""}')`,delete e.dataset.lazySrc)}));const r=(e,i,n)=>{n&&(n.remove(),n=null),i.complete&&(i.classList.add(o),setTimeout((()=>{i.classList.remove(o)}),350),i.style.display=""),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(t.updateMetrics(),t.setViewportHeight()),this.emit("load",e)};for(const t of n){let i=null;t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.style.display="none",t.addEventListener("error",(()=>{r(e,t,i)})),t.addEventListener("load",(()=>{r(e,t,i)})),setTimeout((()=>{t.parentNode&&e.el&&(t.complete?r(e,t,i):(i=s(w),t.parentNode.insertBefore(i,t)))}),300)}}onAnimationEnd(e){var t;const i=e.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,s=this.slides[n],o=e.animationName;if(!i||!s||!o)return;const a=!!this.inTransition.has(n)&&s.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(null===(t=this.panzoom)||void 0===t?void 0:t.isResting)&&this.emit("settle")}onDecel(e,t=0,i=0,n=0,s=0){const{isRTL:o,isHorizontal:a,axis:r,pages:l}=this,c=l.length,d=Math.abs(Math.atan2(i,t)/(Math.PI/180));let h=0;if(h=d>45&&d<135?a?0:i:a?t:0,!c)return;const u=this.option("dragFree");let p=this.page,f=o&&a?1:-1;const m=e.target[r]*f,g=e.current[r]*f;let{pageIndex:v}=this.getPageFromPosition(m),{pageIndex:y}=this.getPageFromPosition(g);u?this.onChange(v):(Math.abs(h)>5?(l[p].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(p=y),p=o&&a?h<0?p-1:p+1:h<0?p+1:p-1):p=0===n&&0===s?p:y,this.slideTo(p,{transition:!1,friction:e.option("decelFriction")}))}onClick(e){const t=e.target,i=t&&x(t)?t.dataset:null;let n,s;i&&(void 0!==i.carouselPage?(s="slideTo",n=i.carouselPage):void 0!==i.carouselNext?s="slideNext":void 0!==i.carouselPrev&&(s="slidePrev")),s?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[s](n)):this.emit("click",e)}onSlideTo(e){const t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){const i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=L.Init,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===L.Destroy)return;const{axis:n,isHorizontal:s,isRTL:o,pages:a,panzoom:r}=this,l=a.length,c=o&&s?1:-1;if(!r||!l)return;if(this.transitionTo(e,i))return;const d=this.getPageFromIndex(e);let h=a[d].pos;if(this.isInfinite){const t=this.contentDim,i=r.target[n]*c;if(2===l)h+=t*Math.floor(parseFloat(e+"")/2);else{const e=i;h=[h,h-t,h+t].reduce((function(t,i){return Math.abs(i-e)<Math.abs(t-e)?i:t}))}}h*=c,Math.abs(r.target[n]-h)<.1||(r.panTo({x:s?h:0,y:s?0:h,friction:t}),this.onChange(d))}slideToClosest(e){if(this.panzoom){const{pageIndex:t}=this.getPageFromPosition(this.panzoom.current[this.isHorizontal?"e":"f"]);this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),C(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const t of this.slides){const i=t.el;if(i){i.removeEventListener("animationend",this.onAnimationEnd),i.classList.remove(...e);const n=t.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}prependSlide(e){var t,i;let n=Array.isArray(e)?e:[e];for(const e of n.reverse())this.slides.unshift(I(e));for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;const s=(null===(t=this.pages[this.page])||void 0===t?void 0:t.pos)||0;this.page+=n.length,this.updateMetrics();const o=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0;if(this.panzoom){const e=this.isRTL?s-o:o-s;this.panzoom.target.e-=e,this.panzoom.current.e-=e,this.panzoom.requestTick()}}appendSlide(e){let t=Array.isArray(e)?e:[e];for(const e of t){const t=I(e);t.index=this.slides.length,this.slides.push(t),this.emit("initSlide",e,this.slides.length)}this.updateMetrics()}removeSlide(e){const t=this.slides.length;e=(e%t+t)%t,this.removeSlideEl(this.slides[e],!0),this.slides.splice(e,1);for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1})}updateMetrics(){const{panzoom:e,viewport:i,track:n,isHorizontal:s}=this;if(!n)return;const o=s?"width":"height",a=s?"offsetWidth":"offsetHeight";if(i){let e=Math.max(i[a],t(i.getBoundingClientRect()[o],1e3)),n=getComputedStyle(i),r="padding",l=s?"Right":"Bottom";e-=parseFloat(n[r+(s?"Left":"Top")])+parseFloat(n[r+l]),this.viewportDim=e}let r,l=this.pages.length,c=0;for(const[e,i]of this.slides.entries()){let n=0,s=0;!i.el&&r?(n=r.dim,s=r.gap):(({dim:n,gap:s}=this.getSlideMetrics(i)),r=i),n=t(n,1e3),s=t(s,1e3),i.dim=n,i.gap=s,i.pos=c,c+=n,(this.isInfinite||e<this.slides.length-1)&&(c+=s)}const d=this.contentDim;c=t(c,1e3),this.contentDim=c,e&&(e.contentRect[o]=c,e.contentRect["e"===this.axis?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===L.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),e&&l===this.pages.length&&Math.abs(c-d)>.5&&(e.target[this.axis]=-1*this.pages[this.page].pos,e.current[this.axis]=-1*this.pages[this.page].pos,e.stop()),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,i=!1){void 0===e&&(e=this.page);const n=this,s=n.panzoom,o=n.pages[e]||0;if(!o||!s)return 0;let a=-1*s.current.e,r=n.contentDim;var l=[t((a-o.pos)/(1*o.dim),1e3),t((a+r-o.pos)/(1*o.dim),1e3),t((a-r-o.pos)/(1*o.dim),1e3)].reduce((function(e,t){return Math.abs(t)<Math.abs(e)?t:e}));return i?l:Math.max(-1,Math.min(1,l))}setViewportHeight(){const{page:e,pages:t,viewport:i,isHorizontal:n}=this;if(!i||!t[e])return;let s=0;n&&this.track&&(this.track.style.height="auto",t[e].slides.forEach((e=>{e.el&&(s=Math.max(s,e.el.offsetHeight))}))),i.style.height=s?`${s}px`:""}getPageForSlide(e){for(const t of this.pages)for(const i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;const i=new Set;let{contentDim:n,viewportDim:s,pages:o,page:a}=this;n=n+(null===(t=this.slides[this.slides.length-1])||void 0===t?void 0:t.gap)||0;let r=0;r=this.panzoom?-1*this.panzoom.current[this.axis]:o[a]&&o[a].pos||0,this.isInfinite&&(r-=Math.floor(r/n)*n),this.isRTL&&this.isHorizontal&&(r*=-1);const l=r-s*e,c=r+s*(e+1),d=this.isInfinite?[-1,0,1]:[0];for(const e of this.slides)for(const t of d){const s=e.pos+t*n,o=e.pos+e.dim+e.gap+t*n;s<c&&o>l&&i.add(e)}return i}getPageFromPosition(e){const{viewportDim:t,contentDim:i}=this,n=this.pages.length,s=this.slides.length,o=this.slides[s-1];let a=0,r=0,l=0;const c=this.option("center");c&&(e+=.5*t),this.isInfinite||(e=Math.max(this.slides[0].pos,Math.min(e,o.pos)));const d=i+o.gap;l=Math.floor(e/d)||0,e-=l*d;let h=o,u=this.slides.find((t=>{const i=e+(h&&!c?.5*h.dim:0);return h=t,t.pos<=i&&t.pos+t.dim+t.gap>i}));return u||(u=o),r=this.getPageForSlide(u.index),a=r+l*n,{page:a,pageIndex:r}}destroy(){if([L.Destroy].includes(this.state))return;this.state=L.Destroy;const{container:e,viewport:t,track:i,slides:n,panzoom:s}=this,o=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),s&&(s.destroy(),this.panzoom=null),n&&n.forEach((e=>{this.removeSlideEl(e)})),this.detachPlugins(),t&&t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes);for(const[t,i]of Object.entries(o))"container"!==t&&i&&e.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(U,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:j}),Object.defineProperty(U,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(U,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:V});const Q=function(e){const t=window.pageYOffset,i=window.pageYOffset+window.innerHeight;if(!x(e))return 0;const n=e.getBoundingClientRect(),s=n.y+window.pageYOffset,o=n.y+n.height+window.pageYOffset;if(t>o||i<s)return 0;if(t<s&&i>o)return 100;if(s<t&&o>i)return 100;let a=n.height;s<t&&(a-=window.pageYOffset-s),o>i&&(a-=o-i);const r=a/window.innerHeight*100;return Math.round(r)},Y=!("undefined"==typeof window||!window.document||!window.document.createElement);let X;const G=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),K=e=>{if(e&&Y){void 0===X&&document.createElement("div").focus({get preventScroll(){return X=!0,!1}});try{if(X)e.focus({preventScroll:!0});else{const t=window.pageXOffset||document.body.scrollTop,i=window.pageYOffset||document.body.scrollLeft;e.focus(),document.body.scrollTo({top:t,left:i,behavior:"auto"})}}catch(e){}}},Z={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},b),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,wheel:"zoom"};var J,ee;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Closing=2]="Closing",e[e.CustomClosing=3]="CustomClosing",e[e.Destroy=4]="Destroy"}(J||(J={})),function(e){e[e.Loading=0]="Loading",e[e.Opening=1]="Opening",e[e.Ready=2]="Ready",e[e.Closing=3]="Closing"}(ee||(ee={}));const te=()=>{queueMicrotask((()=>{(()=>{const{slug:e,index:t}=ie.parseURL(),i=Ae.getInstance();if(i&&!1!==i.option("Hash")){const n=i.carousel;if(e&&n){for(let t of n.slides)if(t.slug&&t.slug===e)return n.slideTo(t.index);if(e===i.option("slug"))return n.slideTo(t-1);const s=i.getSlide(),o=s&&s.triggerEl&&s.triggerEl.dataset;if(o&&o.fancybox===e)return n.slideTo(t-1)}ie.hasSilentClose=!0,i.close()}ie.startFromUrl()})()}))};class ie extends R{constructor(){super(...arguments),Object.defineProperty(this,"origHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null})}onChange(){const e=this.instance,t=e.carousel;this.timer&&clearTimeout(this.timer);const i=e.getSlide();if(!t||!i)return;const n=e.isOpeningSlide(i),s=new URL(document.URL).hash;let o,a=i.slug||void 0,r=i.triggerEl||void 0;o=a||this.instance.option("slug"),!o&&r&&r.dataset&&(o=r.dataset.fancybox);let l="";o&&"true"!==o&&(l="#"+o+(!a&&t.slides.length>1?"-"+(i.index+1):"")),n&&(this.origHash=s!==l?s:""),l&&s!==l&&(this.timer=setTimeout((()=>{try{e.state===J.Ready&&window.history[n?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+l)}catch(e){}}),300))}onClose(){if(this.timer&&clearTimeout(this.timer),!0!==ie.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(e){}}attach(){const e=this.instance;e.on("Carousel.ready",this.onChange),e.on("Carousel.change",this.onChange),e.on("close",this.onClose)}detach(){const e=this.instance;e.off("Carousel.ready",this.onChange),e.off("Carousel.change",this.onChange),e.off("close",this.onClose)}static parseURL(){const e=window.location.hash.slice(1),t=e.split("-"),i=t[t.length-1],n=i&&/^\+?\d+$/.test(i)&&parseInt(t.pop()||"1",10)||1;return{hash:e,slug:t.join("-"),index:n}}static startFromUrl(){if(ie.hasSilentClose=!1,Ae.getInstance()||!1===Ae.defaults.Hash)return;const{hash:e,slug:t,index:i}=ie.parseURL();if(!t)return;let n=document.querySelector(`[data-slug="${e}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Ae.getInstance())return;const s=document.querySelectorAll(`[data-fancybox="${t}"]`);s.length&&(n=s[i-1],n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}static destroy(){window.removeEventListener("hashchange",te,!1)}}function ne(){window.addEventListener("hashchange",te,!1),setTimeout((()=>{ie.startFromUrl()}),500)}Object.defineProperty(ie,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(ie,"hasSilentClose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Y&&(/complete|interactive|loaded/.test(document.readyState)?ne():document.addEventListener("DOMContentLoaded",ne));class se extends R{onCreateSlide(e,t,i){const n=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof n&&this.setImage(i,n)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,n){for(const e of t.slides){const t=e.panzoom;t&&e.index!==i&&t.reset(.35)}}onClose(){var e;const t=this.instance,i=t.container,n=t.getSlide();if(!i||!i.parentElement||!n)return;const{el:s,contentEl:o,panzoom:a}=n,r=n.thumbElSrc;if(!s||!r||!o||!a||a.isContentLoading||a.state===v.Init||a.state===v.Destroy)return;a.updateMetrics();let l=this.getZoomInfo(n);if(!l)return;this.instance.state=J.CustomClosing,i.classList.remove("is-zooming-in"),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${r}')`;const c=i.getBoundingClientRect();1===((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1)&&Object.assign(i.style,{position:"absolute",top:`${window.pageYOffset}px`,left:`${window.pageXOffset}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:d,y:h,scale:u,opacity:p}=l;if(p){const e=((e,t,i,n)=>{const s=t-e;return t=>1+((t-e)/s*-1||0)})(a.scale,u);a.on("afterTransform",(()=>{o.style.opacity=e(a.scale)+""}))}a.on("endAnimation",(()=>{t.destroy()})),a.target.a=u,a.target.b=0,a.target.c=0,a.target.d=u,a.panTo({x:d,y:h,scale:u,friction:p?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){const i=this.instance;e.src=t,this.process(e,t).then((t=>{var n;const s=e.contentEl,o=e.imageEl,a=e.thumbElSrc;if(i.isClosing()||!s||!o)return;s.offsetHeight;const r=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")){null===(n=e.el)||void 0===n||n.addEventListener("contextmenu",(e=>{e.preventDefault()}));const t=document.createElement("div");k(t,"fancybox-protected"),s.appendChild(t)}if(a&&r){const n=t.contentRect,o=Math.max(n.fullWidth,n.fullHeight);let c=null;!r.opacity&&o>1200&&(c=document.createElement("img"),k(c,"fancybox-ghost"),c.src=a,s.appendChild(c));const d=()=>{c&&(k(c,"f-fadeFastOut"),setTimeout((()=>{c&&(c.remove(),c=null)}),200))};(l=a,new Promise(((e,t)=>{const i=new Image;i.onload=e,i.onerror=t,i.src=l}))).then((()=>{e.state=ee.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then((()=>{d(),this.instance.done(e)}),(()=>{i.hideLoading(e)})),c&&setTimeout((()=>{d()}),o>2500?800:200)}),(()=>{i.hideLoading(e),i.revealContent(e)}))}else{const n=this.optionFor(e,"initialSize"),s=this.optionFor(e,"zoom"),o={event:i.prevMouseMoveEvent||i.options.event,friction:s?.12:0};let a=i.optionFor(e,"showClass")||void 0,r=!0;i.isOpeningSlide(e)&&("full"===n?t.zoomToFull(o):"cover"===n?t.zoomToCover(o):"max"===n?t.zoomToMax(o):r=!1,t.stop("current")),r&&a&&(a=t.isDragging?"f-fadeIn":""),i.revealContent(e,a)}var l}),(()=>{i.setError(e,"{{IMAGE_ERROR}}")}))}process(e,t){return new Promise(((i,n)=>{var o,a;const r=this.instance,l=e.el;r.clearContent(e),r.showLoading(e);let c=this.optionFor(e,"content");"string"==typeof c&&(c=s(c)),c&&x(c)||(c=document.createElement("img"),c instanceof HTMLImageElement&&(c.src=t||"",c.alt=(null===(o=e.caption)||void 0===o?void 0:o.replace(/<[^>]+>/gi,"").substring(0,1e3))||`Image ${e.index+1} of ${null===(a=r.carousel)||void 0===a?void 0:a.pages.length}`,c.draggable=!1,e.srcset&&c.setAttribute("srcset",e.srcset)),e.sizes&&c.setAttribute("sizes",e.sizes)),c.classList.add("fancybox-image"),e.imageEl=c,r.setContent(e,c,!1),e.panzoom=new j(l,p({},this.option("Panzoom")||{},{content:c,width:r.optionFor(e,"width","auto"),height:r.optionFor(e,"height","auto"),wheel:()=>{const e=r.option("wheel");return("zoom"===e||"pan"==e)&&e},click:(t,i)=>{var n,s;if(r.isCompact||r.isClosing())return!1;if(e.index!==(null===(n=r.getSlide())||void 0===n?void 0:n.index))return!1;let o=!i||i.target&&(null===(s=e.contentEl)||void 0===s?void 0:s.contains(i.target));return r.option(o?"contentClick":"backdropClick")||!1},dblClick:()=>r.isCompact?"toggleZoom":r.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,transformParent:!0,on:{ready:e=>{i(e)},error:()=>{n()},destroy:()=>{n()}}}))}))}zoomIn(e){return new Promise(((t,i)=>{const n=this.instance,s=n.container,{panzoom:o,contentEl:a,el:r}=e;o&&o.updateMetrics();const l=this.getZoomInfo(e);if(!(l&&r&&a&&o&&s))return void i();const{x:c,y:d,scale:h,opacity:u}=l,p=()=>{e.state!==ee.Closing&&(u&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-h)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&t(o))},f=e=>{C(s,"is-zooming-in"),e.scale<.99||e.scale>1.01||(a.style.opacity="",e.off("endAnimation",f),e.off("touchStart",f),e.off("afterTransform",p),t(e))};o.on("endAnimation",f),o.on("touchStart",f),o.on("afterTransform",p),o.on(["error","destroy"],(()=>{i()})),o.panTo({x:c,y:d,scale:h,friction:0,ignoreBounds:!0}),o.stop("current");const m={event:"mousemove"===o.panMode?n.prevMouseMoveEvent||n.options.event:void 0},g=this.optionFor(e,"initialSize");k(s,"is-zooming-in"),n.hideLoading(e),"full"===g?o.zoomToFull(m):"cover"===g?o.zoomToCover(m):"max"===g?o.zoomToMax(m):o.reset(.172)}))}getZoomInfo(e){var t;const{el:i,imageEl:n,thumbEl:s,panzoom:o}=e;if(!i||!n||!s||!o||Q(s)<3||!this.optionFor(e,"zoom")||this.instance.state===J.Destroy)return!1;if(1!==((null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1))return!1;let{top:a,left:r,width:l,height:c}=s.getBoundingClientRect(),{top:d,left:h,fitWidth:u,fitHeight:p}=o.contentRect;if(!(l&&c&&u&&p))return!1;const f=o.container.getBoundingClientRect();h+=f.left,d+=f.top;const m=-1*(h+.5*u-(r+.5*l)),g=-1*(d+.5*p-(a+.5*c)),v=l/u;let y=this.option("zoomOpacity")||!1;return"auto"===y&&(y=Math.abs(l/c-u/p)>.1),{x:m,y:g,scale:v,opacity:y}}attach(){const e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){const e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}Object.defineProperty(se,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}});const oe=(e,t={})=>{const i=new URL(e),n=new URLSearchParams(i.search),s=new URLSearchParams;for(const[e,i]of[...n,...Object.entries(t)]){let t=i.toString();"t"===e?s.set("start",parseInt(t).toString()):s.set(e,t)}let o=s.toString(),a=e.match(/#t=((.*)?\d+s)/);return a&&(o+=`#t=${a[1]}`),o},ae=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo","video"];class re extends R{onInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onRemoveSlide(e,t,i){i.xhr&&(i.xhr.abort(),i.xhr=null);const n=i.iframeEl;n&&(n.onload=n.onerror=null,n.src="//about:blank",i.iframeEl=null);const s=i.contentEl,o=i.placeholderEl;if("inline"===i.type&&s&&o)s.classList.remove("fancybox__content"),"none"!==s.style.display&&(s.style.display="none"),o.parentNode&&o.parentNode.insertBefore(s,o),o.remove(),i.contentEl=void 0,i.placeholderEl=void 0;else for(;i.el&&i.el.firstChild;)i.el.removeChild(i.el.firstChild)}onSelectSlide(e,t,i){i.state===ee.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var n,s;if("html5video"===i.type){try{null===(s=null===(n=i.el)||void 0===n?void 0:n.querySelector("video"))||void 0===s||s.pause()}catch(e){}return}let o;"vimeo"===i.type?o={method:"pause",value:"true"}:"youtube"===i.type&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach((e=>{e.el&&(this.setAspectRatio(e),this.resizeIframe(e))}))}onMessage(e){try{let t=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===t.event)for(let t of Array.from(document.getElementsByClassName("fancybox__iframe")))t instanceof HTMLIFrameElement&&t.contentWindow===e.source&&(t.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===t.event){const e=document.getElementById(t.id);e&&(e.dataset.ready="true")}}catch(e){}}loadAjaxContent(e){const t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===J.Ready&&(i.hideLoading(e),200===n.status?i.setContent(e,n.responseText):i.setError(e,404===n.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const s=e.ajax||null;n.open(s?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(s),e.xhr=n}setInlineContent(e){let t=null;if(x(e.src))t=e.src;else if("string"==typeof e.src){const i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if("clone"===e.type||t.closest(".fancybox__slide")){t=t.cloneNode(!0);const i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let n=t.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",n)}else if(t.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:t,el:i}=e;if(!t||"string"!=typeof t||!i)return;const n=this.instance,s=document.createElement("iframe");s.className="fancybox__iframe",s.setAttribute("id",`fancybox__iframe_ ${n.id}_ ${e.index}`);for(const[t,i]of Object.entries(this.optionFor(e,"iframeAttr")||{}))s.setAttribute(t,i);s.onerror=()=>{n.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=s;const o=this.optionFor(e,"preload");if(i.classList.add("is-loading"),"iframe"!==e.type||!1===o)return s.setAttribute("src",e.src+""),this.resizeIframe(e),void n.setContent(e,s);n.showLoading(e),s.onload=()=>{if(!s.src.length)return;const t="true"!==s.dataset.ready;s.dataset.ready="true",this.resizeIframe(e),t?n.revealContent(e):n.hideLoading(e)},s.setAttribute("src",t),n.setContent(e,s,!1)}resizeIframe(e){const t=e.iframeEl,i=null==t?void 0:t.parentElement;if(!t||!i)return;let n=e.autoSize,s=e.width||0,o=e.height||0;s&&o&&(n=!1);const a=i&&i.style;if(!1!==e.preload&&!1!==n&&a)try{const e=window.getComputedStyle(i),n=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),r=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),l=t.contentWindow;if(l){const e=l.document,t=e.getElementsByTagName("html")[0],i=e.body;a.width="",i.style.overflow="hidden",s=s||t.scrollWidth+n,a.width=`${s}px`,i.style.overflow="",a.flex="0 0 auto",a.height=`${i.scrollHeight}px`,o=t.scrollHeight+r}}catch(e){}if(s||o){const e={flex:"0 1 auto",width:"",height:""};s&&(e.width=`${s}px`),o&&(e.height=`${o}px`),Object.assign(a,e)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:t}=e;if(!t||!t.offsetParent)return;if(!this.optionFor(e,"videoAutoplay"))return;if("html5video"===e.type)try{const e=t.querySelector("video");if(e){const t=e.play();void 0!==t&&t.then((()=>{})).catch((t=>{e.muted=!0,e.play()}))}}catch(e){}if("youtube"!==e.type&&"vimeo"!==e.type)return;const i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let t;if("true"===e.iframeEl.dataset.ready)return t="youtube"===e.type?{event:"command",func:"playVideo"}:{method:"play",value:"true"},t&&e.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"),void(e.poller=void 0);"youtube"===e.type&&(t={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type="html",e.src=e.html,void(e.html="");const t=this.instance.optionFor(e,"src","");if(!t||"string"!=typeof t)return;let i=e.type,n=null;if(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const s=this.optionFor(e,"youtube"),{nocookie:o}=s,a=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i}(s,["nocookie"]),r=`www.youtube ${o?"-nocookie":""}.com`,l=oe(t,a),c=encodeURIComponent(n[2]);e.videoId=c,e.src=`https://${r}/embed/${c}?${l}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,i="youtube"}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const s=oe(t,this.optionFor(e,"vimeo")),o=encodeURIComponent(n[1]),a=n[4]||"";e.videoId=o,e.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${s?"&":""}`:""}${s}`,i="vimeo"}if(!i&&e.triggerEl){const t=e.triggerEl.dataset.type;ae.includes(t)&&(i=t)}i||"string"==typeof t&&("#"===t.charAt(0)?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i="html5video",e.videoFormat=e.videoFormat||"video/"+("ogv"===n[1]?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i="image":t.match(/\.(pdf)((\?|#).*)?$/i)?i="pdf":(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i="map"):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i="map")),i=i||this.instance.option("defaultType"),e.type=i,"image"===i&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case"html":this.instance.setContent(e,t);break;case"html5video":const i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case"map":case"youtube":case"vimeo":e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){var t;const i=e.contentEl,n=this.optionFor(e,"videoRatio"),s=null===(t=e.el)||void 0===t?void 0:t.getBoundingClientRect();if(!(i&&s&&n&&1!==n&&e.type&&["video","youtube","vimeo","html5video"].includes(e.type)))return;const o=s.width,a=s.height;i.style.aspectRatio=n+"",i.style.width=o/a>n?"auto":"",i.style.height=o/a>n?"":"auto"}attach(){const e=this,t=e.instance;t.on("Carousel.initSlide",e.onInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),window.addEventListener("message",e.onMessage)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlide",e.onInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(re,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}}});const le="play",ce="pause",de="ready";class he extends R{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:de}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==de}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){var e;(null===(e=this.instance.panzoom)||void 0===e?void 0:e.isResting)||(this.removeProgressBar(),this.pause())}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,(null===(e=this.instance.panzoom)||void 0===e?void 0:e.isResting)&&this.resume()}onTimerEnd(){const e=this.instance;"play"===this.state&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const t=this.instance,i=(null===(e=t.pages[t.page])||void 0===e?void 0:e.slides)||[];let n=this.option("progressParentEl");if(n||(n=(1===i.length?i[0].el:null)||t.viewport),!n)return null;const s=document.createElement("div");return k(s,"f-progress"),n.prepend(s),this.progressBar=s,s.offsetHeight,s}set(){const e=this,t=e.instance;if(t.pages.length<2)return;if(e.timer)return;const i=e.option("timeout");e.state=le,k(t.container,"has-autoplay");let n=e.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),e.timer=setTimeout((()=>{e.timer=null,e.inHover||e.onTimerEnd()}),i),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==de){if(e.option("pauseOnHover")){const t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,t=e.state,i=e.instance.container;e.clear(),e.state=de,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),C(i,"has-autoplay"),t!==de&&e.emit("stop")}pause(){const e=this;e.state===le&&(e.state=ce,e.clear(),e.emit(ce))}resume(){const e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==le){if(e.state===ce&&!e.inHover){const t=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",t),t.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===le||this.state===ce?this.stop():this.start()}attach(){const e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(he,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class ue extends R{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const t=e.carousel;if(!t)return;const i=e.container;i&&(t.options.Autoplay=p({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:t=>{var n;i.classList.add("has-slideshow"),(null===(n=e.getSlide())||void 0===n?void 0:n.state)!==ee.Ready&&t.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(t,i)=>{var n,s,o;!i||!i.cancelable||(null===(n=e.getSlide())||void 0===n?void 0:n.state)===ee.Ready&&(null===(o=null===(s=e.carousel)||void 0===s?void 0:s.panzoom)||void 0===o?void 0:o.isResting)||i.preventDefault()}}}),t.attachPlugins({Autoplay:he}),this.ref=t.plugins.Autoplay)}onReady(e){const t=e.carousel,i=this.ref;t&&i&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){const i=this.ref;if(!i)return;const n=t.panzoom;n&&n.on("startAnimation",(()=>{e.isCurrentSlide(t)&&i.stop()})),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;const n=this.ref;n&&t===this.option("key")&&"BUTTON"!==(null===(i=document.activeElement)||void 0===i?void 0:i.nodeName)&&n.toggle()}attach(){const e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){const e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(ue,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:e=>{var t;return(null===(t=e.instance.container)||void 0===t?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||e.instance.container},timeout:3e3}});const pe={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var fe;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Hidden=2]="Hidden",e[e.Disabled=3]="Disabled"}(fe||(fe={}));let me=class extends R{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"shouldCenter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:fe.Init})}formatThumb(e,t){return this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}getSlides(){const e=[],t=this.option("thumbTpl")||"";if(t)for(const i of this.instance.slides||[]){let n="";i.type&&(n=`for-${i.type}`,i.type&&["video","youtube","vimeo","html5video"].includes(i.type)&&(n+=" for-video")),e.push({html:this.formatThumb(i,t),customClass:n})}return e}onInitSlide(e,t){const i=t.el;i&&(t.thumbSrc=i.dataset.thumbSrc||t.thumbSrc||"",t.thumbClipWidth=parseFloat(i.dataset.thumbClipWidth||"")||t.thumbClipWidth||0,t.thumbHeight=parseFloat(i.dataset.thumbHeight||"")||t.thumbHeight||0)}onInitSlides(){this.state===fe.Init&&this.build()}onRefreshM(){this.refreshModern()}onChangeM(){"modern"===this.type&&(this.shouldCenter=!0,this.centerModern())}onClickModern(e){e.preventDefault(),e.stopPropagation();const t=this.instance,i=t.page,n=e=>{if(e){const t=e.closest("[data-carousel-index]");if(t)return parseInt(t.dataset.carouselIndex||"",10)||0}return-1},s=(e,t)=>{const i=document.elementFromPoint(e,t);return i?n(i):-1};let o=n(e.target);o<0&&(o=s(e.clientX+this.thumbGap,e.clientY),o===i&&(o=i-1)),o<0&&(o=s(e.clientX-this.thumbGap,e.clientY),o===i&&(o=i+1)),o<0&&(o=(t=>{let n=s(e.clientX-t,e.clientY),a=s(e.clientX+t,e.clientY);return o<0&&n===i&&(o=i+1),o<0&&a===i&&(o=i-1),o})(this.thumbExtraGap)),o===i?this.centerModern():o>-1&&o<t.pages.length&&t.slideTo(o)}onTransformM(){if("modern"!==this.type)return;const{instance:e,container:t,track:i}=this,n=e.panzoom;if(!(t&&i&&n&&this.panzoom))return;a(t,this.cn("isResting"),n.state!==v.Init&&n.isResting);const s=this.thumbGap,o=this.thumbExtraGap,r=this.thumbClipWidth;let l=0,c=0,d=0;for(const t of e.slides){let i=t.index,n=t.thumbSlideEl;if(!n)continue;a(n,this.cn("isSelected"),i===e.page),c=1-Math.abs(e.getProgress(i)),n.style.setProperty("--progress",c?c+"":"");const h=.5*((t.thumbWidth||0)-r);l+=s,l+=h,c&&(l-=c*(h+o)),n.style.setProperty("--shift",l-s+""),l+=h,c&&(l-=c*(h+o)),l-=s,0===i&&(d=o*c)}i&&(i.style.setProperty("--left",d+""),i.style.setProperty("--width",l+d+s+o*c+"")),this.shouldCenter&&this.centerModern()}buildClassic(){const{container:e,track:t}=this,i=this.getSlides();if(!e||!t||!i)return;const n=new this.instance.constructor(e,p({track:t,infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,transition:!1,Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},this.option("Carousel")||{},{Sync:{target:this.instance},slides:i}));this.carousel=n,this.track=t,n.on("ready",(()=>{this.emit("ready")})),n.on("createSlide",((e,t)=>{this.emit("createSlide",t,t.el)}))}buildModern(){if("modern"!==this.type)return;const{container:e,track:t,instance:i}=this,n=this.option("thumbTpl")||"";if(!e||!t||!n)return;k(e,"is-horizontal"),this.updateModern();for(const e of i.slides||[]){const i=document.createElement("div");if(k(i,this.cn("slide")),e.type){let t=`for-${e.type}`;["video","youtube","vimeo","html5video"].includes(e.type)&&(t+=" for-video"),k(i,t)}i.appendChild(s(this.formatThumb(e,n))),this.emit("createSlide",e,i),e.thumbSlideEl=i,t.appendChild(i),this.resizeModernSlide(e)}const o=new i.constructor.Panzoom(e,{content:t,lockAxis:"x",zoom:!1,panOnlyZoomed:!1,bounds:()=>{let e=0,t=0,n=i.slides[0],s=i.slides[i.slides.length-1],o=i.slides[i.page];return n&&s&&o&&(t=-1*this.getModernThumbPos(0),0!==i.page&&(t+=.5*(n.thumbWidth||0)),e=-1*this.getModernThumbPos(i.slides.length-1),i.page!==i.slides.length-1&&(e+=(s.thumbWidth||0)-(o.thumbWidth||0)-.5*(s.thumbWidth||0))),{x:{min:e,max:t},y:{min:0,max:0}}}});o.on("touchStart",((e,t)=>{this.shouldCenter=!1})),o.on("click",((e,t)=>this.onClickModern(t))),o.on("ready",(()=>{this.centerModern(),this.emit("ready")})),o.on(["afterTransform","refresh"],(e=>{this.lazyLoadModern()})),this.panzoom=o,this.refreshModern()}updateModern(){if("modern"!==this.type)return;const{container:e}=this;e&&(this.thumbGap=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-gap"))||0,this.thumbExtraGap=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-extra-gap"))||0,this.thumbWidth=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-width"))||40,this.thumbClipWidth=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-clip-width"))||40,this.thumbHeight=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-height"))||40)}refreshModern(){var e;if("modern"===this.type){this.updateModern();for(const e of this.instance.slides||[])this.resizeModernSlide(e);this.onTransformM(),null===(e=this.panzoom)||void 0===e||e.updateMetrics(!0),this.centerModern(0)}}centerModern(e){const i=this.instance,{container:n,panzoom:s}=this;if(!n||!s||s.state===v.Init)return;const o=i.page;let a=this.getModernThumbPos(o),r=a;for(let e=i.page-3;e<i.page+3;e++){if(e<0||e>i.pages.length-1||e===i.page)continue;const t=1-Math.abs(i.getProgress(e));t>0&&t<1&&(r+=t*(this.getModernThumbPos(e)-a))}let l=100;void 0===e&&(e=.2,i.inTransition.size>0&&(e=.12),Math.abs(-1*s.current.e-r)>s.containerRect.width&&(e=.5,l=0)),s.options.maxVelocity=l,s.applyChange({panX:t(-1*r-s.target.e,1e3),friction:null===i.prevPage?0:e})}lazyLoadModern(){const{instance:e,panzoom:t}=this;if(!t)return;const i=-1*t.current.e||0;let n=this.getModernThumbPos(e.page);if(t.state!==v.Init||0===n)for(const n of e.slides||[]){const e=n.thumbSlideEl;if(!e)continue;const o=e.querySelector("img[data-lazy-src]"),a=n.index,r=this.getModernThumbPos(a),l=i-.5*t.containerRect.innerWidth,c=l+t.containerRect.innerWidth;if(!o||r<l||r>c)continue;let d=o.dataset.lazySrc;if(!d||!d.length)continue;if(delete o.dataset.lazySrc,o.src=d,o.complete)continue;k(e,this.cn("isLoading"));const h=s(w);e.appendChild(h),o.addEventListener("load",(()=>{e.offsetParent&&(e.classList.remove(this.cn("isLoading")),h.remove())}),!1)}}resizeModernSlide(e){if("modern"!==this.type)return;if(!e.thumbSlideEl)return;const t=e.thumbClipWidth&&e.thumbHeight?Math.round(this.thumbHeight*(e.thumbClipWidth/e.thumbHeight)):this.thumbWidth;e.thumbWidth=t}getModernThumbPos(e){const i=this.instance.slides[e],n=this.panzoom;if(!n||!n.contentRect.fitWidth)return 0;let s=n.containerRect.innerWidth,o=n.contentRect.width;2===this.instance.slides.length&&(e-=1,o=2*this.thumbClipWidth);let a=e*(this.thumbClipWidth+this.thumbGap)+this.thumbExtraGap+.5*(i.thumbWidth||0);return a-=o>s?.5*s:.5*o,t(a||0,1)}build(){const e=this.instance,t=e.container,i=this.option("minCount")||0;if(i){let t=0;for(const i of e.slides||[])i.thumbSrc&&t++;if(t<i)return this.cleanup(),void(this.state=fe.Disabled)}const n=this.option("type");if(["modern","classic"].indexOf(n)<0)return void(this.state=fe.Disabled);this.type=n;const s=document.createElement("div");k(s,this.cn("container")),k(s,`is-${n}`);const o=this.option("parentEl");o?o.appendChild(s):t.after(s),this.container=s,k(t,this.cn("hasThumbs"));const a=document.createElement("div");k(a,this.cn("track")),s.appendChild(a),this.track=a,"classic"===n?this.buildClassic():this.buildModern(),this.state=fe.Ready,s.addEventListener("click",(t=>{setTimeout((()=>{var t;null===(t=null==s?void 0:s.querySelector(`[data-carousel-index="${e.page}"]`))||void 0===t||t.focus()}),100)}))}cleanup(){this.carousel&&this.carousel.destroy(),this.carousel=null,this.panzoom&&this.panzoom.destroy(),this.panzoom=null,this.container&&this.container.remove(),this.container=null,this.track=null,this.state=fe.Init,C(this.instance.container,this.cn("hasThumbs"))}attach(){const e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===L.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on("Panzoom.afterTransform",e.onTransformM),t.on("Panzoom.refresh",e.onRefreshM),t.on("change",e.onChangeM)}detach(){const e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off("Panzoom.afterTransform",e.onTransformM),t.off("Panzoom.refresh",e.onRefreshM),t.off("change",e.onChangeM),e.cleanup()}};Object.defineProperty(me,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:pe});const ge=Object.assign(Object.assign({},pe),{key:"t",showOnStart:!0,parentEl:null});class ve extends R{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&e.state!==fe.Disabled}get isHidden(){return this.hidden}onInit(){var e;const t=this,i=t.instance,n=i.carousel;if(t.ref||!n)return;const s=t.option("parentEl")||i.footer||i.container;if(!s)return;const o=p({},t.options,{parentEl:s,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:e=>{const i=e.container;i&&this.hidden&&(t.refresh(),i.style.transition="none",t.hide(),i.offsetHeight,queueMicrotask((()=>{i.style.transition="",t.show()})))}}});o.Carousel=o.Carousel||{},o.Carousel.on=p((null===(e=t.options.Carousel)||void 0===e?void 0:e.on)||{},{click:(e,t)=>{t.stopPropagation()}}),n.options.Thumbs=o,n.attachPlugins({Thumbs:me}),t.ref=n.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=fe.Hidden,t.hidden=!0)}onResize(){var e;const t=null===(e=this.ref)||void 0===e?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){const i=this.option("key");i&&i===t&&this.toggle()}toggle(){const e=this.ref;e&&e.state!==fe.Disabled&&(e.state!==fe.Hidden?this.hidden?this.show():this.hide():e.build())}show(){const e=this.ref,t=e&&e.state!==fe.Disabled&&e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute("aria-hidden"),t.classList.remove("is-hidden"),this.hidden=!1)}hide(){const e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add("is-hidden"),t.setAttribute("aria-hidden","true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||e.state===fe.Disabled)return;const t=e.container,i=(null==t?void 0:t.firstChild)||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const e=this,t=e.instance;t.state===J.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;const t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),null===(e=i.carousel)||void 0===e||e.detachPlugins(["Thumbs"]),t.ref=null}}Object.defineProperty(ve,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ge});const ye={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var be;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Disabled=2]="Disabled"}(be||(be={}));const _e={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};class we extends R{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:be.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),n=this.option("absolute"),s=this.option("enabled");if("auto"===s){const e=this.instance.carousel;let t=0;if(e)for(const i of e.slides)(i.panzoom||"image"===i.type)&&t++;t||(s=!1)}s||(i=void 0);let o=0;const a={left:[],middle:[],right:[]};if(i)for(const e of["left","middle","right"])for(const n of i[e]){const i=this.createEl(n);i&&(null===(t=a[e])||void 0===t||t.push(i),o++)}let r=null;if(o&&(r=this.createContainer()),r){for(const[e,t]of Object.entries(a)){const i=document.createElement("div");k(i,"fancybox__toolbar__column is-"+e);for(const e of t)i.appendChild(e);"auto"!==n||"middle"!==e||t.length||(n=!0),r.appendChild(i)}!0===n&&k(r,"is-absolute"),this.state=be.Ready,this.onRefresh()}else this.state=be.Disabled}onClick(e){var t,i;const n=this.instance,s=n.getSlide(),o=null==s?void 0:s.panzoom,a=e.target,r=a&&x(a)?a.dataset:null;if(!r)return;if(void 0!==r.fancyboxToggleThumbs)return e.preventDefault(),e.stopPropagation(),void(null===(t=n.plugins.Thumbs)||void 0===t||t.toggle());if(void 0!==r.fancyboxToggleFullscreen)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(void 0!==r.fancyboxToggleSlideshow){e.preventDefault(),e.stopPropagation();const t=null===(i=n.carousel)||void 0===i?void 0:i.plugins.Autoplay;let s=t.isActive;return o&&"mousemove"===o.panMode&&!s&&o.reset(),void(s?t.stop():t.start())}const l=r.panzoomAction,c=r.panzoomChange;if((c||l)&&(e.preventDefault(),e.stopPropagation()),c){let t={};try{t=JSON.parse(c)}catch(e){}o&&o.applyChange(t)}else l&&o&&o[l]&&o[l]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const t=this.instance.getSlide();if(!t||t.state!==ee.Ready)return;const i=t&&!t.error&&t.panzoom;for(const t of e.querySelectorAll("[data-panzoom-action]"))i?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),s=i&&i.canZoomOut();for(const t of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))s?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){s||n?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));const e=t.querySelector("g");e&&(e.style.display=n?"":"none")}}onDone(e,t){var i;null===(i=t.panzoom)||void 0===i||i.on("afterTransform",(()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()})),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const t=this.option("parentEl")||e,i=document.createElement("div");return k(i,"fancybox__toolbar"),t.prepend(i),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&k(e,"has-toolbar"),this.container=i,i}createEl(e){const t=this.instance,i=t.carousel;if(!i)return null;if("toggleFS"===e)return null;if("fullscreen"===e&&!t.fsAPI)return null;let n=null;const o=i.slides.length||0;let a=0,r=0;for(const e of i.slides)(e.panzoom||"image"===e.type)&&a++,("image"===e.type||e.downloadSrc)&&r++;if(o<2&&["infobar","prev","next"].includes(e))return n;if(void 0!==ye[e]&&!a)return null;if("download"===e&&!r)return null;if("thumbs"===e){const e=t.plugins.Thumbs;if(!e||!e.isEnabled)return null}if("slideshow"===e&&(!i.plugins.Autoplay||o<2))return null;if(void 0!==ye[e]){const t=ye[e];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),k(n,"f-button"),t.action&&(n.dataset.panzoomAction=t.action),t.change&&(n.dataset.panzoomChange=JSON.stringify(t.change)),n.appendChild(s(this.instance.localize(t.icon)))}else{const t=(this.option("items")||[])[e];t&&(n=s(this.instance.localize(t.tpl)),"function"==typeof t.click&&n.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),"function"==typeof t.click&&t.click.call(this,this,e)})))}const l=null==n?void 0:n.querySelector("svg");if(l)for(const[e,t]of Object.entries(_e))l.getAttribute(e)||l.setAttribute(e,String(t));return n}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=be.Disabled;const t=this.instance.container;t&&C(t,"has-toolbar")}attach(){const e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on("reveal",e.onChange),t.on("Carousel.change",e.onChange),e.onReady(e.instance)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off("reveal",e.onChange),t.off("Carousel.change",e.onChange),e.removeContainer()}}Object.defineProperty(we,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null}});const xe={Hash:ie,Html:re,Images:se,Slideshow:ue,Thumbs:ve,Toolbar:we},Ce="with-fancybox",ke="hide-scrollbar",$e="--fancybox-scrollbar-compensate",Te="--fancybox-body-margin",Se="is-animated",Me="is-loading",Pe=function(){var e=window.getSelection();return e&&"Range"===e.type};let Ee=null,De=null;const je=new Map;let Oe=0;class Ae extends g{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:J.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fsAPI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fsAPI=(()=>{let e,t="",i="",n="";return document.fullscreenEnabled?(t="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):document.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),t&&(e={request:function(e){return"webkitRequestFullscreen"===t?e[t](Element.ALLOW_KEYBOARD_INPUT):e[t]()},exit:function(){return document[n]&&document[i]()},isFullscreen:function(){return document[n]}}),e})(),this.id=t.id||++Oe,je.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask((()=>{this.init()}))}init(){if(this.state===J.Destroy)return;this.state=J.Init,this.attachPlugins(Object.assign(Object.assign({},Ae.Plugins),this.userPlugins)),this.emit("init"),!0===this.option("hideScrollbar")&&(()=>{if(!Y)return;const e=document.body;if(e.classList.contains(ke))return;let t=window.innerWidth-document.documentElement.getBoundingClientRect().width;t<0&&(t=0);const i=e.currentStyle||window.getComputedStyle(e),n=parseFloat(i.marginRight);document.documentElement.style.setProperty($e,`${t}px`),n&&e.style.setProperty(Te,`${n}px`),e.classList.add(ke)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=J.Ready,this.attachEvents(),this.emit("ready"),setTimeout((()=>{this.container&&this.container.setAttribute("aria-hidden","false")}),16)},t=this.fsAPI;this.option("Fullscreen.autoStart")&&t&&!t.isFullscreen()?t.request(this.container).then((()=>e())).catch((()=>e())):e()}initLayout(){var e,t;const i=this.option("parentEl")||document.body,n=s(this.localize(this.option("tpl.main")||""));n&&(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle("is-compact",this.isCompact),k(n,this.option("mainClass")||""),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),k(document.documentElement,Ce),Ee&&De||(Ee=document.createElement("span"),k(Ee,"fancybox-focus-guard"),Ee.setAttribute("tabindex","0"),Ee.setAttribute("aria-hidden","true"),Ee.setAttribute("aria-label","Focus guard"),De=Ee.cloneNode(),null===(e=n.parentElement)||void 0===e||e.insertBefore(Ee,n),null===(t=n.parentElement)||void 0===t||t.append(De)),this.option("animated")&&(k(n,Se),setTimeout((()=>{this.isClosing()||C(n,Se)}),350)),this.emit("initLayout"))}initCarousel(e){const t=this.container;if(!t)return;const n=t.querySelector(".fancybox__carousel");if(!n)return;const s=this.carousel=new U(n,p({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",((e,t,...i)=>{this.emit(`Carousel.${t}`,e,...i)})),s.on(["ready","change"],(()=>{var e;const t=this.getSlide();t&&(null===(e=t.panzoom)||void 0===e||e.updateControls()),this.manageCaption(t)})),this.on("Carousel.removeSlide",((e,t,i)=>{i.contentEl&&(i.contentEl.remove(),i.contentEl=void 0);const n=i.el;n&&(C(n,"has-error"),C(n,"has-unknown"),C(n,`has-${i.type||"unknown"}`)),i.closeBtnEl&&i.closeBtnEl.remove(),i.closeBtnEl=void 0,i.captionEl&&i.captionEl.remove(),i.captionEl=void 0,i.spinnerEl&&i.spinnerEl.remove(),i.spinnerEl=void 0,i.state=void 0})),s.on("Panzoom.touchStart",(()=>{this.isCompact||this.endIdle()})),s.on("settle",(()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&this.checkFocus()})),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",((e,t)=>{const n=this.getSlide();if(n&&i(n.el))return;const s=this.container;if(s){const e=Math.abs(t.current.f),i=e<1?"":Math.max(.5,Math.min(1,1-e/t.contentRect.fitHeight*1.5));s.style.setProperty("--fancybox-ts",i?"0s":""),s.style.setProperty("--fancybox-opacity",i+"")}})),s.on("Panzoom.touchEnd",((e,t,n)=>{const s=this.getSlide();if(s&&i(s.el))return;const o=Math.abs(t.dragOffset.y);"y"===t.lockedAxis&&(o>=200||o>=50&&t.dragOffset.time<300)&&(n&&n.cancelable&&n.preventDefault(),this.close(n,"f-throwOut"+(t.current.f<0?"Up":"Down")))}))),s.on("change",(e=>{var t;let i=null===(t=this.getSlide())||void 0===t?void 0:t.triggerEl;if(i){const t=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:e.page});i.dispatchEvent(t)}})),s.on(["refresh","change"],(e=>{const t=this.container;if(!t)return;for(const i of t.querySelectorAll("[data-fancybox-current-index]"))i.innerHTML=e.page+1;for(const i of t.querySelectorAll("[data-fancybox-count]"))i.innerHTML=e.pages.length;if(!e.isInfinite){for(const i of t.querySelectorAll("[data-fancybox-next]"))e.page<e.pages.length-1?(i.removeAttribute("disabled"),i.removeAttribute("tabindex")):(i.setAttribute("disabled",""),i.setAttribute("tabindex","-1"));for(const i of t.querySelectorAll("[data-fancybox-prev]"))e.page>0?(i.removeAttribute("disabled"),i.removeAttribute("tabindex")):(i.setAttribute("disabled",""),i.setAttribute("tabindex","-1"))}const i=this.getSlide();if(!i)return;let n=i.downloadSrc||"";n||"image"!==i.type||i.error||"string"!=typeof i.src||(n=i.src);const s="disabled",o="tabindex",a="download",r="href";for(const e of t.querySelectorAll("[data-fancybox-download]")){const t=i.downloadFilename;n?(e.removeAttribute(s),e.removeAttribute(o),e.setAttribute(r,n),e.setAttribute(a,t||n),e.setAttribute("target","_blank")):(e.setAttribute(s,""),e.setAttribute(o,"-1"),e.removeAttribute(r),e.removeAttribute(a))}})),this.emit("initCarousel")}attachEvents(){const e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){const e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const t=window.visualViewport,i=Math.max(1,(null==t?void 0:t.scale)||1);let n="",s="",o="";if(t&&i>1){let e=`${t.offsetLeft}px`,a=`${t.offsetTop}px`;n=t.width*i+"px",s=t.height*i+"px",o=`translate3d(${e}, ${a}, 0) scale(${1/i})`}e.style.transform=o,e.style.width=n,e.style.height=s}onClick(e){var t,i;const{container:n,isCompact:s}=this;if(!n||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const o=document.activeElement;if(Pe()&&o&&n.contains(o))return;const a=e.composedPath()[0];if(a===(null===(t=this.carousel)||void 0===t?void 0:t.container))return;if(a.closest(".f-spinner")||a.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(a.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(a.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(s&&"image"===(null===(i=this.getSlide())||void 0===i?void 0:i.type))return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout((()=>{this.toggleIdle(),this.clickTimer=null}),350));if(this.emit("click",e),e.defaultPrevented)return;let r=!1;if(a.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;a.matches(G)||o.blur()}if(Pe())return;r=this.option("contentClick")}else a.closest(".fancybox__carousel")&&!a.matches(G)&&(r=this.option("backdropClick"));"close"===r?(e.preventDefault(),this.close(e)):"next"===r?(e.preventDefault(),this.next()):"prev"===r&&(e.preventDefault(),this.prev())}onWheel(e){var t;let i=this.option("wheel",e);(null===(t=e.target)||void 0===t?void 0:t.closest(".fancybox__thumbs"))&&(i="slide");const n="slide"===i,s=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce((function(e,t){return Math.abs(t)>Math.abs(e)?t:e})),o=Math.max(-1,Math.min(1,s)),a=Date.now();this.pwt&&a-this.pwt<300?n&&e.preventDefault():(this.pwt=a,this.emit("wheel",e),e.defaultPrevented||("close"===i?(e.preventDefault(),this.close(e)):"slide"===i&&(e.preventDefault(),this[o>0?"prev":"next"]())))}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const t=e.key,i=this.option("keyboard");if(!i||e.ctrlKey||e.altKey||e.shiftKey)return;const n=e.composedPath()[0],s=document.activeElement&&document.activeElement.classList,o=s&&s.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if("Escape"!==t&&!o&&x(n)&&(n.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)))return;this.emit("keydown",t,e);const a=i[t];"function"==typeof this[a]&&(e.preventDefault(),this[a]())}onResize(){const e=this.container;if(!e)return;const t=this.isCompact;e.classList.toggle("is-compact",t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}manageCloseBtn(e){const t=this.optionFor(e,"closeButton")||!1;if("auto"===t){const e=this.plugins.Toolbar;if(e&&e.state===be.Ready)return}if(!t)return;if(!e.contentEl||e.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const t=s(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(t),e.el&&k(e.el,"has-close-btn")}}manageCaption(e){var t,i;const n="fancybox__caption",s="has-caption",o=this.container;if(!o)return;const a=this.isCompact||this.option("commonCaption"),r=!a;if(this.caption&&this.stop(this.caption),r&&this.caption&&(this.caption.remove(),this.caption=null),a&&!this.caption)for(const e of(null===(t=this.carousel)||void 0===t?void 0:t.slides)||[])e.captionEl&&(e.captionEl.remove(),e.captionEl=void 0,C(e.el,s),null===(i=e.el)||void 0===i||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||a&&!this.isCurrentSlide(e))return;const l=e.el;let c=this.optionFor(e,"caption","");if("string"!=typeof c||!c.length)return void(a&&this.caption&&this.animate(this.caption,"f-fadeOut",(()=>{var e;null===(e=this.caption)||void 0===e||e.remove(),this.caption=null})));let d=null;if(r){if(d=e.captionEl||null,l&&!d){const t=`fancybox__caption_ ${this.id}_ ${e.index}`;d=document.createElement("div"),k(d,n),d.setAttribute("id",t),e.captionEl=l.appendChild(d),k(l,s),l.setAttribute("aria-labelledby",t)}}else d=this.caption,d||(d=o.querySelector("."+n)),d||(d=document.createElement("div"),d.dataset.fancyboxCaption="",k(d,n),d.innerHTML=c,(this.footer||o).prepend(d)),k(o,s),this.caption=d;d&&(d.innerHTML=c)}checkFocus(e){var t;const i=document.activeElement||null;i&&(null===(t=this.container)||void 0===t?void 0:t.contains(i))||this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;const i=document.activeElement||null,n=(null==e?void 0:e.target)||null,s=this.container,o=this.getSlide();if(!s||!(null===(t=this.carousel)||void 0===t?void 0:t.viewport))return;if(!e&&i&&s.contains(i))return;const a=o&&o.state===ee.Ready?o.el:null;if(!a||a.contains(i)||s===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const r=Array.from(s.querySelectorAll(G));let l=[],c=null;for(let e of r){const t=!e.offsetParent||e.closest('[aria-hidden="true"]'),i=a&&a.contains(e),n=!this.carousel.viewport.contains(e);e===s||(i||n)&&!t?(l.push(e),void 0!==e.dataset.origTabindex&&(e.tabIndex=parseFloat(e.dataset.origTabindex)),e.removeAttribute("data-orig-tabindex"),!e.hasAttribute("autoFocus")&&c||(c=e)):(e.dataset.origTabindex=void 0===e.dataset.origTabindex?e.getAttribute("tabindex")||void 0:e.dataset.origTabindex,e.tabIndex=-1)}let d=null;e?(!n||l.indexOf(n)<0)&&(d=c||s,l.length&&(i===De?d=l[0]:this.lastFocus!==s&&i!==Ee||(d=l[l.length-1]))):d=o&&"image"===o.type?s:c||s,d&&K(d),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return(null===(e=Ae.getInstance())||void 0===e?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);const n=s=>{s.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",n),delete e.dataset.animationName,i&&i(),C(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",n),k(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;const n=e.el;if(!n)return;let o=null;if(x(t)?o=t:(o=s(t+""),x(o)||(o=document.createElement("div"),o.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(o.nodeName.toLowerCase())){const e=document.createElement("div");e.appendChild(o),o=e}x(o)&&e.filter&&!e.error&&(o=o.querySelector(e.filter)),o&&x(o)?(k(o,"fancybox__content"),e.id&&o.setAttribute("id",e.id),"none"!==o.style.display&&"none"!==getComputedStyle(o).getPropertyValue("display")||(o.style.display=e.display||this.option("defaultDisplay")||"flex"),n.classList.add(`has-${e.error?"error":e.type||"unknown"}`),n.prepend(o),e.contentEl=o,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){const i=e.el,n=e.contentEl;i&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=ee.Opening,(t=this.isOpeningSlide(e)?void 0===t?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,(()=>{this.done(e)})):this.done(e))}done(e){this.isClosing()||(e.state=ee.Ready,this.emit("done",e),k(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask((()=>{this.option("autoFocus")&&(this.option("autoFocus")?this.focus():this.checkFocus())})),this.isOpeningSlide(e)&&!this.isCompact&&this.option("idle")&&this.setIdle())}isCurrentSlide(e){const t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return null===(null===(t=this.carousel)||void 0===t?void 0:t.prevPage)&&e.index===(null===(i=this.getSlide())||void 0===i?void 0:i.index)}showLoading(e){e.state=ee.Loading;const t=e.el;t&&(k(t,Me),this.emit("loading",e),e.spinnerEl||setTimeout((()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===ee.Loading){let i=s(w);e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}}),250))}hideLoading(e){const t=e.el;if(!t)return;const i=e.spinnerEl;this.isClosing()?null==i||i.remove():(C(t,Me),i&&this.animate(i,"f-fadeOut",(()=>{i.remove()})),e.state===ee.Loading&&(this.emit("loaded",e),e.state=ee.Ready))}setError(e,t){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);const n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,n)}clearContent(e){var t;null===(t=this.carousel)||void 0===t||t.emit("removeSlide",e)}getSlide(){var e;const t=this.carousel;return(null===(e=null==t?void 0:t.pages[null==t?void 0:t.page])||void 0===e?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const n=this.fsAPI,s=()=>{this.proceedClose(e,t)};n&&n.isFullscreen()?Promise.resolve(n.exit()).then((()=>s())):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const t=()=>{this.clearIdle(),this.idle=!0,k(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{const e=this.option("idle");e&&(this.idleTimer=setTimeout(t,e))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,C(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){const e=this.fsAPI;e&&(e.isFullscreen()?e.exit():this.container&&e.request(this.container))}isClosing(){return[J.Closing,J.CustomClosing,J.Destroy].includes(this.state)}proceedClose(e,t){var i,n;this.state=J.Closing,this.clearIdle(),this.detachEvents();const s=this.container,o=this.carousel,a=this.getSlide(),r=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(r&&(Q(r)?K(r):r.focus()),s&&(k(s,"is-closing"),s.setAttribute("aria-hidden","true"),this.option("animated")&&k(s,Se),s.style.pointerEvents="none"),o){o.clearTransitions(),null===(i=o.panzoom)||void 0===i||i.destroy(),null===(n=o.plugins.Navigation)||void 0===n||n.detach();for(const e of o.slides){e.state=ee.Closing,this.hideLoading(e);const t=e.contentEl;t&&this.stop(t);const i=null==e?void 0:e.panzoom;i&&(i.stop(),i.detachEvents(),i.detachObserver()),this.isCurrentSlide(e)||o.emit("removeSlide",e)}}this.emit("close",e),this.state!==J.CustomClosing?(void 0===t&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,(()=>{o&&o.emit("removeSlide",a)})),setTimeout((()=>{this.destroy()}),500)):this.destroy()):setTimeout((()=>{this.destroy()}),500)}destroy(){var e;if(this.state===J.Destroy)return;this.state=J.Destroy,null===(e=this.carousel)||void 0===e||e.destroy();const t=this.container;t&&t.remove(),je.delete(this.id);const i=Ae.getInstance();i?i.focus():(Ee&&(Ee.remove(),Ee=null),De&&(De.remove(),De=null),C(document.documentElement,Ce),(()=>{if(!Y)return;const e=document,t=e.body;t.classList.remove(ke),t.style.setProperty(Te,""),e.documentElement.style.setProperty($e,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!Y)return;let n,s="",o={};if(void 0===e?n=document.body:"string"==typeof e?(n=document.body,s=e,"object"==typeof t&&(o=t||{})):(n=e,"string"==typeof t&&(s=t),"object"==typeof i&&(o=i||{})),!n||!x(n))return;s=s||"[data-fancybox]";const a=Ae.openers.get(n)||new Map;a.set(s,o),Ae.openers.set(n,a),1===a.size&&n.addEventListener("click",Ae.fromEvent)}static unbind(e,t){let i,n="";if("string"==typeof e?(i=document.body,n=e):(i=e,"string"==typeof t&&(n=t)),!i)return;const s=Ae.openers.get(i);s&&n&&s.delete(n),n&&s||(Ae.openers.delete(i),i.removeEventListener("click",Ae.fromEvent))}static destroy(){let e;for(;e=Ae.getInstance();)e.destroy();for(const e of Ae.openers.keys())e.removeEventListener("click",Ae.fromEvent);Ae.openers=new Map}static fromEvent(e){if(e.defaultPrevented)return;if(e.button&&0!==e.button)return;if(e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const i=t.closest("[data-fancybox-trigger]");if(i){const e=i.dataset.fancyboxTrigger||"",n=document.querySelectorAll(`[data-fancybox="${e}"]`),s=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=n[s]||t}if(!(t&&t instanceof Element))return;let n,s,o,a;if([...Ae.openers].reverse().find((([e,i])=>!(!e.contains(t)||![...i].reverse().find((([i,r])=>{let l=t.closest(i);return!!l&&(n=e,s=i,o=l,a=r,!0)}))))),!n||!s||!o)return;a=a||{},e.preventDefault(),t=o;let r=[],l=p({},Z,a);l.event=e,l.triggerEl=t,l.delegate=i;const c=l.groupAll,d=l.groupAttr,h=d&&t?t.getAttribute(`${d}`):"";if((!t||h||c)&&(r=[].slice.call(n.querySelectorAll(s))),t&&!c&&(r=h?r.filter((e=>e.getAttribute(`${d}`)===h)):[t]),!r.length)return;const u=Ae.getInstance();return u&&u.options.triggerEl&&r.indexOf(u.options.triggerEl)>-1?void 0:(t&&(l.startIndex=r.indexOf(t)),Ae.fromNodes(r,l))}static fromSelector(e,t){let i=null,n="";if("string"==typeof e?(i=document.body,n=e):e instanceof HTMLElement&&"string"==typeof t&&(i=e,n=t),!i||!n)return!1;const s=Ae.openers.get(i);if(!s)return!1;const o=s.get(n);return!!o&&Ae.fromNodes(Array.from(i.querySelectorAll(n)),o)}static fromNodes(e,t){t=p({},Z,t||{});const i=[];for(const n of e){const e=n.dataset||{},s=e.src||n.getAttribute("href")||n.getAttribute("currentSrc")||n.getAttribute("src")||void 0;let o;const a=t.delegate;let r;a&&i.length===t.startIndex&&(o=a instanceof HTMLImageElement?a:a.querySelector("img:not([aria-hidden])")),o||(o=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),o&&(r=o.currentSrc||o.src||void 0,!r&&o.dataset&&(r=o.dataset.lazySrc||o.dataset.src||void 0));const l={src:s,triggerEl:n,thumbEl:o,thumbElSrc:r,thumbSrc:r};for(const t in e)"fancybox"!==t&&(l[t]=e[t]+"");i.push(l)}return new Ae(i,t)}static getInstance(e){return e?je.get(e):Array.from(je.values()).reverse().find((e=>!e.isClosing()&&e))||null}static getSlide(){var e;return(null===(e=Ae.getInstance())||void 0===e?void 0:e.getSlide())||null}static show(e=[],t={}){return new Ae(e,t)}static next(){const e=Ae.getInstance();e&&e.next()}static prev(){const e=Ae.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(const e of je.values())e.close(...t);else{const e=Ae.getInstance();e&&e.close(...t)}}}Object.defineProperty(Ae,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.19"}),Object.defineProperty(Ae,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Z}),Object.defineProperty(Ae,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:xe}),Object.defineProperty(Ae,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e.Carousel=U,e.Fancybox=Ae,e.Panzoom=j})),document.addEventListener("scroll",activateElementsOnPageScrolling),activateElementsOnPageScrolling(),document.querySelectorAll("[data-toggle-class]").forEach((e=>{let t=e.getAttribute("data-toggle-class");e.addEventListener("click",(e=>{e.target.classList.toggle(t)}))})),document.querySelectorAll("[data-body-toggle-class]").forEach((e=>{let t=e.getAttribute("data-body-toggle-class");e.addEventListener("click",(e=>{document.getElementsByTagName("body")[0].classList.toggle(t)}))}));let vModalParams={on:{done:(e,t)=>{document.querySelectorAll(".vModal form .recaptcha").forEach((e=>{""==e.innerHTML&&grecaptcha.render(e,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})})),document.querySelectorAll(".vModal form").forEach((e=>{e.querySelector(".form-error-str.response").innerHTML=""})),resetSmsCodeTimer()},shouldClose:(e,t)=>{document.querySelectorAll(".vModal form .recaptcha").forEach((e=>{grecaptcha.reset()}))}},compact:!0,autoFocus:!0,closeButton:!0,defaultDisplay:"flex",dragToClose:!0,wheel:!1,id:"vModalBlock"};function initVModal(e){(e=document.querySelector(e)).querySelectorAll("[data-v-modal]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const i=e.getAttribute("data-v-modal");Fancybox.close(),Fancybox.show([{src:"#vModal--"+i,type:"inline"}],vModalParams)}))}))}function validateVModalForm(){document.querySelectorAll(".vModal form").forEach((e=>{e.addEventListener("submit",(e=>{let t=!0;if(e.target.querySelectorAll("[required]").forEach((e=>{e.removeAttribute("data-invalid");e.getAttribute("name");e.validity.valid||(e.setAttribute("data-invalid",!0),t=!1)})),t){if(!e.target.hasAttribute("data-ajax"))return!0;e.preventDefault(),formAjaxHandler(e.target)}else e.preventDefault()}))}))}function phoneValidation(e){if(curValue=e.target.value.replace(/[^0-9]/g,""),!(curValue.length<3)){switch(firstDigits=curValue.substring(0,2),firstDigits){case"88":case"89":case"70":case"71":case"72":case"73":case"74":case"75":case"76":case"77":case"78":case"79":correctedValue=curValue.substring(1);break;default:correctedValue=curValue}correctedValue.length>10&&(correctedValue=correctedValue.substring(0,10)),formattedValue=correctedValue.substring(0,3),formattedValue+=correctedValue.length>3?" "+correctedValue.substring(3,6):"",formattedValue+=correctedValue.length>6?" "+correctedValue.substring(6,8):"",formattedValue+=correctedValue.length>8?" "+correctedValue.substring(8,10):"",e.target.value=formattedValue}}function smsCodeValidation(e){correctedValue=e.target.value.replace(/[^0-9]/g,""),correctedValue.length>4&&(correctedValue=correctedValue.substring(0,4)),e.target.value=correctedValue,4==correctedValue.length&&e.target.closest("form").querySelector("[type='submit']").click()}function smsCodeTimer(e){document.querySelectorAll(e).forEach((t=>{let i=t.innerHTML;i>0?(t.innerHTML=i-1,"undefined"!=typeof timer&&clearTimeout(timer),timer=setTimeout((function(){smsCodeTimer(e)}),1e3)):t.closest(".vModal-userForm__input--smsCodeAction.disabled").classList.remove("disabled")}))}function resetSmsCodeTimer(){document.querySelectorAll(".vModal-userForm__input--smsCodeAction > div > span").forEach((e=>{e.innerHTML=60,e.closest(".vModal-userForm__input--smsCodeAction").classList.add("disabled")})),smsCodeTimer(".vModal-userForm__input--smsCodeAction.disabled > div > span")}async function formAjaxHandler(e){const t=e.getAttribute("action"),i=(e.getAttribute("method"),new FormData(e));let n=vModalParams,s=document.querySelectorAll(".vModal");for(var o=0;o<s.length;++o)s[o].classList.add("is-loading");e.classList.add("loading"),e.querySelector("[type='submit']").setAttribute("disabled",!0);let a=null!==e.querySelector("[name='phone']")&&void 0!==e.querySelector("[name='phone']")&&e.querySelector("[name='phone']").value.length>0&&e.querySelector("[name='phone']").value;const r=e.querySelector(".form-error-str.response");r.innerHTML="";let l=await fetch(t,{method:"POST",body:i});e:try{let t=await l.json();if(console.log(t),void 0===t.code){r.innerHTML="Неизвестная ошибка";break e}if("user_phone"==t.method)switch(t.code){case"captcha_error":r.innerHTML=void 0!==t.msg?t.msg:"Пройдите проверку reCaptcha";break;case"phone_format_error":r.innerHTML=void 0!==t.msg?t.msg:"Неверный формат номера телефона";break;case"multiple_users":r.innerHTML=void 0!==t.msg?t.msg:"Увы, Ваш номер телефона прикреплён к нескольким клиентам";break;case"spam_request":r.innerHTML=void 0!==t.msg?t.msg:"Слишком много запросов на отправку sms, попробуйте через 5 минут";break;case"sms_send_fail":r.innerHTML=void 0!==t.msg?t.msg:"Ошибка отправки SMS";break;case"sms_send_successful":Fancybox.close(),e.reset(),t.phone&&(document.querySelector("#vModal--userSmsCode .js_user_check_sms_phone").value=t.phone),t.new_user&&(document.querySelector("#vModal--userSmsCode .js_user_check_sms_phone_new_user").value=t.new_user),t.phone_text&&(document.querySelector("#vModal--userSmsCode .js_user_check_sms_for_phone").innerHTML=t.phone_text),n.id="userSmsCode",Fancybox.show([{src:"#vModal--userSmsCode",type:"inline"}],n);break;default:r.innerHTML="Неизвестная ошибка"}if("user_chech_sms"==t.method)switch(t.code){case"sms_wrong_format":r.innerHTML=void 0!==t.msg?t.msg:"Неверный формат кода из sms";break;case"phone_format_error":r.innerHTML=void 0!==t.msg?t.msg:"Неверный формат номера телефона";break;case"multiple_users":r.innerHTML=void 0!==t.msg?t.msg:"Увы, Ваш номер телефона прикреплён к нескольким клиентам";break;case"wrong_sms_code":r.innerHTML=void 0!==t.msg?t.msg:"Неверный код";break;case"auth_success":$(".js_user_lk").removeClass("hidden"),$(".js_user_login").addClass("hidden"),Fancybox.close(),e.reset(),n.id="userLoginCompleted",Fancybox.show([{src:"#vModal--userLoginCompleted",type:"inline"}],n),$.ajax({url:"/udata/users/isNewClient.json",dataType:"json",async:!0,success:function(e){e.hasOwnProperty("is_new_client")&&0==e.is_new_client&&($(".js_banners_wrap").remove(),$(".not_old_client").length>0&&window.location.replace("/promonabory-dlya-klientov2/"))}});break;case"erpUpdate_error":case"erpUpdate_unknown":case"erpCheck_error":case"erpReg_error":case"erpReg_unknown":case"erpCheck_unknown":case"erpNewCheck_error":case"erpNewCheck_unknown":default:r.innerHTML="Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону.";break;case"erpNewCheck_needReg":case"erpNewCheck_needFullReg":Fancybox.close(),e.reset(),a&&(document.querySelector("#vModal--userRegistration .js_user_registrate_phone").value=a),t.phone_format&&(document.querySelector("#vModal--userRegistration .js_user_registrate_phone_text").innerHTML=t.phone_format),t.fname&&(document.querySelector("#vModal--userRegistration .vModal-userForm__input--name input").value=t.fname),t.lname&&(document.querySelector("#vModal--userRegistration .vModal-userForm__input--last-name input").value=t.lname),t.father_name&&(document.querySelector("#vModal--userRegistration .vModal-userForm__input--additional-name input").value=t.father_name),t.email&&(document.querySelector("#vModal--userRegistration .vModal-userForm__input--email input").value=t.email),n.id="userRegistration",Fancybox.show([{src:"#vModal--userRegistration",type:"inline"}],vModalParams)}if("registrate_by_phone_do"==t.method)switch(t.code){case"phone_format_error":case"wrong_email_format":case"email_not_unical":case"multiple_users":case"erpUpdate_error":case"erpUpdate_unknown":r.innerHTML=void 0!==t.msg?t.msg:"Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону.";break;case"reg_success":$(".js_user_lk").removeClass("hidden"),$(".js_user_login").addClass("hidden"),Fancybox.close(),e.reset(),n.id="userRegistrationCompleted",Fancybox.show([{src:"#vModal--userRegistrationCompleted",type:"inline"}],n),document.querySelector(".v-header-darkline__login.lk").classList.remove("hidden"),document.querySelector(".v-header-darkline__login:not(.lk)").classList.add("hidden"),$.ajax({url:"/udata/users/isNewClient.json",dataType:"json",async:!0,success:function(e){e.hasOwnProperty("is_new_client")&&0==e.is_new_client&&($(".js_banners_wrap").remove(),$(".not_old_client").length>0&&window.location.replace("/promonabory-dlya-klientov2/"))}});break;default:r.innerHTML="Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону."}if("sendBottleInfo"==t.method)switch(t.code){case"phone_format_error":r.innerHTML=void 0!==t.msg?t.msg:"Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону.";break;case"send_successful":Fancybox.close(),e.reset(),n.id="checkBottleRequest",Fancybox.show([{src:"#vModal--checkBottleRequest",type:"inline"}],n);break;default:r.innerHTML="Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону."}}catch(e){return console.log(e),r.innerHTML="Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону.",!1}for(o=0;o<s.length;++o)s[o].classList.remove("is-loading");e.classList.remove("loading"),e.querySelector("[type='submit']").removeAttribute("disabled")}initVModal("body"),validateVModalForm(),document.querySelectorAll('.vModal form [autocomplete="tel"]').forEach((e=>{e.addEventListener("input",(e=>{phoneValidation(e)}))})),document.querySelectorAll(".vModal-userForm__input--smsCode input").forEach((e=>{e.addEventListener("input",(e=>{smsCodeValidation(e)}))})),document.querySelectorAll("[data-resend-code]").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");document.querySelector('#vModal--userLogin form [name="phone"]').value=t.querySelector('[name="phone"]').value,document.querySelector('#vModal--userLogin form [type="submit"]').click()}))})),$(document).ready((function(){({smsCountDownTimer:null,init_popup:function(e){e.trigger_link.leafLetPopUp({closeBtnLocation:"box",content:e.content_callback,boxWidth:function(){return e.boxWidth||600},beforeLoad:function(t,i){var n=$(".b-leaflet");n.data("triggerElement",e.trigger_link),e.leafletMod&&($("body").addClass(e.leafletMod),n.addClass(e.leafletMod))},beforeClose:function(t){e.leafletMod&&$("body").removeClass(e.leafletMod)},afterLoad:e.afterLoad_callback||function(){if(forms.init(".b-leaflet"),$(".b-leaflet .recaptcha").length>0){var e=$(".b-leaflet .recaptcha").get(0);grecaptcha.render(e,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})}}})},show_popup:function(e){e.trigger_link.leafLetPopUp("show",{closeBtnLocation:"box",content:e.content_callback,boxWidth:function(){return e.boxWidth||600},beforeLoad:function(t,i){var n=$(".b-leaflet");n.data("triggerElement",e.trigger_link),e.leafletMod&&($("body").addClass(e.leafletMod),n.addClass(e.leafletMod))},beforeClose:function(t){e.leafletMod&&$("body").removeClass(e.leafletMod)},afterLoad:e.afterLoad_callback||function(){if(forms.init(".b-leaflet"),$(".b-leaflet .recaptcha").length>0){var e=$(".b-leaflet .recaptcha").get(0);grecaptcha.render(e,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})}}})},auth:function(){var e=this;$(".user_popup").each((function(){var t=$(this),i=$("#"+t.data("html_id")),n=i.length>0?i.html():"",s={trigger_link:t,boxWidth:t.data("boxWidth"),leafletMod:t.data("leafletMod"),content_callback:function(){return n}};e.init_popup(s)}))},smsCountDown:function(e,t){var i=this;t[0].innerHTML--,0===Number(t[0].innerHTML)?(clearTimeout(i.smsCountDownTimer),e&&e()):i.smsCountDownTimer=setTimeout((function(){i.smsCountDown(e,t)}),1e3)},auth_phone_submit:function(){var e=this;e.smsCountDownTimer=null,$(document).on("submit",".js_user_phone form",(function(t){t.preventDefault();var i=$(this),n=i.find("input, select, textarea").serializeObject(),s=$.extend({},n);helpers.delay.call(i,(function(){$.ajax({url:"/udata/users/user_phone/.json",dataType:"json",data:s,success:function(t){if(t.code)switch(t.code){case 10:case 60:var i=$(this),n=$("#user_check_sms"),s={trigger_link:i,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?(t.phone&&n.find(".js_user_check_sms_phone").val(t.phone),t.new_user&&n.find(".js_user_check_sms_phone_new_user").val(t.new_user),t.phone_text&&n.find(".js-user_check_sms_for_phone").text(t.phone_text),n.html()):""},afterLoad_callback:function(){forms.init(".b-leaflet");var t=$(".b-leaflet").find(".js_user_check_sms form"),i=t.find(".js_user_repeat_sms_btn"),n=t.find(".js_user_check_sms-timer");if(i.removeClass("hidden"),n.addClass("hidden"),clearTimeout(e.smsCountDownTimer),$(".b-leaflet .recaptcha").length>0){var s=$(".b-leaflet .recaptcha").get(0);grecaptcha.render(s,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})}}};e.show_popup(s);break;case 15:n=$("#user_registrate"),s={trigger_link:$(this),boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){if(n.length>0){var e=t.phone?t.phone:"",i=t.phone_formatted?t.phone_formatted:e;return $(".js_user_registrate_phone",n).val(e),$(".js_user_registrate_phone_text",n).html(i),n.html()}return""}};e.show_popup(s);break;case 50:i=$(this),n=$("#user_auth_several_users"),s={trigger_link:i,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?n.html():""}};e.show_popup(s);break;case 80:i=$(this),n=$("#user_auth_too_often_sms_send"),s={trigger_link:i,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?n.html():""}};e.show_popup(s);break;case 90:i=$(this),n=$("#user_check_captcha"),s={trigger_link:i,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?n.html():""}};e.show_popup(s);break;default:i=$(this),n=$("#user_auth_sms_send_error"),s={trigger_link:i,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?n.html():""}};e.show_popup(s)}},error:function(){self.handleError({message:"Произошла ошибка"})}})}))}))},auth_change_phone:function(){var e=this;$(document).on("click",".js_user_change_phone",(function(t){t.preventDefault();var i=$("#"+$(this).data("html_id")),n={trigger_link:$(this),boxWidth:$(this).data("boxWidth"),leafletMod:$(this).data("leafletMod"),content_callback:function(){return i.length>0?i.html():""}};e.show_popup(n)}))},auth_repeat_sms:function(){var e=this;$(document).on("click",".js_user_repeat_sms_btn",(function(t){t.preventDefault();var i=$(this).closest("form"),n=i.find(".js_user_check_sms_phone").val(),s=i.find('textarea[name="g-recaptcha-response"]').val(),o=i.data("repeat-url");helpers.delay.call($(this),(function(){$.ajax({url:o||window.location,dataType:"json",data:{phone:n,"g-recaptcha-response":s},success:function(t){if(t.code&&80==t.code){var n=$(this),s=$("#user_auth_too_often_sms_send"),o={trigger_link:n,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return s.length>0?s.html():""}};e.show_popup(o)}else if(t.code&&90==t.code){n=$(this),s=$("#user_check_captcha"),o={trigger_link:n,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return s.length>0?s.html():""}};e.show_popup(o)}else if(t.code&&10==t.code){console.log("js_user_repeat_sms_btn - YES");var a=i.find(".js_user_repeat_sms_btn"),r=i.find(".js_user_check_sms-timer"),l=a.data("repeat_count")&&a.data("repeat_count")>0?a.data("repeat_count")+1:1;console.log("js_user_repeat_sms_btn - repeat_count = "+l),a.data("repeat_count",l),l<3&&(a.addClass("hidden"),r.removeClass("hidden").find("[data-timer]").html(i.data("repeatTimer")?i.data("repeatTimer")+1:31),console.log("js_user_repeat_sms_btn - data-timer = "+r.find("[data-timer]")),e.smsCountDown((function(){isSent=!1,r.addClass("hidden"),a.removeClass("hidden")}),r.find("[data-timer]")))}},error:function(){self.handleError({message:"Произошла ошибка"})}})}))}))},auth_check_sms:function(){var e=this;$(document).on("keyup",".js-user_check_sms_input",(function(t){var i=$(this),n=i.val(),s=i.closest(".b-form_box"),o=i.closest(".js_user_check_sms form"),a=$(".js_user_check_sms_phone",o).val(),r=o.find(".b-form_box_error"),l=4===n.replace(/\D/g,"").length;helpers.delay.call(i,(function(){if(l){var t=o.find("input, select, textarea").serializeObject(),i=$.extend({},t);$.ajax({url:"/udata/users/user_chech_sms/.json",dataType:"json",data:i,success:function(t){var i=t.msg?t.msg:"Неизвестная ошибка",n=t.phone_format?t.phone_format:a;switch(t.code){case 10:var o=$("#user_auth_success"),r={trigger_link:$(this),boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return o.length>0?($(".user_cabinet").removeClass("hidden"),$(".user_auth").addClass("hidden"),o.html()):""}};e.show_popup(r);break;case 50:o=$("#user_registrate"),r={trigger_link:$(this),boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return o.length>0?($(".js_user_registrate_phone",o).val(a),$(".js_user_registrate_phone_text",o).html(n),o.html()):""}};e.show_popup(r);break;case 20:s.addClass("m-error");break;case 100:var l=$(this);o=$("#user_unknown_error"),r={trigger_link:l,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return o.length>0?($(".popup_form_under",o).html(i),o.html()):""}};e.show_popup(r)}},error:function(){self.handleError({message:"Произошла ошибка"})}})}else r.addClass("hidden")}))}))},registrate:function(){var e=this;$(document).on("submit",".js_user_registrate form",(function(t){t.preventDefault();var i=$(this),n=i.find("input, select, textarea").serializeObject(),s=$.extend({},n);helpers.delay.call(i,(function(){$.ajax({url:"/udata/users/registrate_by_phone_do/.json",dataType:"json",data:s,success:function(t){if(t.code){var i=t.msg?t.msg:"Неизвестная ошибка";switch(t.code){case 10:var n=$("#user_reg_success"),s={trigger_link:$(this),boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?($(".user_cabinet").removeClass("hidden"),$(".user_auth").addClass("hidden"),n.html()):""}};e.show_popup(s);break;case 15:var o=$(this);n=$("#user_check_sms"),s={trigger_link:o,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?(t.phone&&n.find(".js_user_check_sms_phone").val(t.phone),t.new_user&&n.find(".js_user_check_sms_phone_new_user").val(t.new_user),t.phone_text&&n.find(".js-user_check_sms_for_phone").text(t.phone_text),n.html()):""},afterLoad_callback:function(){forms.init(".b-leaflet");var t=$(".b-leaflet").find(".js_user_check_sms form"),i=t.find(".js_user_repeat_sms_btn"),n=t.find(".js_user_check_sms-timer");if(i.removeClass("hidden"),n.addClass("hidden"),clearTimeout(e.smsCountDownTimer),$(".b-leaflet .recaptcha").length>0){var s=$(".b-leaflet .recaptcha").get(0);grecaptcha.render(s,{sitekey:"6LefP3omAAAAABpMiOJL0ZA3YXop8xSF_1P7Rc_P"})}}};e.show_popup(s);break;case 30:n=$("#user_already_auth"),s={trigger_link:$(this),boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?($(".user_cabinet").removeClass("hidden"),$(".user_auth").addClass("hidden"),n.html()):""}};e.show_popup(s);break;case 40:case 50:o=$(this),n=$("#user_unknown_error"),s={trigger_link:o,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?($(".popup_form_under",n).html(i),n.html()):""}};e.show_popup(s);break;case 80:o=$(this),n=$("#user_auth_too_often_sms_send"),s={trigger_link:o,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?n.html():""}};e.show_popup(s);break;default:o=$(this),n=$("#user_auth_sms_send_error"),s={trigger_link:o,boxWidth:384,leafletMod:"b-leaflet__thin b-leaflet__user",content_callback:function(){return n.length>0?n.html():""}};e.show_popup(s)}}},error:function(){self.handleError({message:"Произошла ошибка"})}})}))}))},show_order_full_info:function(){var e=this;$(".js_show_order_full_info").each((function(){var t=$(this),i=$("#"+t.data("html_id")),n=i.length>0?i.html():"",s={trigger_link:t,leafletMod:t.data("leafletMod"),content_callback:function(){return n}};e.init_popup(s)}))},repeat_order:function(){$(document).on("click",".js_repeat_order",(function(e){e.preventDefault();var t=$(this),i=($("span",t),t.closest(".js_popup_order")),n=t.data("order_id"),s=$(".cart-preloader");s.addClass("preloader"),$.ajax({url:"/udata/emarket/repeatOrder/.json?o_id="+n,dataType:"json",success:function(e){e.status&&"successful"==e.status&&($(".cart-notice",i).remove(),e.items&&($.each(e.items,(function(e,t){var n=t.old_item_id?t.old_item_id:0;"error"==(t.status?t.status:0)&&$('.cabinet_popup_order_item[data-cart-item-id = "'+n+'"]',i).addClass("not_available").after('<div class="cart-notice "><div class="cart-notice__inner">Товара нет в наличии</div></div>')})),t.text("Перейти в корзину").attr("href","/emarket/cart/").removeClass("js_repeat_order"),t.after("<span>Товар у вас в корзине</span>"))),s.removeClass("preloader")},error:function(){s.removeClass("preloader"),self.handleError({message:"Произошла ошибка"})}})}))},lk_feedback:function(){var e=this;$(document).on("submit",".lk_feedback_form form",(function(t){t.preventDefault(),console.log("lk_content_feedback form submit");var i=$(this),n=i.find("input, select, textarea").serializeObject(),s=$.extend({},n),o=$(".cart-preloader");o.addClass("preloader"),console.log(i),helpers.delay.call(i,(function(){console.log(i),$.ajax({url:i.data("url")||window.location,dataType:"json",data:s,success:function(t){if(console.log(i),t.msg&&""!=t.msg){var i=$(".lk_feedback_form form");console.log(i),console.log("success feedback"),i.trigger("reset");var n=$("#"+i.data("html_id")),s=n.length>0?n.html():"",a={trigger_link:i,boxWidth:i.data("boxWidth"),leafletMod:i.data("leafletMod"),content_callback:function(){return s}};e.show_popup(a),console.log(a)}else console.log("fail feedback");o.removeClass("preloader")},error:function(){console.log("unknown fail feedback"),o.removeClass("preloader"),self.handleError({message:"Произошла ошибка"})}})}))}))},show_bottle_count:function(){if($(".cabinet-user-bottle-count").length>0){var e=$(".cabinet-user-bottle-count").eq(0),t=$(".cabinet-user-bottle-count-popup"),i=e.parent();i.addClass("is-loading"),$.ajax({url:"/udata/users/getUserBottleCount/.json?",dataType:"json",success:function(n){n.status&&"successful"==n.status&&n.hasOwnProperty("count")?(e.text(n.count),t.text(n.count)):(e.text("-"),t.text("-")),i.removeClass("is-loading")},error:function(){e.text("-"),t.text("-"),i.removeClass("is-loading")}})}},init:function(){var e=this;e.show_order_full_info(),e.repeat_order(),e.lk_feedback(),e.show_bottle_count();var t=$("#js_adress_answer"),i=$("#js_adress_answer_ymap");$(document).on("click",".check_adress",(function(e){console.log($(this).data("fulladress")),ymaps.geocode($(this).data("fulladress"),{kind:"house",results:1}).then((function(e){var t=e.geoObjects.get(0);i.html(t.properties.get("text")+"("+t.geometry.getCoordinates()+")")}),(function(e){alert(e.message)}))})),$(document).on("keyup","#address_test",(function(e){var i=$(this),n=i.val();helpers.delay.call(i,(async function(){t.html("");var e={query:n,count:20,locations_geo:{lat:59.938784,lon:30.314997,radius_meters:3e5},locations_boost:[{kladr_id:"78"}]},i={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token c60704ff232ea0f347a04396b3a0b8ce3d2afa82"},body:JSON.stringify(e)};let s=await fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",i);e:try{let e=await s.json();if(console.log(e),!s.ok){t.html("Ошибка запроса");break e}console.log(e.suggestions.value);for(var o=0;o<e.suggestions.length;++o)t.html(t.html()+'<a href="#" class="check_adress" data-fulladress = "'+e.suggestions[o].unrestricted_value+'">'+e.suggestions[o].value+"</a><br/>")}catch(e){return console.log(e),t.innerHTML="Ошибка при обработке запроса. Пожалуйста, свяжитесь с нами по телефону.",!1}}))}))}}).init()})),$(document).ready((function(){({smsCountDownTimer:null,init_popup:function(e){e.trigger_link.leafLetPopUp({closeBtnLocation:"box",content:e.content_callback,boxWidth:function(){return e.boxWidth||600},beforeLoad:function(t,i){var n=$(".b-leaflet");n.data("triggerElement",e.trigger_link),e.leafletMod&&($("body").addClass(e.leafletMod),n.addClass(e.leafletMod))},beforeClose:function(t){e.leafletMod&&$("body").removeClass(e.leafletMod)},afterLoad:e.afterLoad_callback||function(){forms.init(".b-leaflet")}})},show_popup:function(e){e.trigger_link.leafLetPopUp("show",{closeBtnLocation:"box",content:e.content_callback,boxWidth:function(){return e.boxWidth||600},beforeLoad:function(t,i){var n=$(".b-leaflet");n.data("triggerElement",e.trigger_link),e.leafletMod&&($("body").addClass(e.leafletMod),n.addClass(e.leafletMod))},beforeClose:function(t){e.leafletMod&&$("body").removeClass(e.leafletMod)},afterLoad:e.afterLoad_callback||function(){forms.init(".b-leaflet")}})},select_beautify:function(e){var t,i,n,s,o,a,r,l,c;for(console.log("select"),t=e.get(0).getElementsByClassName("custom-select"),console.log(t),s=t.length,i=0;i<s;i++){for(o=(a=t[i].getElementsByTagName("select")[0]).length,(r=document.createElement("DIV")).setAttribute("class","select-selected"),r.innerHTML=a.options[a.selectedIndex].innerHTML,t[i].appendChild(r),(l=document.createElement("DIV")).setAttribute("class","select-items select-hide"),n=1;n<o;n++)(c=document.createElement("DIV")).innerHTML=a.options[n].innerHTML,c.addEventListener("click",(function(e){var t,i,n,s,o,a,r;for(a=(s=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,o=this.parentNode.previousSibling,i=0;i<a;i++)if(s.options[i].innerHTML==this.innerHTML){for(s.selectedIndex=i,o.innerHTML=this.innerHTML,r=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,n=0;n<r;n++)t[n].removeAttribute("class");this.setAttribute("class","same-as-selected");break}o.click(),$(this).closest(".custom-select").addClass("selected")})),l.appendChild(c);t[i].appendChild(l),r.addEventListener("click",(function(e){var t=$(this);console.log("click select"),e.stopPropagation(),d(this),t.hasClass("select-arrow-active")?(t.removeClass("select-arrow-active"),$(this.nextSibling).addClass("select-hide")):(t.addClass("select-arrow-active"),$(this.nextSibling).removeClass("select-hide"))}))}function d(e){var t,i,n,s,o,a=[];for(t=document.getElementsByClassName("select-items"),i=document.getElementsByClassName("select-selected"),s=t.length,o=i.length,n=0;n<o;n++)e==i[n]?a.push(n):i[n].classList.remove("select-arrow-active");for(n=0;n<s;n++)a.indexOf(n)&&t[n].classList.add("select-hide")}$(window).click((function(e){$(e.target).hasClass("js-select")||d(this)}))},purchase_return:function(){var e=this;$(".purchase_return").each((function(){var t=$(this),i=$("#"+t.data("html_id")),n=i.length>0?i.html():"",s={trigger_link:t,boxWidth:t.data("boxWidth"),leafletMod:t.data("leafletMod"),content_callback:function(){return n},afterLoad_callback:function(){$(".b-leaflet .js-selectric_pre").length>0&&$(".b-leaflet .js-selectric_pre").removeClass("js-pure").addClass("js-selectric"),$(".b-leaflet .js-datePicker_pre").length>0&&$(".b-leaflet .js-datePicker_pre").each((function(){var e=new Date;$(this).datepicker({maxDate:e,classes:"purchase_return_datepicker",autoClose:!0})})),e.select_beautify($(".b-leaflet")),forms.init(".b-leaflet")}};e.init_popup(s)}))},purchase_return_send:function(){var e=this;$(document).on("submit",".js_form_purchase_returns form",(function(t){t.preventDefault();var i=$(this),n=i.find("input, select, textarea").serializeObject(),s=$.extend({},n),o=$(".cart-preloader");o.addClass("is-shown"),console.log(i),helpers.delay.call(i,(function(){console.log(i),$.ajax({url:i.attr("action")||window.location,dataType:"json",data:s,success:function(t){if(console.log(i),t.msg&&""!=t.msg){var n=i.closest(".js_form_purchase_returns");console.log(n),console.log("success feedback"),console.log($("form",n)),console.log($(".b-form_message",n)),$(".custom-select .select-selected, .custom-select .select-items",i).remove(),e.select_beautify(i),i.trigger("reset"),$("form",n).addClass("hidden"),$(".b-form_message",n).removeClass("hidden")}else console.log("fail feedback");o.removeClass("is-shown")},error:function(){console.log("unknown fail feedback"),o.removeClass("is-shown")}})}))}))},init:function(){this.purchase_return(),this.purchase_return_send()}}).init()})),$((function(){console.log("hhh"),$(".contact-map").length>0&&(console.log("hh222h"),$(".contact-map").html(""),ymaps=window.ymaps,ymaps.ready((function(){console.log("hh4444h");$(this).empty();var e=new ymaps.Map("contact-map",{center:[59.973131,30.315868],zoom:10,controls:["fullscreenControl"]}),t=new ymaps.Placemark([59.902975,30.39828],{iconCaption:"Адрес офиса",balloonContentBody:"Россия, Санкт-Петербург, ул. Седова д. 12 офис 307"},{preset:"islands#darkOrangeIcon"}),i=new ymaps.Placemark([60.073369,30.402673],{iconCaption:"Адрес самовывоза",balloonContentBody:"Россия, Ленинградская область, Всеволожский район, посёлок Бугры, 2-й Гаражный проезд, 10"}),n=new ymaps.Placemark([59.853058,30.427636],{iconCaption:"Адрес самовывоза",balloonContentBody:"Россия, Санкт-Петербург, Софийская улица, 62 корпус 6"});e.geoObjects.add(t),e.geoObjects.add(i),e.geoObjects.add(n),$(".js_contact_item").on("click",(function(){if($(this).data("address-id")){switch($(this).data("address-id")){case 1:t.options.set("preset","islands#darkOrangeIcon"),i.options.set("preset","islands#blueIcon"),n.options.set("preset","islands#blueIcon");break;case 2:t.options.set("preset","islands#blueIcon"),i.options.set("preset","islands#darkOrangeIcon"),n.options.set("preset","islands#blueIcon");break;case 3:t.options.set("preset","islands#blueIcon"),i.options.set("preset","islands#blueIcon"),n.options.set("preset","islands#darkOrangeIcon")}$(".js_contact_item").removeClass("active"),$(this).addClass("active")}})),t.events.add(["click"],(function(e){$(".js_contact_item").removeClass("active"),$(".js_contact_item[data-address-id = 1]").addClass("active")})),i.events.add(["click"],(function(e){$(".js_contact_item").removeClass("active"),$(".js_contact_item[data-address-id = 2]").addClass("active")})),n.events.add(["click"],(function(e){$(".js_contact_item").removeClass("active"),$(".js_contact_item[data-address-id = 3]").addClass("active")}))})))})),
  /*!
   * smartbanner.js v1.19.1 <https://github.com/ain/smartbanner.js#readme>
   * Copyright © 2022 Ain Tohvri, contributors. Licensed under GPL-3.0.
   */
  function e(t,i,n){function s(a,r){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[a]={exports:{}};t[a][0].call(d.exports,(function(e){return s(t[a][1][e]||e)}),d,d.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"getCookieExpiresString",value:function(e){var t=new Date,i=new Date(t.getTime()+e);return"expires=".concat(i.toGMTString(),";")}},{key:"bake",value:function(t,i){document.cookie="smartbanner_exited=1; ".concat(t?e.getCookieExpiresString(t):""," path=").concat(i)}},{key:"unbake",value:function(){document.cookie="smartbanner_exited=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"baked",get:function(){return"1"===document.cookie.replace(/(?:(?:^|.*;\s*)smartbanner_exited\s*=\s*([^;]*).*$)|^.*$/,"$1")}}],(i=null)&&n(t.prototype,i),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=s},{}],2:[function(e,t,i){(function(e){(function(){"use strict";function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}var n,s,o;return n=i,o=[{key:"platform",value:function(){var e=window.navigator.maxTouchPoints,t=window.navigator.userAgent;return/Android/i.test(t)?"android":!window.MSStream&&!/X11|Linux/i.test(t)&&e&&e>0||/iPhone|iPad|iPod/i.test(t)?"ios":void 0}},{key:"userAgentMatchesRegex",value:function(e){return new RegExp(e).test(window.navigator.userAgent)}},{key:"jQueryMobilePage",value:function(){return void 0!==e.$&&"undefined"!==e.$.mobile&&null!==document.querySelector(".ui-page")}},{key:"wrapperElement",value:function(){var e=i.jQueryMobilePage()?".ui-page":"html";return document.querySelectorAll(e)}}],(s=null)&&t(n.prototype,s),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),i}();i.default=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,i){"use strict";var n,s,o=(n=e("./smartbanner.js"))&&n.__esModule?n:{default:n};window.addEventListener("load",(function(){(s=new o.default).apiEnabled?window.smartbanner=s:s.publish()}))},{"./smartbanner.js":5}],4:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,(i=[{key:"parse",value:function(){var e=document.getElementsByTagName("meta"),t={};return Array.apply(null,e).forEach((function(e){var i=null,n=e.getAttribute("name"),s=e.getAttribute("content");n&&s&&function(e){return-1!==e.indexOf("smartbanner:")&&e.split(":")[1].length>0}(n)&&s.length>0&&(-1!==(i=n.split(":")[1]).indexOf("-")&&(i=function(e){var t=e.split("-");return t.map((function(e,i){i>0&&(t[i]=e.charAt(0).toUpperCase()+e.substring(1))})),t.join("")}(i)),t[i]=s)})),t}}])&&n(t.prototype,i),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=s},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("./optionparser.js")),s=a(e("./detector.js")),o=a(e("./bakery.js"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l={originalTop:"data-smartbanner-original-top",originalMarginTop:"data-smartbanner-original-margin-top"};function c(e){this.positioningDisabled||d(e.data.height)}function d(e){for(var t,i=s.default.wrapperElement(),n=0,o=i.length;n<o;n++)if(t=i[n],s.default.jQueryMobilePage()){if(t.getAttribute(l.originalTop))continue;var a=parseFloat(getComputedStyle(t).top);t.setAttribute(l.originalTop,isNaN(a)?0:a),t.style.top=e+"px"}else{if(t.getAttribute(l.originalMarginTop))continue;var r=parseFloat(getComputedStyle(t).marginTop);t.setAttribute(l.originalMarginTop,isNaN(r)?0:r),t.style.marginTop=e+"px"}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new n.default;this.options=t.parse(),this.platform=s.default.platform();var i=new Event("smartbanner.init");document.dispatchEvent(i)}var t,i,a;return t=e,(i=[{key:"originalTop",get:function(){var e=s.default.wrapperElement()[0];return parseFloat(e.getAttribute(l.originalTop))}},{key:"originalTopMargin",get:function(){var e=s.default.wrapperElement()[0];return parseFloat(e.getAttribute(l.originalMarginTop))}},{key:"priceSuffix",get:function(){return"ios"===this.platform?this.options.priceSuffixApple:"android"===this.platform?this.options.priceSuffixGoogle:""}},{key:"icon",get:function(){return"android"===this.platform?this.options.iconGoogle:this.options.iconApple}},{key:"buttonUrl",get:function(){return"android"===this.platform?this.options.buttonUrlGoogle:"ios"===this.platform?this.options.buttonUrlApple:"#"}},{key:"closeLabel",get:function(){return void 0!==this.options.closeLabel?this.options.closeLabel:"Close"}},{key:"html",get:function(){var e=this.options.customDesignModifier?this.options.customDesignModifier:this.platform;return'<div class="smartbanner smartbanner--'.concat(e,' js_smartbanner">\n      <a href="javascript:void();" class="smartbanner__exit js_smartbanner__exit" aria-label="').concat(this.closeLabel,'"></a>\n      <div class="smartbanner__icon" style="background-image: url(').concat(this.icon,');"></div>\n      <div class="smartbanner__info">\n        <div>\n          <div class="smartbanner__info__title">').concat(this.options.title,'</div>\n          <div class="smartbanner__info__author">').concat(this.options.author,'</div>\n          <div class="smartbanner__info__price">').concat(this.options.price).concat(this.priceSuffix,'</div>\n        </div>\n      </div>\n      <a href="').concat(this.buttonUrl,'" target="_blank" class="smartbanner__button js_smartbanner__button" rel="noopener" aria-label="').concat(this.options.button,'"><span class="smartbanner__button__label">').concat(this.options.button,"</span></a>\n    </div>")}},{key:"height",get:function(){try{return document.querySelector(".js_smartbanner").offsetHeight}catch(e){return 0}}},{key:"platformEnabled",get:function(){var e=this.options.enabledPlatforms||"android,ios";return e&&-1!==e.replace(/\s+/g,"").split(",").indexOf(this.platform)}},{key:"positioningDisabled",get:function(){return"true"===this.options.disablePositioning}},{key:"apiEnabled",get:function(){return"true"===this.options.api}},{key:"userAgentExcluded",get:function(){return!!this.options.excludeUserAgentRegex&&s.default.userAgentMatchesRegex(this.options.excludeUserAgentRegex)}},{key:"userAgentIncluded",get:function(){return!!this.options.includeUserAgentRegex&&s.default.userAgentMatchesRegex(this.options.includeUserAgentRegex)}},{key:"hideTtl",get:function(){return!!this.options.hideTtl&&parseInt(this.options.hideTtl)}},{key:"hidePath",get:function(){return this.options.hidePath?this.options.hidePath:"/"}},{key:"publish",value:function(){if(0===Object.keys(this.options).length)throw new Error("No options detected. Please consult documentation.");if(o.default.baked)return!1;if(this.userAgentExcluded)return!1;if(!this.platformEnabled&&!this.userAgentIncluded)return!1;var e=document.createElement("div");document.querySelector("body").appendChild(e),e.outerHTML=this.html;var t=new Event("smartbanner.view");document.dispatchEvent(t),this.positioningDisabled||d(this.height),function(e){document.querySelector(".js_smartbanner__exit").addEventListener("click",(function(t){return function(e,t){t.exit(),e.preventDefault()}(t,e)})),document.querySelector(".js_smartbanner__button").addEventListener("click",(function(t){return function(e,t){t.clickout()}(0,e)})),s.default.jQueryMobilePage()&&$(document).on("pagebeforeshow",e,c)}(this)}},{key:"exit",value:function(){s.default.jQueryMobilePage()&&$(document).off("pagebeforeshow",c),this.positioningDisabled||function(){for(var e,t=s.default.wrapperElement(),i=0,n=t.length;i<n;i++)e=t[i],s.default.jQueryMobilePage()&&e.getAttribute(l.originalTop)?e.style.top=e.getAttribute(l.originalTop)+"px":e.getAttribute(l.originalMarginTop)&&(e.style.marginTop=e.getAttribute(l.originalMarginTop)+"px")}();var e=document.querySelector(".js_smartbanner");document.querySelector("body").removeChild(e);var t=new Event("smartbanner.exit");document.dispatchEvent(t),o.default.bake(this.hideTtl,this.hidePath)}},{key:"clickout",value:function(){var e=new Event("smartbanner.clickout");document.dispatchEvent(e)}}])&&r(t.prototype,i),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=h},{"./bakery.js":1,"./detector.js":2,"./optionparser.js":4}]},{},[3]);


$(document).ready(function () {

  /**
   * Подгрузить баннер со временем
   */
  console.log('time-wrap-dummy');
  if($('.time-wrap-dummy').length > 0) {
    console.log('time-wrap-dummy-----');
    $.ajax({
      //url: _this.data('url') || window.location,
      url: '/udata://catalog/banner//1/.json',
      dataType: 'json',
      success: function(response) {
        console.log('time-wrap-dummy-YES');
        if (response.hasOwnProperty('delivery_time')) {
          if (response.delivery_time.hasOwnProperty('intervalMessage')) {
            let link = response.delivery_time.hasOwnProperty('link') ? response.delivery_time.link : '';
            let open_in_new_tab = (response.delivery_time.hasOwnProperty('open_in_new_tab') &&  response.delivery_time.open_in_new_tab == 1 )? ' target="_blank' : '';
            let intervalMessage = response.delivery_time.intervalMessage;
            let timeBannerWrap = $('.time-wrap-dummy:first');
            let template = '<div class="time-wrap">\n' +
              '                <a class="d-time" href="' + link + '" title="Доставка и оплата" ' + open_in_new_tab + '>\n' +
              '                  <span>\n' +
              '                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" fill="none">\n' +
              '                      <path fill-rule="evenodd" clip-rule="evenodd" d="M33.5 18C33.5 26.5604 26.5604 33.5 18 33.5C9.43959 33.5 2.5 26.5604 2.5 18C2.5 9.43959 9.43959 2.5 18 2.5C26.5604 2.5 33.5 9.43959 33.5 18ZM36 18C36 27.9411 27.9411 36 18 36C8.05887 36 0 27.9411 0 18C0 8.05887 8.05887 0 18 0C27.9411 0 36 8.05887 36 18ZM19.25 6.00006C19.25 5.30971 18.6904 4.75006 18 4.75006C17.3096 4.75006 16.75 5.30971 16.75 6.00006V18.7501C16.75 19.5785 17.4216 20.2501 18.25 20.2501H27C27.6904 20.2501 28.25 19.6904 28.25 19.0001C28.25 18.3097 27.6904 17.7501 27 17.7501H19.25V6.00006Z" fill="#072D76"/>\n' +
              '                    </svg>\n' +
              '                  </span>\n' +
              '                  <div class="text">Ближайшее время доставки: ' + intervalMessage + ' или</div>\n' +
              '                </a>\n' +
              '                <a class="d-hour" target="_blank" href="/akcii/akciya-dostavka-za-chas/">\n' +
              '                  <span>\n' +
              '                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" fill="none">\n' +
              '                      <path fill-rule="evenodd" clip-rule="evenodd" d="M33.5 18C33.5 26.5604 26.5604 33.5 18 33.5C9.43959 33.5 2.5 26.5604 2.5 18C2.5 9.43959 9.43959 2.5 18 2.5C26.5604 2.5 33.5 9.43959 33.5 18ZM36 18C36 27.9411 27.9411 36 18 36C8.05887 36 0 27.9411 0 18C0 8.05887 8.05887 0 18 0C27.9411 0 36 8.05887 36 18ZM19.25 6.00006C19.25 5.30971 18.6904 4.75006 18 4.75006C17.3096 4.75006 16.75 5.30971 16.75 6.00006V18.8965C16.75 19.2943 16.908 19.6759 17.1893 19.9572L23.1161 25.8839C23.6043 26.3721 24.3957 26.3721 24.8839 25.8839C25.372 25.3958 25.372 24.6043 24.8839 24.1162L19.25 18.4823V6.00006Z" fill="white"/>\n' +
              '                    </svg>\n' +
              '                  </span>\n' +
              '                  <div class="text">Доставка в течение часа!</div>\n' +
              '                </a>\n' +
              '              </div>'

            timeBannerWrap.html(template);
          }
        }

      },
      error: function() {

      }
    });
  }
});